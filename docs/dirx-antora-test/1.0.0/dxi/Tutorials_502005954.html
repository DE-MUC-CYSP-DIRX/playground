<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tutorials_502005954 :: DirX Docs Test with Antora</title>
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">DirX Docs Test with Antora</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dirx-antora-test" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">dirx-antora-test</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Overview</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Start</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">DirX Identity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="DirX-Identity-V8.10-SP2_497680389.html">DirX Identity V8.10 SP2</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Documentation_501940226.html">Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Introduction_501022729.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Challenge_502300686.html">Challenge</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Overview_501350431.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Glossary_501678118.html">Glossary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Tutorial_501842013.html">Tutorial</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Getting-Started_502267994.html">Getting Started</a>
  </li>
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="Tutorials_502005954.html">Tutorials</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Sample-Domain_503283770.html">Sample Domain</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Provisioning-Administration-Guide_504201235.html">Provisioning Administration Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Managing-the-Provisioning-System_504463382.html">Managing the Provisioning System</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="Planning-Checklist_504660043.html">Planning Checklist</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="User-Management_506724354.html">User Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Application Development Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch1_applsref.html#understanding_the_default_application_workflow_technology">Understanding the Default Application Workflow Technology</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch1_applsref.html#understanding_request_workflows">Understanding Request Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch1_applsref.html#understanding_java_based_workflows">Understanding Java-based Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch1_applsref.html#understanding_tcl_based_workflows">Understanding Tcl-based Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch2_reqWFs.html#using_request_workflows">Using Request Workflows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_creation_workflows">Understanding Creation Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_modification_workflows">Understanding Modification Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_assignment_workflows">Understanding Assignment Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_deletion_workflows">Understanding Deletion Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_certification_workflows">Understanding Certification Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_service_management_workflows">Understanding Service Management Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ch3_configScen.html#configuring_custom_scenarios">Configuring Custom Scenarios</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">dirx-antora-test</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">dirx-antora-test</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">dirx-antora-test</a></li>
    <li><a href="index.html">DirX Identity</a></li>
    <li><a href="DirX-Identity-V8.10-SP2_497680389.html">DirX Identity V8.10 SP2</a></li>
    <li><a href="Documentation_501940226.html">Documentation</a></li>
    <li><a href="Tutorial_501842013.html">Tutorial</a></li>
    <li><a href="Tutorials_502005954.html">Tutorials</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/DE-MUC-CYSP-DIRX/playground.wiki/edit/master/docs/modules/dxi/pages/Tutorials_502005954.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Tutorials_502005954</h1>
<div id="preamble">
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="index.html" class="xref page">DirX Identity Knowledge Base</a></p>
</li>
<li>
<p><a href="DirX-Identity-V8.10-SP2_497680389.html" class="xref page">DirX Identity V8.10 SP2</a></p>
</li>
<li>
<p><a href="Documentation_501940226.html" class="xref page">Documentation</a></p>
</li>
<li>
<p><a href="Tutorial_501842013.html" class="xref page">Tutorial</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="title-heading"><a class="anchor" href="#title-heading"></a>[<mark>title-text]</mark> DirX Identity Knowledge Base : Tutorials #</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Created by Gary Weissenbacher, last modified on Jul 02, 2024</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Tutorials-RH_PD_TOC_BKFollow-onTutorials"><a class="anchor" href="#Tutorials-RH_PD_TOC_BKFollow-onTutorials"></a><span id="Tutorials-RH_PD_TOC_BK">[<mark>RH_PD_TOC_BK .confluence-anchor-link]</span></mark>#Follow-on Tutorials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The follow-on tutorials in this chapter describe how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Re-use the rules and concepts of the sample domain in your customer environment</p>
</li>
<li>
<p>Integrate a customer-specific agent into DirX Identity</p>
</li>
<li>
<p>Maintain the privilege structure</p>
</li>
<li>
<p>Change a workflow&#8217;s structure</p>
</li>
<li>
<p>Apply segregation of duties (SoD) checking</p>
</li>
<li>
<p>Enable re-approval for a privilege assignment</p>
</li>
<li>
<p>Certify a role</p>
</li>
<li>
<p>Certify a user</p>
</li>
<li>
<p>Apply attribute modification approval</p>
</li>
<li>
<p>Use scheduled privilege assignment</p>
</li>
<li>
<p>Create a nested workflow</p>
</li>
<li>
<p>Use manual provisioning</p>
</li>
<li>
<p>Work with internal tickets</p>
</li>
<li>
<p>Work with source tickets</p>
</li>
<li>
<p>Create and handle personas</p>
</li>
<li>
<p>Create and handle functional users</p>
</li>
<li>
<p>Use risk management</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Tutorials-ReusingtheSampleDomain"><a class="anchor" href="#Tutorials-ReusingtheSampleDomain"></a>Reusing the Sample Domain</h3>
<div class="paragraph">
<p>It&#8217;s a good idea to reuse parts of the sample domain scenario to build a customer domain, especially the policies and request workflows in the Policies and Workflows collections.</p>
</div>
<div class="paragraph">
<p>To re-use components of the sample domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure your customer domain.</p>
</li>
<li>
<p>Export the objects to be reused from the sample domain.</p>
</li>
<li>
<p>Import the objects to your customer domain.</p>
</li>
<li>
<p>Adapt the objects to your customer domain.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also add or remove objects from the default collection or create your own collections to meet your requirements.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-ConfiguringtheCustomerDomain"><a class="anchor" href="#Tutorials-ConfiguringtheCustomerDomain"></a>Configuring the Customer Domain</h4>
<div class="paragraph">
<p>We assume that you have already installed DirX Identity and that you have not created your own customer domain (if you have already created a customer domain, you can use this domain in these exercises instead of creating another one). Now we&#8217;ll create the new domain a customer domain - we&#8217;ll name it YourDomain - and check that it exists.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CreatingtheNewDomain"><a class="anchor" href="#Tutorials-CreatingtheNewDomain"></a>Creating the New Domain</h5>
<div class="paragraph">
<p>To create the YourDomain domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select <strong>Start</strong> &#8594; <strong>Programs</strong> &#8594; <strong>Atos DirX Identity V*<em>n</em></strong>.<strong><em>n</em> &#8594; *Configuration</strong> to start the configuration wizard.</p>
</li>
<li>
<p>Click <strong>Next</strong> and check all options except for <strong>Web Center for SAP…</strong>.</p>
</li>
<li>
<p>Click through the wizard steps until you reach <strong>Domain</strong> <strong>Configuration</strong>.</p>
</li>
<li>
<p>In <strong>Domain</strong> <strong>Configuration</strong>, choose <strong>Configure</strong> <strong>a</strong> <strong>customer</strong> <strong>domain</strong> and enter <strong>YourDomain</strong> as the customer domain name.</p>
</li>
<li>
<p>Click through the remaining wizard steps and then click <strong>Finish</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The wizard creates your customer domain with the name YourDomain, configures the Web Center and creates a server profile for the new domain.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheNewDomain"><a class="anchor" href="#Tutorials-CheckingtheNewDomain"></a>Checking the New Domain</h5>
<div class="paragraph">
<p>Now let&#8217;s check the domain we just created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start DirX Identity Manager and choose Provisioning. In the Login dialog, select <strong>cn=YourDomain</strong> in <strong>Server</strong> and <strong>cn=DomainAdmin,cn=YourDomain</strong> in <strong>User</strong> <strong>DN</strong> (the Login dialog should display a server profile that contains these parameters).</p>
</li>
<li>
<p>Check that the domain is created correctly.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ExportingObjectsfromtheSampleDomain"><a class="anchor" href="#Tutorials-ExportingObjectsfromtheSampleDomain"></a>Exporting Objects from the Sample Domain</h4>
<div class="paragraph">
<p>In this step, we export the objects we want to use in our new domain from the My-Company sample domain. To do this, we use the collection feature of DirX Identity. A <strong>collection</strong> defines a set of objects and subtrees that can be exported to an LDIF file for subsequent transfer to another domain. We&#8217;ll export the Policies and Workflows default collection in the My-Company domain.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-EnablingFull-TextLDIFOutput"><a class="anchor" href="#Tutorials-EnablingFull-TextLDIFOutput"></a>Enabling Full-Text LDIF Output</h5>
<div class="paragraph">
<p>Before we export the default Policies and Workflows collection, we need to change a setting in DirX Identity&#8217;s configuration file to permit DirX Identity to generate LDIF output in full-text format. Although this format is not standards-compatible, it is very useful when you need to change parameters in all parts of an object, as we will do in the "Importing" step. If we do not change this setting, the output of text is in base64 format and it is impossible to change the text content. To change the setting in the configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Exit DirX Identity Manager.</p>
</li>
<li>
<p>Open the file <strong>dxi.cfg</strong> in the <em>install_path</em>*/GUI/bin* directory.</p>
</li>
<li>
<p>Set the variable <strong>collection.base64</strong> to <strong>false</strong> if it&#8217;s not already set and then save the file.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CopyingtheDefaultPoliciesandWorkflowsCollection"><a class="anchor" href="#Tutorials-CopyingtheDefaultPoliciesandWorkflowsCollection"></a>Copying the Default Policies and Workflows Collection</h5>
<div class="paragraph">
<p>To copy the default collection from the My-Company sample domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the DirX Identity Manager. In the Log in dialog, select the My-Company server profile (<strong>Server</strong> is <strong>cn=My-Company</strong>, <strong>User DN</strong> is <strong>cn=DomainAdmin,cn=My-Company</strong>).</p>
</li>
<li>
<p>Select the <strong>Domain Configuration</strong> view and open <strong>My-Company</strong> &#8594; <strong>Collections</strong> &#8594; <strong>Default</strong> &#8594; <strong>Policies and Workflows</strong>.</p>
</li>
<li>
<p>Copy the complete collection (<strong>Copy Object</strong>) and then check the content. If you need additional objects or subtrees, change the copied collection.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ExportingtheDefaultCollection"><a class="anchor" href="#Tutorials-ExportingtheDefaultCollection"></a>Exporting the Default Collection</h5>
<div class="paragraph">
<p>To export the collection you just copied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click the copied collection and select <strong>Export Collection</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check that the exported file exists (see the <strong>Path</strong> field in the <strong>General</strong> tab of the collection).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ImportingObjectstotheCustomerDomain"><a class="anchor" href="#Tutorials-ImportingObjectstotheCustomerDomain"></a>Importing Objects to the Customer Domain</h4>
<div class="paragraph">
<p>In this step, we&#8217;ll modify the exported collection and import it into our customer domain.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-EditingtheExportedCollectionFile"><a class="anchor" href="#Tutorials-EditingtheExportedCollectionFile"></a>Editing the Exported Collection File</h5>
<div class="paragraph">
<p>First, we&#8217;ll edit the collection we just exported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the exported collection file with any text editor.</p>
</li>
<li>
<p>Change all occurrences of <strong>My-Company</strong> to <strong>YourDomain</strong>. (We can perform this step only because we produced the LDIF file in full-text format rather than base64.)</p>
</li>
<li>
<p>Save the file.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ImportingtheModifiedCollectionFile"><a class="anchor" href="#Tutorials-ImportingtheModifiedCollectionFile"></a>Importing the Modified Collection File</h5>
<div class="paragraph">
<p>To import the collection file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the top node in any view of DirX Identity and select <strong>Logout</strong>.</p>
</li>
<li>
<p>Log in to <strong>YourDomain</strong>.</p>
</li>
<li>
<p>Create a new rule container named <strong>YourCompany</strong> within <strong>Provisioning</strong> &#8594; <strong>Policies</strong> &#8594; <strong>Rules</strong> by right-clicking on <strong>Rules</strong> and choosing <strong>New</strong> &#8594; <strong>Rule</strong> <strong>Container</strong>.</p>
</li>
<li>
<p>Switch to <strong>Data</strong> <strong>View</strong> &#8594; <strong>Provisioning</strong>.</p>
</li>
<li>
<p>Select <strong>File</strong> &#8594; <strong>Import</strong>.</p>
</li>
<li>
<p>Select the previously modified file, click <strong>Modify entry if it exists, add entry otherwise</strong> and <strong>Replace attribute values</strong> and then click <strong>OK</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The file is imported into YourDomain. If errors occur, correct them in the text file and import the file again.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-AdaptingtheImportedObjects"><a class="anchor" href="#Tutorials-AdaptingtheImportedObjects"></a>Adapting the Imported Objects</h4>
<div class="paragraph">
<p>The collection you&#8217;ve imported from the My-Company sample domain consists of Access Policies, Request and Approval Workflows (including Jobs) and Provisioning Rules. Before you can use these imported objects, you need to adapt them to the structures and requirements of YourDomain. The examples given here describe what you might need to change. Select objects from the collection that most closely resemble the ones you need. If you need more objects from the sample domain, include them into a collection and follow the steps described in this section again.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-AdaptingAccessPolicies"><a class="anchor" href="#Tutorials-AdaptingAccessPolicies"></a>Adapting Access Policies</h5>
<div class="paragraph">
<p>To adapt the imported access policies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set all imported access policies to inactive.</p>
</li>
<li>
<p>We use the <strong>Manager for user</strong> policy for our example.</p>
</li>
<li>
<p>Check whether the name of the access policy is to be changed. If yes, use the <strong>Rename</strong> command.</p>
</li>
<li>
<p>Adapt the <strong>Subject</strong> and <strong>Resource</strong> definitions to the structures in <strong>YourDomain</strong>, for example the search base of the filters.</p>
</li>
<li>
<p>Activate the modified access policy, store it and test the result.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-AdaptingRequestandApprovalWorkflows"><a class="anchor" href="#Tutorials-AdaptingRequestandApprovalWorkflows"></a>Adapting Request and Approval Workflows</h5>
<div class="paragraph">
<p>To adapt the imported request and approval workflows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First set all imported workflows to inactive.</p>
</li>
<li>
<p>We use the <strong>Manager</strong> workflow for our example.</p>
</li>
<li>
<p>Check whether the name of the workflow is to be changed. If yes, use the <strong>Rename</strong> command.</p>
</li>
<li>
<p>Open the workflow and click <strong>GM approval</strong>.</p>
</li>
<li>
<p>Change the approver list to existing persons in <strong>YourDomain</strong>.</p>
</li>
<li>
<p>Activate the workflow, save the object and test the result.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-AdaptingProvisioningRules"><a class="anchor" href="#Tutorials-AdaptingProvisioningRules"></a>Adapting Provisioning Rules</h5>
<div class="paragraph">
<p>To adapt the imported provisioning rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First set all imported rules to inactive.</p>
</li>
<li>
<p>We use the <strong>Internal Employees</strong> provisioning rule for our example.</p>
</li>
<li>
<p>Check whether the name of the rule is to be changed. If yes, use the <strong>Rename</strong> command.</p>
</li>
<li>
<p>Adapt the filter in the Filter tab to your requirements.</p>
</li>
<li>
<p>Set links to the privileges this rule is to provide during the policy execution process.</p>
</li>
<li>
<p>Set the active flag and store the rule.</p>
</li>
<li>
<p>Use the privilege resolution workflow to check whether the new rule works correctly.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-IntegratingaCustomer-SpecificAgent"><a class="anchor" href="#Tutorials-IntegratingaCustomer-SpecificAgent"></a>Integrating a Customer-Specific Agent</h3>
<div class="paragraph">
<p>In DirX Identity, an agent is a stand-alone executable that runs within a scheduled provisioning workflow and supports the interfaces to a specific target system that enables data exchange between that system and the identity store. The DirX Identity agent integration framework allows you (the customer) to integrate customer-specific connectivity scenarios - batch files and/or executables and the directories or databases on which they operate - into DirX Identity&#8217;s Connectivity Configuration as agents and connected directories so that you can use DirX Identity to control and manage them.</p>
</div>
<div class="paragraph">
<p>When your existing connectivity scenario corresponds to an agent that already exists in DirX Identity, and that agent allows connectivity to a target system that corresponds your existing database and supplies the necessary workflows, you can use the procedures described in "Getting Started" to integrate your connectivity scenario based on existing templates with the help of the configuration wizards in the DirX Identity Manager&#8217;s Global View. You use the agent integration framework when there are no templates available in DirX Identity that correspond to your connectivity scenario.</p>
</div>
<div class="paragraph">
<p>The topics presented in this section describe how to use the agent integration framework to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integrate a completely new connected directory and the associated customer-specific agent that imports and exports data to and from this directory into DirX Identity</p>
</li>
<li>
<p>Add new properties and wizards that support the connected directory and customer-specific agent to DirX Identity Manager</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingtheAgentIntegrationFramework"><a class="anchor" href="#Tutorials-UnderstandingtheAgentIntegrationFramework"></a>Understanding the Agent Integration Framework</h4>
<div class="paragraph">
<p>DirX Identity&#8217;s agent integration framework allows for different levels of integration, as shown in the following figure.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501350590.jpeg" alt="attachments/502005954/501350590" width="533"></span></p>
</div>
<div class="paragraph">
<p>The next sections summarize the tasks involved in each integration level and the time it takes to complete the integration. Note that all of these integration tasks assume that your existing connectivity scenario is operating properly and works correctly prior to its integration into DirX Identity. The level of effort that is required to write special scripts for the specific customer connectivity environment is not included in the time estimates provided here.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-UnderstandingSimpleExecutionIntegration"><a class="anchor" href="#Tutorials-UnderstandingSimpleExecutionIntegration"></a>Understanding Simple Execution Integration</h5>
<div class="paragraph">
<p>At the first level (Simple Execution), you integrate your existing connectivity scenario - the batch file or executable and associated database or directory on which it operates - so that the C++-based DirX Identity Server (IdS-C) can schedule it and control it. To integrate to this level, you use DirX Identity Manager&#8217;s connectivity global and Expert Views to define workflows and jobs for your existing connectivity scenario in the DirX Identity Connectivity configuration. The jobs have no input and output channels, only fixed command lines (which you have copied from the batch scripts of your existing connectivity environment) that start the synchronizations. Integrating to this level requires only a few hours of work.</p>
</div>
<div class="paragraph">
<p>Once you have completed this level of integration, IdS-C is able to start the connectivity scenario&#8217;s workflows and their related activities, control their execution (check the exit codes) and write status entries to the DirX Identity server&#8217;s status area in the Connectivity configuration. You can schedule the execution of your connectivity scenario&#8217;s workflows with DirX Identity and have the C++-based DirX Identity server manage their operations. You can also view the generated status entries from DirX Identity Manager&#8217;s connectivity Monitor View, but you cannot view any related files because DirX Identity has no knowledge of them at this integration level.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-UnderstandingCentralEditIntegration"><a class="anchor" href="#Tutorials-UnderstandingCentralEditIntegration"></a>Understanding Central Edit Integration</h5>
<div class="paragraph">
<p>At the next level (Central Edit), you use the DirX Identity Manager&#8217;s connectivity Expert View to integrate your existing connectivity scenario so that all of your agent configuration files, import and export data files, and report and trace files are defined in the DirX Identity Connectivity configuration.</p>
</div>
<div class="paragraph">
<p>To integrate to this level, you define the name of your input, output, report, and trace files and the location at which to find them before or after a run. You can also specify if they should be deleted after the copy operation. You can also copy the content of your existing agent configuration files into the Connectivity configuration. If you&#8217;re an experienced DirX Identity user, you&#8217;ll need about one day to integrate to this level.</p>
</div>
<div class="paragraph">
<p>When you have completed this level of integration, you have a central location (access to the Connectivity configuration via the DirX Identity Manager) from which to edit these files to manage your connectivity scenario. In addition, the C++-based DirX Identity Server can copy generated files to the status area so that they are not overwritten on subsequent runs of your workflows. You can now view these files from DirX Identity Manager&#8217;s connectivity Monitor View from any point worldwide.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-UnderstandingDetailedCustomization"><a class="anchor" href="#Tutorials-UnderstandingDetailedCustomization"></a>Understanding Detailed Customization</h5>
<div class="paragraph">
<p>At the highest level (Detailed Customization), you integrate your existing connectivity scenario so that it is tightly integrated into DirX Identity. To integrate to this level, you use the DirX Identity Manager&#8217;s connectivity Expert View to set up XML descriptions for the objects that you want to extend. You can set references based on these definitions and you can write wizards to make it easy to handle your synchronizations. Integrating to this level can take several days or weeks depending on the features you require.</p>
</div>
<div class="paragraph">
<p>Once you have completed these steps, you can access the properties of existing Connectivity configuration objects or add properties to your own types of agents and connected directories to the Connectivity configuration (your XML descriptions have defined these types). You can then edit these properties from DirX Identity Manager, and the changes are automatically transferred to the configuration files that control your agents at runtime. You can even define your own wizards to provide for easy configuration. This level allows you to control consistency in a complex workflow environment. Scheduling and monitoring features are also available at this level.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-IntegratingaConnectivityScenario"><a class="anchor" href="#Tutorials-IntegratingaConnectivityScenario"></a>Integrating a Connectivity Scenario</h4>
<div class="paragraph">
<p>This section provides a tutorial that explains how to integrate a connectivity scenario that consists of a new agent and a new connected directory into DirX Identity at each of the integration levels described in "Understanding the Agent Integration Framework". The topics discussed here include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A description of the sample connectivity scenario (its elements and its environment) on which the tutorial is based</p>
</li>
<li>
<p>A summary of the tasks required to integrate the sample connectivity scenario into DirX Identity for each integration level</p>
</li>
<li>
<p>The level 1 integration of the sample connectivity scenario (simple execution)</p>
</li>
<li>
<p>The level 2 integration of the sample connectivity scenario (central edit)</p>
</li>
<li>
<p>The level 3 integration of the sample connectivity scenario (detailed customization)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that this example does not demonstrate how to integrate an agent into a target system synchronization or validation workflow. It simply shows how to generate a two-step workflow. Synchronization and validation workflows are a combination of such two-step workflows.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-UnderstandingtheSampleConnectivityScenario"><a class="anchor" href="#Tutorials-UnderstandingtheSampleConnectivityScenario"></a>Understanding the Sample Connectivity Scenario</h5>
<div class="paragraph">
<p>Now we&#8217;ll demonstrate how to use the agent integration framework to integrate a sample connectivity scenario - a non-LDAP database and the save and restore tool that manages it - into DirX Identity as a new connected directory and agent and create a workflow from the DirX Identity store to the new connected directory. First, we&#8217;ll list the pre-requisites for continuing with this exercise, then we&#8217;ll describe the elements of the connectivity scenario - the non-LDAP database connected directory and agent.</p>
</div>
<div class="sect5">
<h6 id="Tutorials-PrerequisitesforIntegratingtheSampleConnectivityScenario"><a class="anchor" href="#Tutorials-PrerequisitesforIntegratingtheSampleConnectivityScenario"></a>Prerequisites for Integrating the Sample Connectivity Scenario</h6>
<div class="paragraph">
<p>Before you can follow this exercise, you must ensure that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An identity store has been set up on the main server.</p>
</li>
<li>
<p>A DirX Identity C++-based Server installation has been performed on the main server.</p>
</li>
<li>
<p>The necessary DirX Identity agents have been installed on the main server.</p>
</li>
<li>
<p>A connectivity scenario exists that contains all of the connected directories and workflows provided with DirX Identity.</p>
</li>
<li>
<p>The entire scenario runs on one machine.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-UnderstandingtheSampleConnectedDirectory"><a class="anchor" href="#Tutorials-UnderstandingtheSampleConnectedDirectory"></a>Understanding the Sample Connected Directory</h6>
<div class="paragraph">
<p>The database (we&#8217;ll name it MyDatabase) needs basic information about a person from the DirX Identity store (<strong>Identity</strong> <strong>Store</strong>). To keep it simple, we&#8217;ll model our database as a directory with two constant file names (<strong>import.ldif</strong> and <strong>export.ldif</strong>) in the directory <strong>C:\MyDatabase</strong>. The attributes we want to synchronize to MyDatabase are FirstName, Lastname, PersonnelID, Location, and TelephoneNumber.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-UnderstandingtheSampleAgent"><a class="anchor" href="#Tutorials-UnderstandingtheSampleAgent"></a>Understanding the Sample Agent</h6>
<div class="paragraph">
<p>The agent (we&#8217;ll name it <strong>MyAgent</strong>) that operates on <strong>MyDatabase</strong> uses LDIF file format as its interface: it reads files in LDIF format to import data into <strong>MyDatabase</strong> and produces files during an export from <strong>MyDatabase</strong> in the same format. <strong>MyAgent</strong> is controlled by command line parameters and a configuration file in "ini-file" (<strong>*.ini</strong>) format (in this section we&#8217;ll refer to <strong>MyAgent</strong>'s file as its "INI file"). Again, to keep it simple, we&#8217;ll design our agent to be a batch script that takes a file and copies it to the <strong>MyDatabase</strong> directory. The agent&#8217;s INI file <strong>control.ini</strong> has the following content:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>; INI File for MyAgent
; Generated by Joe Smith at 21.02.2005 12:34:43
[EntryHandling]
CreateEntries=true
DeleteEntries=true
ModifyEntries=true</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this INI file does not have any influence on the real behavior of this agent. It simply shows how it could work.</p>
</div>
<div class="paragraph">
<p>The agent&#8217;s command line has the following syntax:</p>
</div>
<div class="paragraph">
<p><strong>myagent -i [-t]</strong> <em>ini-file infile</em><br>
for import to <strong>MyDatabase</strong></p>
</div>
<div class="paragraph">
<p>The <strong>-t</strong> parameter is optional and creates a trace file if present.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-PlanningtheIntegrationTasks"><a class="anchor" href="#Tutorials-PlanningtheIntegrationTasks"></a>Planning the Integration Tasks</h5>
<div class="paragraph">
<p>Now let&#8217;s begin to set up the sample connectivity scenario in the DirX Identity Connectivity configuration. We won&#8217;t perform the entire task in one big step. Instead we&#8217;ll go through several phases, test, and then go on to the next phase. This process reduces complexity and illustrates each integration level that DirX Identity provides. First, we&#8217;ll identify and order the tasks to be performed in each phase before we start to enter any data into the Connectivity configuration. Please note that the guidelines given here do not represent the only way to perform the sequence of tasks, but they are straightforward.</p>
</div>
<div class="sect5">
<h6 id="Tutorials-PlanningforSimpleExecution_Level1"><a class="anchor" href="#Tutorials-PlanningforSimpleExecution_Level1"></a>Planning for Simple Execution (Level 1)</h6>
<div class="paragraph">
<p>To achieve this level of integration, we set up the new agent, the connected directory and a sample import workflow with a job that calls the new agent in the Connectivity configuration. The sample workflow imports from the identity store to the <strong>MyDatabase</strong> connected directory in full mode and contains two steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>An extraction of data from the identity store (we&#8217;ll use the DirX Identity meta controller <strong>metacp</strong> to perform this task)</p>
</li>
<li>
<p>An import to the new connected directory (we&#8217;ll use the new agent <strong>MyAgent</strong> for this task).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>At this level of integration, we assume that DirX Identity only knows where to start the sample workflow and what the new agent&#8217;s fixed command line looks like. DirX Identity has no knowledge of the new agent&#8217;s configuration (the agent&#8217;s INI file), input and output handling, or tracing. We also assume that the exchange of data between the meta controller and the new agent is carried out through a file (in LDIF format) at a fixed location and that all databases and processes run on one machine (the primary server).</p>
</div>
<div class="paragraph">
<p>Once we achieve this level of integration, we can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Schedule and run the connectivity scenario&#8217;s sample workflow and its related activities</p>
</li>
<li>
<p>View the generated workflow and activity status entries with DirX Identity Manager</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At this level, we cannot use DirX Identity Manager to view or trace files.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-PlanningforCentralEdit"><a class="anchor" href="#Tutorials-PlanningforCentralEdit"></a>Planning for Central Edit</h6>
<div class="paragraph">
<p>To achieve this level of integration, we:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add information about the new agent&#8217;s INI file to the Connectivity configuration</p>
</li>
<li>
<p>Create the input and output channels for the job</p>
</li>
<li>
<p>Add information about the new agent&#8217;s trace file to the Connectivity configuration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In our example, we remove the absolute path for the intermediate file and use relative paths for the entire configuration. This setup facilitates the reconfiguration of entire connectivity scenarios (for example, moving the scenario from one server to another).</p>
</div>
<div class="paragraph">
<p>Once we complete this level of integration, we can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Edit the new agent&#8217;s INI file as a whole from a central location without having to know where it&#8217;s located.</p>
</li>
<li>
<p>Request that all files generated by the sample workflow be saved to the status area after a run.</p>
</li>
<li>
<p>View the generated files or a workflow run.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-PlanningforDetailedCustomization"><a class="anchor" href="#Tutorials-PlanningforDetailedCustomization"></a>Planning for Detailed Customization</h6>
<div class="paragraph">
<p>To achieve this level of integration, we distribute the configuration parameters in the agent&#8217;s INI file to the relevant configuration objects so that we can easily edit them with DirX Identity Manager. The INI file now contains references to these distributed parameters (which are now the properties of configuration objects), which are resolved at runtime by the C++-based DirX Identity Server before it starts the agent.</p>
</div>
<div class="paragraph">
<p>Once we complete this level of integration, we can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Monitor the synchronization runs from the DirX Identity Manager and view the generated status files</p>
</li>
<li>
<p>Configure the synchronization from the DirX Identity Manager at the object and property level</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that this level of integration can vary in depth. It is up to you to define how many attributes will be accessible through DirX Identity Manager&#8217;s graphical interface.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-EnteringConnectivityConfigurationData"><a class="anchor" href="#Tutorials-EnteringConnectivityConfigurationData"></a>Entering Connectivity Configuration Data</h6>
<div class="paragraph">
<p>You primarily use DirX Identity Manager&#8217;s Expert View to enter Connectivity configuration data, and you should enter it in structured steps. These steps can be separated into:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Design tasks (planning and designing the new synchronization)</p>
</li>
<li>
<p>Setup tasks (for example, installing the new agent)</p>
</li>
<li>
<p>Configuration tasks (setting up or modifying objects in the Connectivity configuration with the help of DirX Identity Manager)</p>
</li>
<li>
<p>Testing tasks (starting your new workflow and checking to see if it works).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>do not forget to put as much descriptive information as possible into the configuration objects, because documentation is important in a complex environment. Use the description field in each object for this purpose.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-IntegratingtoSimpleExecution_Level1"><a class="anchor" href="#Tutorials-IntegratingtoSimpleExecution_Level1"></a>Integrating to Simple Execution (Level 1)</h5>
<div class="paragraph">
<p>This part of the tutorial explains how to integrate the sample connectivity scenario to the "simple execution" level. In this exercise, we&#8217;ll perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Preparation: set up the central configuration object to configure the new connected directory and agent type.</p>
</li>
<li>
<p>Copy the workflow Ident2ODBC as the basis for our workflow and adapt it.</p>
</li>
<li>
<p>Set up the new agent MyAgent.</p>
</li>
<li>
<p>Set up the connected directory MyDatabase.</p>
</li>
<li>
<p>Set up the connected directory channels.</p>
</li>
<li>
<p>Set up the new job MyJob.</p>
</li>
<li>
<p>Perform the rest of the configuration tasks.</p>
</li>
<li>
<p>Test: Check the new workflow including start and monitoring.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="Tutorials-SettinguptheCentralConfigurationObject"><a class="anchor" href="#Tutorials-SettinguptheCentralConfigurationObject"></a>Setting up the Central Configuration Object</h6>
<div class="paragraph">
<p>This preparation step is only necessary when you need to introduce new connected directories or agent types to DirX Identity and if you plan to go on to higher integration levels later on. If this is not the case, you can skip this step.</p>
</div>
<div class="paragraph">
<p>First, we need to set up a new connected directory type for our connected directory using the DirX Identity Manager Expert View:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, open the central configuration object <strong>Configuration</strong>.</p>
</li>
<li>
<p>Right-click <strong>Connected Directory Types</strong>, and then select <strong>New Connected Directory Type</strong>.</p>
</li>
<li>
<p>A dialog asks for the name of the new object. Enter <strong>MyDirType</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Setting the <strong>Type</strong> field is only necessary for types that are based on the meta controller (in this case we define a connected directory that is used exclusively by our own agent).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set <strong>Description</strong> to <strong>My private directory type</strong>.</p>
</li>
<li>
<p>Click <strong>OK</strong> to close the dialog.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A new leaf is inserted into the tree. You have now created a new generic connected directory type with no special features. We do no further customization at this point.</p>
</div>
<div class="paragraph">
<p>Next, we perform the same procedure for the new agent type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click <strong>Agent Types</strong> and perform the same procedure.</p>
</li>
<li>
<p>Create a new agent type <strong>MyAgentType</strong> and set <strong>Description</strong> to <strong>My private agent type</strong>.</p>
</li>
<li>
<p>Click <strong>OK</strong> to close the dialog.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The tree below <strong>Agent Types</strong> is extended with a new leaf. You now have created a new generic agent type with no special features. We do no further customization at this point.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-SettinguptheWorkflowMyWorkflow"><a class="anchor" href="#Tutorials-SettinguptheWorkflowMyWorkflow"></a>Setting up the Workflow MyWorkflow</h6>
<div class="paragraph">
<p>Although you can create a new workflow from scratch, it&#8217;s much easier to copy an existing workflow and modify it afterwards. We use an Ident2ODBC workflow as a template.</p>
</div>
<div class="paragraph">
<p>Before we copy the workflow, we should first create a new scenario to work with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Global View</strong>.</p>
</li>
<li>
<p>Click the top-level node and select <strong>New</strong> &#8594; <strong>Scenario</strong>. Enter <strong>MyScenario</strong> into <strong>Name</strong>.</p>
</li>
<li>
<p>To copy our workflow, we need an Identity Store and an ODBC instance. Create two new connected directory icons and create <strong>MyIdentityStore</strong> from Identity Store of the Default scenario (use the <strong>Configure</strong> method) and assign HR-ODBC from the Default scenario (use the <strong>Assign</strong> method). Note that the <strong>Assign</strong> operation does not create a new object. This is okay in this example because we only need this object for the workflow copy operation (if we copy this object, we have to delete it afterwards).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we can work in our private environment.</p>
</div>
<div class="paragraph">
<p>Because we want to configure a workflow with two activities (the first extracts data from the identity store, the second transfers this data to our database MyDatabase) we choose a two-step workflow that works in the same direction. In this case the <strong>Ident2ODBC</strong> workflow is a good selection.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a workflow line between the <strong>HR-ODBC</strong> and <strong>MyIdentityStore</strong> icons.</p>
</li>
<li>
<p>Click the workflow line and then select <strong>New</strong>.</p>
</li>
<li>
<p>The workflow wizard opens. Click <strong>Ident2ODBC</strong> from <strong>Default/Source Scheduled/ODBC</strong> and then click <strong>Next</strong>.</p>
</li>
<li>
<p>In the General Information step, change <strong>Name</strong> to <strong>MyWorkflow</strong>.</p>
</li>
<li>
<p>Step to Export Properties and change <strong>Search</strong> <strong>Filter</strong> to <strong>objectClass=dxrUser</strong> without Persona, Facets and Functional User because we want to export all user entries under the base node <strong>cn=Users,cn=My-Company</strong>. Use the filter editor (click the button to the right of the field) to remove the upper three lines.</p>
</li>
<li>
<p>Step to the end of the wizard and click <strong>Finish</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The wizard creates a copy of the original workflow and duplicates all dependent objects. Use the structure view to view the copied object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the line between the <strong>HR-ODBC</strong> and <strong>MyIdentityStore</strong> icons and select <strong>MyWorkflow</strong> &#8594; <strong>Show Structure</strong>.</p>
</li>
<li>
<p>The structure view window opens.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here you see all objects that belong to this workflow (the ones marked with a (1) in the figure "Level 1 integration"):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Workflow <strong>MyWorkflow</strong></p>
</li>
<li>
<p>First activity <strong>Ident2ODBC_metaCP</strong> (to be renamed to <strong>MyMetaCP</strong>)</p>
</li>
<li>
<p>First job <strong>Ident2ODBC_metaCP</strong> (to be renamed to <strong>MyMetaCP</strong>) with all scripts and the mapping information</p>
</li>
<li>
<p>Intermediate connected directory <strong>Data</strong> with its attribute configuration information (no renaming necessary)</p>
</li>
<li>
<p>Export channel from <strong>Identity</strong> <strong>Store</strong> to the first job <strong>Ident2ODBC</strong> with the selected attributes information</p>
</li>
<li>
<p>Import channel <strong>OutData</strong> to the intermediate connected directory <strong>Data</strong> with the selected attributes information</p>
</li>
<li>
<p>Export channel <strong>InData</strong> from <strong>Data</strong> to the next job with the selected attributes information</p>
</li>
<li>
<p>Second activity <strong>Ident2ODBC_ODBCImport</strong> (to be renamed to <strong>MyAgentActivity</strong>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Seven large objects together with a lot of detailed information have been copied in seconds. To build these structures by hand would result in hours of work. Of course we will adapt the naming and other things to fit the needs of our new workflow. We also need to substitute the second job with one that calls our new agent (MyJob) and create a new connected directory MyDatabase.</p>
</div>
<div class="paragraph">
<p>First, let&#8217;s use the workflow structure view to modify the created workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Edit</strong>. Please note that it is a good idea to click all table cells at the very beginning because otherwise you may perform one of the button operations immediately (you can undo this mistake by clicking <strong>Reset</strong> and then <strong>Edit</strong> again).</p>
</li>
<li>
<p>Click the activity <strong>Ident2ODBC_metaCP</strong> and then click <span class="image"><img src="_images/502005954/501088454.gif" alt="attachments/502005954/501088454"></span>. The activity object opens. Change the name to <strong>MyMetaCP</strong> and click <strong>OK</strong>.</p>
</li>
<li>
<p>Click the activity <strong>Ident2ODBC_ODBCImport</strong> and then click <span class="image"><img src="_images/502005954/501350586.gif" alt="attachments/502005954/501350586"></span>. The activity object opens. Change the name to <strong>MyAgentActivity</strong> and click <strong>OK</strong>.</p>
</li>
<li>
<p>Click the job <strong>Ident2ODBC_metaCP</strong> and then click <span class="image"><img src="_images/502005954/502235323.gif" alt="attachments/502005954/502235323"></span>. The job object opens. Change the name to <strong>MyMetaCP</strong>.</p>
</li>
<li>
<p>Click the <strong>Operation</strong> tab and uncheck <strong>Delta synchronization</strong>. (For easier testing it makes sense to switch off this feature.) Click <strong>OK</strong>.</p>
</li>
<li>
<p>Click the <strong>Ident2ODBC</strong> channel and then click <span class="image"><img src="_images/502005954/501842209.gif" alt="attachments/502005954/501842209"></span>. The channel object opens. Change the name from <strong>Ident2ODBC</strong> to <strong>MyWorkflow</strong> and click <strong>OK</strong>. We set the names of channels at a connected directory to the workflow name to help us understand better where a specific channel is used when we look at the channel folder of a connected directory.</p>
</li>
<li>
<p>Click the <strong>OutData</strong> channel and open it. Select the <strong>Entry Handling</strong> tab. Set <strong>Add Entries</strong> to <strong>ADD</strong> otherwise the job will not create any entries in the intermediate file. Click <strong>OK</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to exit the edit mode.</p>
</li>
<li>
<p>It is not necessary and does not make sense to edit the second job Ident2ODBC_ODBCImport and the connected directory ODBC because we will replace this job with a job that runs our agent and the ODBC connected directory with our new MyDatabase.</p>
</li>
<li>
<p>Click <strong>Close</strong> to exit the structure view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll check and modify the other objects we created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Expert View, open <strong>Workflows</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>ODBC</strong>. The workflow <strong>MyWorkflow</strong> exists. Change the name of the folder from <strong>ODBC</strong> to <strong>MyAgent</strong>.</p>
</li>
<li>
<p>Open <strong>Jobs</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>ODBC</strong>. There are two jobs: <strong>MyMetaCP</strong> and <strong>Ident2ODBC_ODBCImport</strong>. Change the name of the folder from <strong>ODBC</strong> to <strong>MyAgent</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The next step is to set up the new agent MyAgent.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-SettinguptheAgentMyAgent"><a class="anchor" href="#Tutorials-SettinguptheAgentMyAgent"></a>Setting up the Agent MyAgent</h6>
<div class="paragraph">
<p>MyAgent is the new agent that we must set up:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To install your new agent, copy the prepared file <strong>myagent.bat</strong> to the DirX Identity <strong>bin</strong> directory:</p>
<div class="ulist">
<ul>
<li>
<p>Copy the prepared executable from the directory <em>install_path</em>*\data\extension\MYAGENT.BAT* to the directory <em>install_path</em>*\bin\*</p>
</li>
<li>
<p>Create the directory <em>work_path</em>*\MyScenario\Source Scheduled\MyAgent\MyWorkflow\MyAgentActivity*.</p>
</li>
<li>
<p>Move the prepared INI file <strong>CONTROL.INI</strong> here (from the <em>install_path</em>*\data\extension\* directory).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If you are not sure how the <em>work_path</em> or your <em>install_path</em> is set up, open the object with the name of your computer in the configuration database in the <strong>Configuration</strong> &#8594; <strong>DirX Identity Servers</strong> &#8594; <strong>C Servers</strong> folder.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a new agent object in the connectivity configuration. In <strong>Connectivity</strong> &#8594; <strong>Expert View</strong>, right-click the <strong>Agents</strong> folder and select <strong>New</strong> &#8594; <strong>MyAgentType</strong>.</p>
</li>
<li>
<p>Set <strong>Name</strong> to <strong>MyAgent</strong> and set <strong>Description</strong> to <strong>MyAgent to handle MyDatabase</strong>.</p>
</li>
<li>
<p>Enter the name <strong>myagent.bat</strong> in <strong>Executable</strong>. Using a relative pathname makes it easier to make changes later on if the server must be changed.</p>
</li>
<li>
<p>The <strong>Agent Type</strong> field is already set to <strong>MyAgentType.</strong> Set <strong>Directory Types</strong> to <strong>MyDirType</strong> (click the upper button to the right of the field and select <strong>MyDirType</strong> from the pull-down list).</p>
</li>
<li>
<p>Click <strong>OK</strong> to create the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have now created the new agent with the agent type <strong>MyAgentType</strong> that can handle the connected directory type <strong>MyDirType</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Configuration</strong> &#8594; <strong>DirX Identity Servers</strong> &#8594; <strong>C Servers</strong>, open the object with the name of your computer and link the new agent object to it: click the <strong>Agents</strong> tab, click <strong>Edit</strong>, in the Agents box, click <span class="image"><img src="_images/502005954/502169793.gif" alt="attachments/502005954/502169793"></span>, then select <strong>MyAgent</strong> from the object browser.</p>
</li>
<li>
<p>In the Versions box, click <span class="image"><img src="_images/502005954/501383299.gif" alt="attachments/502005954/501383299"></span> and enter <strong>MyAgent 1.0</strong> into the text field that appears at the bottom of the list.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This step indicates that this agent can be run on this DirX Identity server and which version is installed. The DirX Identity installation procedure performs this step automatically for all DirX Identity agents. You must perform this step by hand for any other agents.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-SettinguptheConnectedDirectoryMyDataBase"><a class="anchor" href="#Tutorials-SettinguptheConnectedDirectoryMyDataBase"></a>Setting up the Connected Directory MyDataBase</h6>
<div class="paragraph">
<p>In this example, we assume that the connected directory MyDatabase resides on the primary server. This means that both the agent and the directory are on this machine. For security and performance reasons, we recommend that you keep the connected directory and the agent together on the same machine. Because there is no network traffic when the agent writes to MyDatabase, it will run at maximum speed.</p>
</div>
<div class="paragraph">
<p>First, you must create the file directory <strong>C:\MyDatabase</strong> with the Windows Explorer (a setup task). Then you must create a relevant description for it in the Connectivity configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, right-click the <strong>Connected Directories</strong> &#8594; <strong>MyScenario</strong> folder (create the folder if it doesn&#8217;t already exist) and select<br>
<strong>New</strong> &#8594; <strong>MyDirType</strong>.</p>
</li>
<li>
<p>Set <strong>Name</strong> to <strong>MyDatabase</strong>.</p>
</li>
<li>
<p>Link the database to the relevant service object (your machine name: select it from the tree browser in the <strong>Configuration</strong> &#8594; <strong>Services</strong> &#8594; <strong>System</strong> directory).</p>
</li>
<li>
<p>Do not set the <strong>Wizard</strong> and <strong>Viewer Command</strong> fields at this point (we&#8217;ll do this later on).</p>
</li>
<li>
<p>Click <strong>OK</strong> to create the connected directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the list of connected directories, a new entry <strong>MyDatabase</strong> is displayed.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-SettingupaChanneltoMyDatabase"><a class="anchor" href="#Tutorials-SettingupaChanneltoMyDatabase"></a>Setting up a Channel to MyDatabase</h6>
<div class="paragraph">
<p>Now we must set up the channels to the connected directory. First, we need to set up a related channel MyChannel to the MyDatabase connected directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right click <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> and select <strong>Reload</strong> <strong>object</strong> <strong>descriptors</strong>.</p>
</li>
<li>
<p>Open the <strong>Connected</strong> <strong>Directories</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>MyDatabase</strong> object and click <strong>Channels</strong>.</p>
</li>
<li>
<p>Select <strong>New</strong> &#8594; <strong>MyDatabase</strong> (<strong>Channel</strong>) and enter <strong>MyChannel</strong> in <strong>Name</strong>.</p>
</li>
<li>
<p>Click <strong>OK</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have now created a new connected directory MyDatabase and a related channel MyChannel to access this directory.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-SettinguptheJobMyJob"><a class="anchor" href="#Tutorials-SettinguptheJobMyJob"></a>Setting up the Job MyJob</h6>
<div class="paragraph">
<p>Now we need to create a new job object because there is no template for this agent in the DirX Identity Connectivity configuration at this point.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, right-click the <strong>Jobs</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>MyAgent</strong> folder.</p>
</li>
<li>
<p>Select <strong>New</strong> and then <strong>MyAgent</strong>.</p>
</li>
<li>
<p>Set <strong>Name</strong> to <strong>MyJob</strong> and <strong>Description</strong> to <strong>Job to import the LDIF file to MyDatabase</strong>.</p>
</li>
<li>
<p>As you can see, the related agent is <strong>MyAgent</strong>.</p>
</li>
<li>
<p>Enter a fixed command line:<br>
<strong>-i -t control.ini C:\MetahubData\import.ldif</strong><br>
This command line directs the agent to perform an import operation with trace switched on based on the INI file <strong>control.ini</strong> and on the data file <strong>import.ldif</strong>.</p>
</li>
<li>
<p>Use the default timeout (2 hours).</p>
</li>
<li>
<p>Do not touch any settings in the other tabs of this object and click <strong>OK</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have now created a simple job object that can be executed and takes its input from a fixed location in the file system.</p>
</div>
<div class="paragraph">
<p>Because the agent uses the file <strong>import.ldif</strong>, we need to set up the intermediate connected directory correctly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>MyMetaCP</strong> job and then the <strong>Data</strong> object.</p>
</li>
<li>
<p>Click <strong>Datafile</strong> in the Files tab, then <strong>Edit</strong> and change the file name from <strong>data.txt</strong> to <strong>C:\MetahubData\import.ldif</strong>. This must be the same path and file name that we set up in the job&#8217;s command line.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store this information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we have done all necessary work. We can do the remaining configuration tasks in the structure view.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-CompletingtheConfiguration"><a class="anchor" href="#Tutorials-CompletingtheConfiguration"></a>Completing the Configuration</h6>
<div class="paragraph">
<p>Now we can use the workflow structure view to complete our configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Global</strong> <strong>View</strong>, select the workflow line in the scenario <strong>MyScenario</strong> and open the structure view for <strong>MyWorkflow</strong>.</p>
</li>
<li>
<p>You can see that the second activity <strong>MyAgentActivity</strong> does not refer to the correct job, channel and connected directory.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and select the job. Click <span class="image"><img src="_images/502005954/501645455.gif" alt="attachments/502005954/501645455"></span> to open the object browser and select <strong>MyJob</strong> from the folder <strong>MyScenario</strong> &#8594; <strong>Source Schedule</strong>&#8594; <strong>MyAgent</strong> in the folder <strong>Jobs</strong>. Click <strong>OK</strong>. The link is shown in the structure view but the channel and connected directory objects are no longer displayed.</p>
</li>
<li>
<p>Open <strong>MyJob</strong>, select the <strong>Input/Output Channels</strong> tab and create a new line in the <strong>Input Channel</strong> field.</p>
</li>
<li>
<p>Click <span class="image"><img src="_images/502005954/501612703.gif" alt="attachments/502005954/501612703"></span> to open the object browser and select the <strong>InData</strong> channel from the <strong>Jobs</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>My</strong> <strong>Agent</strong> &#8594; <strong>MyMetaCP</strong> &#8594; <strong>Data</strong> &#8594; <strong>Channels</strong> folder. Click <strong>OK</strong>.</p>
</li>
<li>
<p>Create a new line in the <strong>Output Channel</strong> field.</p>
</li>
<li>
<p>Click <span class="image"><img src="_images/502005954/502366345.gif" alt="attachments/502005954/502366345"></span> to open the object browser and select the <strong>MyChannel</strong> channel from the <strong>Connected Directories</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>MyDatabase</strong> &#8594; <strong>Channels</strong> folder. Click <strong>OK</strong>.</p>
</li>
<li>
<p>Click <strong>OK</strong> to store the job object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can see the complete structure of your workflow. Click <strong>Save</strong> to store it.</p>
</div>
<div class="paragraph">
<p>Our scenario does not yet contain our <strong>MyDatabase</strong> connected directory and our workflow line still connects <strong>MyIdentityStore</strong> and <strong>HR-ODBC</strong>. Let&#8217;s change it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, select the workflow <strong>MyWorkflow</strong> again. Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Click <span class="image"><img src="_images/502005954/501547221.gif" alt="attachments/502005954/501547221"></span> to the right of the <strong>Endpoints</strong> field. This action forces DirX Identity to calculate the endpoints to determine which workflows fit between two connected directories. The value should now be set to <strong>LDAP-MyDirType</strong>.</p>
</li>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Global</strong> <strong>View</strong>, select <strong>MyScenario</strong> again.</p>
</li>
<li>
<p>Create a new connected directory icon (perform <strong>New Connected Directory</strong>).</p>
</li>
<li>
<p>Assign <strong>MyDatabase</strong> to it.</p>
</li>
<li>
<p>Create a workflow line between <strong>MyIdentityStore</strong> and <strong>MyDatabase</strong>.</p>
</li>
<li>
<p>Assign <strong>MyWorkflow</strong> to this line. The arrow is shown now correctly.</p>
</li>
<li>
<p>Finally, remove the <strong>HR-ODBC</strong> connected directory from your scenario. It is no longer needed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To avoid having unused objects in our connectivity configuration, we should now delete the <strong>Ident2ODBC_ODBCImport</strong> job in the Expert View (because it is no longer used):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, open the <strong>Jobs</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>MyAgent</strong> folder and click the <strong>Ident2ODBC_ODBCImport</strong> job. Select and delete it (set the check for references check box). DirX Identity will delete the object because there are no longer references that point to it.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-TesttheNewlyCreatedWorkflow"><a class="anchor" href="#Tutorials-TesttheNewlyCreatedWorkflow"></a>Test the Newly Created Workflow</h6>
<div class="paragraph">
<p>You can use the Global View or the Expert View to test the newly created workflow. If you followed the "Getting Started" exercises, you&#8217;ve already learned how to work in the Global View. Let&#8217;s now try the Expert View.</p>
</div>
<div class="paragraph">
<p>We assume that the connected directory and the Identity Store are up and running. We also should check that the connected directory <strong>MyDatabase</strong> is empty before we run the workflow for the first time: examine the directory <strong>C:\MyDatabase</strong> and delete any files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert View</strong>, open the <strong>Workflows</strong> folder.</p>
</li>
<li>
<p>Right-click <strong>MyWorkflow</strong> in the <strong>MyScenario</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>MyAgent</strong> folder and select <strong>Run Workflow</strong>.</p>
</li>
<li>
<p>The workflow is running. You can watch the workflow&#8217;s progress by viewing the activities in the Structure tab. Wait until both activities change their color to green. In this case, the second activity shows light red, which indicates a warning from the <strong>stdout</strong> message of the agent.</p>
</li>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Monitor</strong> <strong>View</strong>, open <strong>MyScenario</strong> &#8594; <strong>Source Scheduled</strong>&#8594; <strong>MyAgent</strong> &#8594; <strong>MyWorkflow</strong>.</p>
</li>
<li>
<p>Click the entry below and check the attributes. You can see the start and end time and the <strong>Result</strong>. This value should be <strong>closed.completed.ok</strong>.</p>
</li>
<li>
<p>If you see another value, something is wrong in your configuration. DirX Identity can help you find the error. Look at the <strong>Remark</strong> field. Normally you&#8217;ll find a <strong>Workflow execution terminated (at least one activity failed)</strong> error.</p>
</li>
<li>
<p>Double-click the workflow entry to open it. You should see entries for the first and the second activities. You can click on each entry and check the result. The <strong>Result</strong> field should show <strong>closed.completed.ok</strong></p>
</li>
<li>
<p>If this is not the case, look at the <strong>Remark</strong> field. You will see one or more error messages. You cannot read long messages directly in these fields. Click the bottom icon to the right of the table and a configurable text editor will open.</p>
</li>
<li>
<p>The messages give you hints about where your agents failed. Try to fix the problem and run the workflow again.</p>
</li>
<li>
<p>After some debugging, you should have a running workflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In our case, there is a message in the <strong>MyAgentActivity</strong> status entry. It gives a hint that the agent reported something at stdout. Check the process info file for details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change to the <strong>Trace</strong> tab and click the icon after <strong>Process Data</strong>. The process info file opens.</p>
</li>
<li>
<p>You can see that our batch file reported that a file was copied successfully.</p>
</li>
<li>
<p>Look at the work path in the file system (installation area). Open the directory <strong>work</strong>, then <strong>MyScenario</strong> &#8594; <strong>Source Scheduled</strong>&#8594; <strong>MyAgent</strong> &#8594; <strong>MyWorkflow</strong>. Click the <strong>MyAgentActivity</strong>. You should see two files: the INI file that we copied here by hand and the <strong>trace.trc</strong> file. Open this file and you&#8217;ll see that our <strong>-t</strong> parameter in the command line worked.</p>
</li>
<li>
<p>Now look at the status area (installation area). Navigate to the status path and open the <strong>status</strong> directory and then locate the entry that begins with <strong>MyWorkflow</strong>. Click <strong>MyAgentActivity</strong>.</p>
</li>
<li>
<p>You&#8217;ll find there the <strong>ProcessInfo.txt</strong> file that we examined from the status entry in the Monitor View as well as the <strong>import.ldif</strong> file that DirX Identity automatically copied here (the flag Copy to Status Area is set for this file).</p>
</li>
<li>
<p>If you click the <strong>MyMetaCP&#8230;&#8203;</strong> folder you&#8217;ll see many more files that the system copied after the <strong>Metacp</strong> job executed. Because this job is integrated at level 3, all files are saved: all Tcl files, the attribute configuration files and the data file <strong>import.ldif</strong>.</p>
</li>
<li>
<p>Now examine our <strong>MyDatabase</strong> connected directory. It is located in the path <strong>C:\MyDatabase</strong>. Open it and you will find the <strong>data.ldif</strong> file that our agent copied there (this is the operation that generated the message <strong>1 file copied</strong>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can see that a lot of events occur even when we have only integrated our agent at level 1. Let&#8217;s now go on to integration level 2.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-IntegratingtoCentralEdit_Level2"><a class="anchor" href="#Tutorials-IntegratingtoCentralEdit_Level2"></a>Integrating to Central Edit (Level 2)</h5>
<div class="paragraph">
<p>This part of the tutorial demonstrates how to integrate the sample connectivity scenario to the "central edit" level. The following figure highlights the objects that are necessary for the sample connectivity scenario to take it from the "simple execution" level to the "central edit" level.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/502235327.gif" alt="attachments/502005954/502235327" width="571"></span></p>
</div>
<div class="paragraph">
<p>To integrate our sample connectivity scenario to "central edit", we&#8217;ll perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register and import the INI file (1)</p>
</li>
<li>
<p>Register the trace file (2)</p>
</li>
<li>
<p>Modify the MyJob object (3)</p>
</li>
<li>
<p>Test the modified workflow</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="Tutorials-RegisteringandImportingtheINIFileforMyJob"><a class="anchor" href="#Tutorials-RegisteringandImportingtheINIFileforMyJob"></a>Registering and Importing the INI File for MyJob</h6>
<div class="paragraph">
<p>To register and import the INI file for <strong>MyJob</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, open the <strong>Jobs</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>Source</strong> <strong>Scheduled</strong> &#8594; <strong>MyAgent</strong> folder and right-click <strong>MyJob</strong>.</p>
</li>
<li>
<p>Select <strong>New</strong> &#8594; <strong>INI file</strong>.</p>
</li>
<li>
<p>A property dialog opens. Do not change the name. Enter <strong>Import INI file</strong> into <strong>Description</strong>.</p>
</li>
<li>
<p>Click the File tab and enter <strong>control.ini</strong> into <strong>Filename</strong>. Do not change any other properties.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab and then click <strong>Import text</strong>. A file selection box opens. Navigate to the location where your INI file is stored (in the work area: <em>work_path</em>*\MyScenario\Source Scheduled\MyAgent\MyWorkflow\MyAgentActivity*) and select it. Click <strong>Open</strong>. The content of the INI file is now imported into the Connectivity configuration and shown in the Content tab.</p>
</li>
<li>
<p>Click <strong>OK</strong> to save the new INI file object. .</p>
</li>
<li>
<p>Now the INI file is located under the <strong>MyJob</strong> object, but it&#8217;s not yet linked to it correctly. To link it to the job object:</p>
</li>
<li>
<p>Click the <strong>MyJob</strong> object again. Select the <strong>Input/Output Channels</strong> tab and click <strong>Edit</strong>.</p>
</li>
<li>
<p>Click <span class="image"><img src="_images/502005954/502300880.gif" alt="attachments/502005954/502300880"></span> to the right of the <strong>Inifile</strong> field.</p>
</li>
<li>
<p>A dialog opens that allows you to navigate through the DirX Identity Connectivity configuration data to the required object to be linked (the current location should be the job object). Open it, click the INI file object that you previously created, and then click <strong>OK</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now the customer-specific agent&#8217;s INI file with its content is completely contained in the Connectivity configuration. You can view or edit it here with DirX Identity Manager. Any time you run the workflow, this INI file is generated to the file system before your agent executes.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-RegisteringtheTraceFileforMyJob"><a class="anchor" href="#Tutorials-RegisteringtheTraceFileforMyJob"></a>Registering the Trace File for MyJob</h6>
<div class="paragraph">
<p>To register the trace file for <strong>MyJob</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>Jobs</strong> &#8594; <strong>MyScenario</strong> &#8594; <strong>Source Scheduled</strong>&#8594; <strong>MyAgent</strong> folder from the Expert View and right-click <strong>MyJob</strong>.</p>
</li>
<li>
<p>Select <strong>New</strong> &#8594; <strong>File</strong>. A property dialog opens. Change the name to <strong>Trace File</strong>, enter <strong>Trace file for MyAgent</strong> into <strong>Description</strong>.</p>
</li>
<li>
<p>It is important to inform DirX Identity about the file name of the trace file. Enter <strong>trace.trc</strong> into <strong>Filename</strong>. DirX Identity will search for a file of this name and save it into the status area (but only if <strong>Copy to Status Area</strong> is checked).</p>
</li>
<li>
<p>Do not change anything else and click <strong>OK</strong> to save the new object. It is located under the <strong>MyJob</strong> object but not yet linked to it correctly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last step in this sequence is to link the trace file object to the job object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the job object again. Select the <strong>Tracing</strong> tab and click <strong>Edit</strong>.</p>
</li>
<li>
<p>Click the last icon after the <strong>Tracefile</strong> field.</p>
</li>
<li>
<p>A dialog opens that allows you to navigate through the DirX Identity Connectivity configuration data to the object to be linked (the current location should be the job object). Open it, click the <strong>Trace File</strong> object you previously created, and then click <strong>OK</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now the trace file is described in the Connectivity configuration. Each time you run the workflow, this trace file should exist after your agent executes.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-ModifyingtheJobMyJob"><a class="anchor" href="#Tutorials-ModifyingtheJobMyJob"></a>Modifying the Job MyJob</h6>
<div class="paragraph">
<p>Now we&#8217;ll change the command line to use the correct file names:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>MyJob</strong> and then click <strong>Edit</strong>.</p>
</li>
<li>
<p>Change the command line to:<br>
<strong>-i -t "&lt;?Job@IniFile-DN@FileName/&gt;" "&lt;?Job@InputChannel-DN@SelectedFile-DN@FileName/&gt;"</strong><br>
do not forget the quotes around the filenames!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Our command line has introduced some references. The first reference retrieves the filename by looking at the job object, following the reference to the INI file (@IniFile-DN) and taking the content of the <strong>FileName</strong> field as the filename. Now you can change the filename of this object at any time, and the reference will adjust the command line correctly.</p>
</div>
<div class="paragraph">
<p>The second reference works similarly: it starts with the job object again, follows the reference to the InputChannel (@InputChannel-DN), then to the selected file in the connected directory (@SelectedFile-DN) and takes the content of the <strong>FileName</strong> field as the filename. (For more information about references, see section "Customizing Object References" in the <em>DirX Identity Customization Guide</em>.)</p>
</div>
<div class="paragraph">
<p>Both parameters make our job definition more flexible because we can now edit its elements at the user interface and configuration parameters are adapted automatically.</p>
</div>
<div class="paragraph">
<p>We also no longer want a fixed location for our intermediate data file. A more flexible concept is to transfer the data file in the work directories using the Channel Mapping, which works automatically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set up a reference in your command line (&lt;?Job@InputChannel-DN@SelectedFile-DN@FileName/&gt;) which creates the correct file name for your agent. We just carried out that step.</p>
</li>
<li>
<p>Change the fixed location in your data file object under your job object.</p>
</li>
<li>
<p>To change the fixed file location of the intermediate connected directory:</p>
</li>
<li>
<p>Click the <strong>Datafile</strong> entry sub-object under <strong>MyMetaCP</strong> &#8594; <strong>Data</strong>.</p>
</li>
<li>
<p>Remove the path (<strong>C:\MetahubData</strong>) from the <strong>Filename</strong> field. Leave only the filename <strong>import.ldif</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-EditingtheINIFileandTestingtheModifiedWorkflow"><a class="anchor" href="#Tutorials-EditingtheINIFileandTestingtheModifiedWorkflow"></a>Editing the INI File and Testing the Modified Workflow</h6>
<div class="paragraph">
<p>Before we run the modified workflow, we&#8217;ll edit the INI file to contain your name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Double click <strong>MyJob</strong>. The sub-objects are shown.</p>
</li>
<li>
<p>Click <strong>INI File</strong> and click the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and change <strong>Joe Smith</strong> to your name.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Run the modified workflow again and look at the result in the Monitor View. Nothing has changed in the workflow status entry and in the <strong>MyMetacp</strong> status entry.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>MyAgentActivity</strong> status entry and select the <strong>Files</strong> tab.</p>
</li>
<li>
<p>You can see that there are new entries for the trace file (open it) and the INI file (open it to see that your name is present). This shows that you no longer need to know where your files reside.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-IntegratingtoDetailedCustomization_Level3"><a class="anchor" href="#Tutorials-IntegratingtoDetailedCustomization_Level3"></a>Integrating to Detailed Customization (Level 3)</h5>
<div class="paragraph">
<p>Recall that when we set up the central configuration object, we defined a new agent type and a new connected directory type. Now we can use these definitions and define extensions for them at the DirX Identity Manager user interface level. We will only perform this task for the agent type object by defining an XML description for jobs that are based on agents of this type. This way, we can extend the generic job object by defining additional properties in existing tabs or completely new properties for this type of job object. We can also remove properties or complete tabs from this object. See section "Customizing Connectivity Objects" in the <em>DirX Identity Customization Guide</em> for details about the possibilities.</p>
</div>
<div class="paragraph">
<p>Next, we will use these new properties at the user interface level to provide for easy editing. But at the moment there is no mechanism that manages the proper setting of the corresponding attributes in the INI file. To solve this problem, you can use references to connect the definition in the INI file with the property at the user interface level. At runtime, the C++-based DirX Identity Server takes care of the correct substitution of the corresponding values before it starts the agent. The agent is unaware that the INI file is generated each time directly before each execution. Performing this task guarantees consistency between properties at the user interface level and information in configuration files. See section "Customizing Object References" in the <em>DirX Identity Customization Guide</em> for further details. The following figure highlights the objects that are necessary for the sample connectivity scenario to take it from the "central edit" level to the "detailed customization" level.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/502431893.gif" alt="attachments/502005954/502431893" width="552"></span></p>
</div>
<div class="paragraph">
<p>To integrate our sample connectivity scenario to "detailed customization", we&#8217;ll perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create an XML description for property extensions at the job object (1).</p>
</li>
<li>
<p>Define references in the agent&#8217;s INI file to improve consistency (2).</p>
</li>
<li>
<p>Test whether changes to the newly added properties with DirX Identity Manager affect the synchronization.</p>
</li>
<li>
<p>Create a wizard for the workflow (3).</p>
</li>
<li>
<p>Test the wizard.</p>
</li>
<li>
<p>Re-run the workflow wizard.</p>
</li>
<li>
<p>Export the scenario.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="Tutorials-CreatingtheXMLJobDescription"><a class="anchor" href="#Tutorials-CreatingtheXMLJobDescription"></a>Creating the XML Job Description</h6>
<div class="paragraph">
<p>In this step, we define the extensions to the job object that are necessary to resolve the references that will be defined in the next step.</p>
</div>
<div class="paragraph">
<p>First we create the XML description object for MyAgent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong>.</p>
</li>
<li>
<p>Open <strong>Configuration</strong> &#8594; <strong>Agent Types</strong> &#8594; <strong>MyAgentType</strong>.</p>
</li>
<li>
<p>Right-click <strong>Object Descriptions</strong> and select <strong>New</strong> &#8594; <strong>XML File</strong>.</p>
</li>
<li>
<p>Enter <strong>myagent-job.xml</strong> into the name field and adjust the description field accordingly.</p>
</li>
<li>
<p>Click the <strong>Content</strong> tab and then <strong>Import Text &#8230;&#8203;</strong></p>
</li>
<li>
<p>In the file dialog, select the file <strong>template-job.xml</strong> in the folder <em>install_path</em>*\data\extension\* and click <strong>Open</strong>.</p>
</li>
<li>
<p><strong>Save</strong> the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you&#8217;ve created an XML description for the MyAgent type. Change it as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace the comment <strong>Template Job</strong> with <strong>MyAgent Job</strong>.</p>
</li>
<li>
<p>Note that you&#8217;ll find an entry <strong>superior="Generic-Job"</strong>in the section <strong>&lt;object &#8230;&#8203;</strong> . This means that your job object&#8217;s XML description is based on the Generic-Job description (your description inherits all properties from this description). You could also use another base description.</p>
</li>
<li>
<p>Go to the <strong>&lt;propertysheet&gt;</strong> section. This is the section that controls the tabs in your job object (these tabs are named <strong>propertypages</strong> here). These pages have a name (<strong>general, deltahandling, channels</strong> and <strong>tracing</strong>) and a related title which is the is the title of tab that appears when you are using DirX Identity Manager (Job Properties, Delta Handling, Input/Output Channels, Tracing).</p>
</li>
<li>
<p>You can add propertypages here, delete them, or modify them to create your individual job object. But be careful not to destroy anything that is needed by DirX Identity.</p>
</li>
<li>
<p>Do not change the <strong>class</strong> property! This is the default editor (java class) which allows DirX Identity to handle lists of properties.</p>
</li>
<li>
<p>The <strong>layout</strong> parameter defines the properties that are contained in your property-page. You can change it to your requirements.</p>
</li>
<li>
<p>The <strong>&lt;properties&gt;</strong> section defines the description of the individual property extensions. For the template (the file from which you copied your XML file) only one example dxmSpecificAttributes property is defined (Example).</p>
</li>
<li>
<p>Its type is defined as BooleanInteger. Other types as String, Integer and Boolean are possible, too. You can also define default values and much more. The "Customizating Objects" section in the <em>DirX Identity Customization Guide</em> describes the possibilities.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we understand the basic concept and we are able to change the job description to our requirements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We decide to keep the four tabs as they are and add a fifth tab. Copy the fourth tab (tracing) and insert it after the tracing tab.</p>
</li>
<li>
<p>Change the tab name to <strong>MyAgentProperties</strong> and the title to <strong>"My Agent Properties"</strong>.</p>
</li>
<li>
<p>Now define the properties. Copy the property section with the Example value three times and then change it to (do not forget the &lt;property and /&gt; tags!):</p>
<div class="literalblock">
<div class="content">
<pre>name="dxmSpecificAttributes(CreateEntries)"
type="java.lang.Boolean"
label="Create Entries"
defaultvalue="true"

name="dxmSpecificAttributes(DeleteEntries)"
type="java.lang.Boolean"
label="Delete Entries"
defaultvalue="true"

name="dxmSpecificAttributes(ModifyEntries)"
type="java.lang.Boolean"
label="Modify Entries"
defaultvalue="true"

name="dxmSpecificAttributes(Trace)"
type="java.lang.String"
label="Trace"
defaultvalue="-t"</pre>
</div>
</div>
</li>
<li>
<p>Next we define the tabs that should display these properties. Change the layout definitions of the tabs as follows:</p>
<div class="literalblock">
<div class="content">
<pre>name="tracing"
...
layout="...,_SP(Trace)"

name="MyAgentProperties"
...
layout="properties:_SP(CreateEntries),_SP(ModifyEntries),_SP(DeleteEntries)"</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that we define only the Trace property in the tracing tab. All other properties are defined for the MyAgentProperties tab. The <strong>_SP</strong> is a shortcut to <strong>dxmSpecificAttributes</strong> that makes our definitions easier to read.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do not forget to delete the dxmSpecificAttributes(Example) entry in the layout definition of the general tab.</p>
</li>
<li>
<p>To activate the new definition, you can either exit the DirX Identity Manager or use the function <strong>Reload Object Descriptors</strong> from the context menu.</p>
</li>
<li>
<p>The <strong>MyJob</strong> object should now contain the five tabs together with the four new attributes.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-DefiningtheReferencesintheINIFile"><a class="anchor" href="#Tutorials-DefiningtheReferencesintheINIFile"></a>Defining the References in the INI File</h6>
<div class="paragraph">
<p>In this step, we define references in the INI file that take the information from the MyJob object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>MyJob</strong> object in the <strong>Jobs</strong> &#8594; <strong>MyJobs</strong> folder again and open it.</p>
</li>
<li>
<p>Select the <strong>INI File</strong> object and then click <strong>Content</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and change the following lines to:</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>; Created by &lt;your name&gt; at &lt;?date/&gt;:&lt;?time/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="literalblock">
<div class="content">
<pre>CreateEntries=&lt;?Job@SpecificAttributes(CreateEntry)/&gt;
DeleteEntries=&lt;?Job@SpecificAttributes(DeleteEntries)/&gt;
ModifyEntries=&lt;?Job@SpecificAttributes(ModifyEntries)/&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The created references have the following meanings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Date and time are set to the actual date and time.</p>
</li>
<li>
<p>Three special attributes at the job object affect the settings in the INI file. At runtime, DirX Identity goes to the MyJob object and examines the requested multi-value attribute <strong>SpecificAttributes</strong> (in this case, it searches for or a name like CreateEntries in the first part). It then takes the value and replaces the reference in the INI file with it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, suppose that SpecificAttributes contains the values:</p>
</div>
<div class="paragraph">
<p>CreateEntry true<br>
DeleteEntries false<br>
ModifyEntries true</p>
</div>
<div class="paragraph">
<p>Then the reference</p>
</div>
<div class="paragraph">
<p>DeleteEntries=&lt;?Job@SpecificAttributes(DeleteEntries)/&gt;</p>
</div>
<div class="paragraph">
<p>is replaced by</p>
</div>
<div class="paragraph">
<p>DeleteEntries=true</p>
</div>
<div class="paragraph">
<p>Note that there is an error in the second line: the <strong>CreateEntry</strong> value should be <strong>CreateEntries</strong>. We&#8217;ll show how DirX Identity reports this error later on.</p>
</div>
<div class="paragraph">
<p>Note also that you can reference fixed attributes in objects (examples were shown in the command line references).</p>
</div>
<div class="paragraph">
<p>The last step is to define the trace parameter in the command line to be a reference:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>MyJob</strong> and then click <strong>Edit</strong>.</p>
</li>
<li>
<p>Change the <strong>-t</strong> parameter in the command line to<br>
<strong>&lt;?Job@SpecificAttributes(Trace)/&gt;</strong>. Make sure that there are blanks before and after this value.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-ChangingaPropertyandTestingtheModifiedWorkflow"><a class="anchor" href="#Tutorials-ChangingaPropertyandTestingtheModifiedWorkflow"></a>Changing a Property and Testing the Modified Workflow</h6>
<div class="paragraph">
<p>Before we run the workflow again, we&#8217;ll change one of our new properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>MyJob</strong>, click the tab <strong>My Agent Properties</strong>, and then click <strong>Edit</strong>.</p>
</li>
<li>
<p>Note that the three checkboxes are surrounded by a red border. This means that the value is not defined (no attribute in the database exists that has either the value true or false). To set one of these values, click it; to reset it, you must click twice.</p>
</li>
<li>
<p>Check all three check boxes and <strong>Save</strong> the object. This is necessary to create SpecificAttribute entries for all three attributes. This action is only necessary for objects that already exist. New objects contain the default values and will work immediately.</p>
</li>
<li>
<p>Click <strong>Edit</strong> again.</p>
</li>
<li>
<p>Uncheck <strong>Delete Entries</strong>.</p>
</li>
<li>
<p>Change to the <strong>Tracing</strong> tab and enter <strong>-t</strong> into the <strong>Trace</strong> field.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
<li>
<p>Now run the workflow again and watch it in the <strong>Structure</strong> tab.</p>
</li>
<li>
<p>The last activity turns red because an error has occurred (we know which one it is).</p>
</li>
<li>
<p>View the result in the Monitor View (click the bottom icon to the right of <strong>Remark</strong> to display the messages in an editor window).</p>
</li>
<li>
<p>The error message tells us that <strong>CreateEntry</strong> is not a valid Property. Instead we must write <strong>CreateEntries</strong>.</p>
</li>
<li>
<p>Correct the reference in the INI file and run the workflow again.</p>
</li>
<li>
<p>View the result in the Monitor View.</p>
</li>
<li>
<p>Look at the INI file in the <strong>Files</strong> tab of <strong>MyAgentActivity</strong> and open it. It should reflect the referenced properties from the job object.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-CreatingaWorkflowWizard"><a class="anchor" href="#Tutorials-CreatingaWorkflowWizard"></a>Creating a Workflow Wizard</h6>
<div class="paragraph">
<p>The next task is to define a wizard for the workflow <strong>MyWorkflow</strong>. The best way is to use an existing wizard and change it. In this case, we use the wizard from the <strong>Ident2ODBC</strong> workflow because we copied the workflow from this object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Connectivity</strong> &#8594; <strong>Expert View</strong></p>
</li>
<li>
<p>Open <strong>Configuration</strong> &#8594; <strong>Agent Types</strong> &#8594; <strong>ODBC</strong> &#8594; <strong>wizards</strong></p>
</li>
<li>
<p>Right-click <strong>wf-LDAP-ODBC.xml</strong> and select <strong>Copy Object</strong>.</p>
</li>
<li>
<p>Set <strong>Name</strong> to <strong>wf-LDAP-MyDirType.xml</strong> and adjust <strong>Description</strong>. Click <strong>OK</strong>.</p>
</li>
<li>
<p>Move the object to the wizards folder of your MyAgentType object.</p>
</li>
<li>
<p>Select it again and click <strong>Edit</strong>.</p>
</li>
<li>
<p>Change to the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Remove the line:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;illustrator name="Import" title="Import Properties" /&gt;</pre>
</div>
</div>
</li>
<li>
<p>Remove the entire section that begins with:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;step name="Import" ...</pre>
</div>
</div>
</li>
<li>
<p>Add a new step after the Export Tracing step:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;step   name="MyAgentProperties"
        title="Set MyAgent Properties"
        illustrator="MyAgentProps"
        node="dxmActivity-DN[dxmIsEndActivity=true]@dxmRunObject-DN"&gt;
    &lt;description&gt;
        Set the specific parameters for MyAgent. When done, click on the 'Next &gt;&gt;' button to continue.
    &lt;/description&gt;
    &lt;propertypage class="siemens.dxm.gui.components.PropertyPageGeneric" reference="MyAgentProperties" /&gt;
    &lt;prestep  class="siemens.dxm.wizard.PreStepImpl" /&gt;
    &lt;poststep class="siemens.dxm.wizard.PostStepImpl" /&gt;
&lt;/step&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add this line to the illustrator section after the Export Tracing line:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;illustrator name="MyAgentProps" title="MyAgent Properties" /&gt;</pre>
</div>
</div>
</li>
<li>
<p><strong>Save</strong> the object.</p>
</li>
<li>
<p>We have created the wizard but it is not yet referenced from our workflow. These steps set the reference:</p>
</li>
<li>
<p>Select <strong>MyWorkflow</strong> and click <strong>Edit</strong>.</p>
</li>
<li>
<p>Click <span class="image"><img src="_images/502005954/501088458.gif" alt="attachments/502005954/501088458"></span> to select the <strong>wf-LDAP-MyDirType.xml</strong> wizard.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can test the wizard.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-TestingtheWorkflowWizard"><a class="anchor" href="#Tutorials-TestingtheWorkflowWizard"></a>Testing the Workflow Wizard</h6>
<div class="paragraph">
<p>To test the wizard:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the workflow line in <strong>MyScenario</strong>.</p>
</li>
<li>
<p>Select <strong>MyWorkflow</strong> &#8594; <strong>Configure</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check all the steps in the wizard.</p>
</div>
<div class="paragraph">
<p>You can add, modify or delete other steps if you extend your agent or workflow.</p>
</div>
<div class="paragraph">
<p>With this step, the integration of your agent and connected directory at the highest level (level 3) is complete.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-RunningtheWorkflowAgain"><a class="anchor" href="#Tutorials-RunningtheWorkflowAgain"></a>Running the Workflow Again</h6>
<div class="paragraph">
<p>Now we should run the workflow again to make sure that everything is correct:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run the workflow.</p>
</li>
<li>
<p>Watch the result in the <strong>Structure</strong> tab of the run window. The second activity turns to red.</p>
</li>
<li>
<p>Click this activity. The status entry opens and you can see a <strong>Status</strong> of <strong>closed.completed.error</strong>.</p>
</li>
<li>
<p>You can see that the <strong>Remark</strong> field contains a lot of information. Click the last button to the right of this field. A text editor opens.</p>
</li>
<li>
<p>DirX Identity tells you that the retrieval of the job configuration data (the INI file, see second line) did not work correctly. The third line contains the most relevant information:<br></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>while evaluating expression Job@SpecificAttributes(CreateEntry) in line 5 at position 16.<br></p>
</li>
<li>
<p>evaluation of @dxmSpecificAttributes(CreateEntry) failed: No matching value found.</p>
</li>
</ol>
</div>
</li>
<li>
<p>DirX Identity tells you that there is an error in line 5 at position 16 of the INI file. The Specific Attribute CreateEntry does not exist. Of course this attribute&#8217;s name is CreateEntries.</p>
</li>
<li>
<p>Change the INI File content and check with another run that everything is now correct.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your scenario is now complete and tested up to some level. Next you should prepare it for export.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-ExportingYourScenario"><a class="anchor" href="#Tutorials-ExportingYourScenario"></a>Exporting Your Scenario</h6>
<div class="paragraph">
<p>You can distribute your scenario by exporting it to an LDIF file. There are different ways to do this, but we recommend that you use the collection mechanism because it allows you to have full control over the amount and depth of the objects you&#8217;d like to transfer. As discussed in "Reusing the Sample Domain", a collection allows you to define a set of objects and subtrees that you can export to an LDIF file for subsequent transfer to a target location, either another DirX Identity connectivity domain or a configuration management system like git.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open <strong>Connectivity</strong> &#8594; <strong>Expert View</strong>.</p>
</li>
<li>
<p>Click <strong>Collections</strong>.</p>
</li>
<li>
<p>Select <strong>New</strong> &#8594; <strong>Collection</strong> (you could first create a folder for your collections).</p>
</li>
<li>
<p>Enter <strong>MyScenario Collection</strong> into <strong>Name</strong> and enter a <strong>Description</strong>.</p>
</li>
<li>
<p>Click <span class="image"><img src="_images/502005954/500990071.gif" alt="attachments/502005954/500990071"></span> to the right of <strong>Path</strong>. Select a location at which to store the LDIF file and set the name for the file.</p>
</li>
<li>
<p><strong>Save</strong> the new object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can define the collection in detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Edit</strong> the object again.</p>
</li>
<li>
<p>Click the <strong>Objects</strong> tab.</p>
</li>
<li>
<p>Create a new line and select the collection itself. This action enables the collection to transfer its own definition to the target location (i.e., the definition is now part of the LDIF file). Otherwise you would lose this information after the transfer. If you created a folder before, do not forget to include this folder into your collection definition here (otherwise the folder is missing at the target location).</p>
</li>
<li>
<p>Click the <strong>Subtrees</strong> tab.</p>
</li>
<li>
<p>Add the following subtrees to your collection:<br>
Agents/MyAgent<br>
Configuration/Agent Types/MyAgentType<br>
Configuration/Connected Directory Types/MyDirType<br>
Configuration/Services/MyScenario<br>
Connected Directories/MyScenario<br>
Jobs/MyScenario<br>
Scenarios/MyScenario<br>
Workflows/MyScenario</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Select <strong>Export Collection</strong>. The collection is exported to the LDIF file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check the file content to verify that all objects and subtrees are exported correctly. You can now transfer the file to the target location.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-MaintainingthePrivilegeStructure"><a class="anchor" href="#Tutorials-MaintainingthePrivilegeStructure"></a>Maintaining the Privilege Structure</h3>
<div class="paragraph">
<p>Now we&#8217;ll perform some maintenance tasks in the privilege structure to illustrate the features of DirX Identity in this area. In this exercise, we will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the privilege structure to see the privilege data that needs to be changed</p>
</li>
<li>
<p>Create separate privileges for the My-Company Sales and Professional Services groups</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingthePrivilegeStructure"><a class="anchor" href="#Tutorials-CheckingthePrivilegeStructure"></a>Checking the Privilege Structure</h4>
<div class="paragraph">
<p>Before we start to maintain the privilege structure, we&#8217;ll tour My-Company&#8217;s <strong>Privilege</strong> view to familiarize ourselves with the sample domain in this area. You&#8217;ll see that some of the data in the structure is not in an optimal state. We&#8217;ll correct this data in this exercise.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Privileges</strong>. You&#8217;ll see folders for <strong>Roles</strong>, <strong>Permissions</strong> and <strong>Groups</strong>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingMy-CompanysDepartment-SpecificRoles"><a class="anchor" href="#Tutorials-CheckingMy-CompanysDepartment-SpecificRoles"></a>Checking My-Company&#8217;s Department-Specific Roles</h5>
<div class="paragraph">
<p>First, we&#8217;ll look at My-Company&#8217;s Department-Specific role structure and compare it with the roles assigned to a Professional Services user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open <strong>Provisioning</strong> &#8594; <strong>Privileges</strong> &#8594; <strong>Roles</strong>. In addition to the query folders (Errors and ToDos), you&#8217;ll see folders for My-Company&#8217;s B2B Roles and Corporate Roles.</p>
</li>
<li>
<p>Open <strong>Corporate Roles</strong> to view the subfolders.</p>
</li>
<li>
<p>Open the <strong>Administration</strong> folder. You can see 8 administrative roles for DirX Identity itself (they start with DXR) and some more for other target systems. The owner of all of these roles is Nik Taspatch. Because all roles require approval (the flag is set), Nik must approve these roles when they are assigned to users because he is responsible for these resources.</p>
</li>
<li>
<p>Open the <strong>Department Specific</strong> folder. It contains a specific role for most of the departments. The owner is the department manager. You will note that roles for IT and Professional Services are missing. How does that work?</p>
</li>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Users</strong>. Open <strong>My-Company &#8594; Professional Services</strong>. Click <strong>Auffret Jean-Marc</strong> and then click the <strong>Assigned Roles</strong> tab. Besides the Internal Employee role, only the Sales role is assigned to this user and all the other users of this department because the department does not have its own role.</p>
</li>
<li>
<p>This works almost perfectly as long as Sales and Professional Services employees use the same services and tools. Click <strong>Auffret</strong> <strong>Jean-Marc</strong> and then click <strong>Edit</strong>. Scroll down in the <strong>Available Roles</strong> tab to the <strong>Parking Place Munich</strong> role. Select it and assign it to this user. Now click <strong>Save</strong>. You will encounter an error <strong>No group matches</strong> when the Group File Share permission is to be resolved (the full DN is cn=Group File Share,cn=General,cn=Corporate Permissions,cn=Permissions,cn=My-Company).</p>
</li>
<li>
<p>Click <strong>Cancel</strong> and then <strong>Reset</strong>.</p>
</li>
<li>
<p>Click the <strong>Assigned Groups</strong> tab. You can see the <strong>FS Sales</strong> group, which is strange because the error message told you that there is no matching group.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingMy-CompanysGroupFileSharePermission"><a class="anchor" href="#Tutorials-CheckingMy-CompanysGroupFileSharePermission"></a>Checking My-Company&#8217;s Group File Share Permission</h5>
<div class="paragraph">
<p>Now we&#8217;ll take a look at the Group File Share permission and the roles and groups assigned to it to find the reason for that error message:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Privileges</strong> and open <strong>Permissions</strong> &#8594; <strong>Corporate Permissions</strong> &#8594; <strong>General</strong>. Click <strong>Group File Share</strong> and then click the <strong>Roles</strong> tab. You can see that the role Internal Employee uses this permission.</p>
</li>
<li>
<p>Now click the <strong>Match Rules</strong> tab. You can see that the ou and c attributes are used to resolve this permission. For Jean-Marc, the values are <strong>ou=PS</strong> and <strong>c=ES</strong>.</p>
</li>
<li>
<p>Click the <strong>Assigned Groups</strong> tab. You can see two FS Sales groups. Click <span class="image"><img src="_images/502005954/501481666.gif" alt="attachments/502005954/501481666"></span> at the end of the row to check these two groups. The first one matches c=US and OU=SA. The second one matches c=DE, ES, FR, GB, IT and OU=SA. This explains the error message. There is no matching group for ou=PS (you can check the other groups as well to verify this). But where does the FS Sales group come from?</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingMy-CompanysSalesTasksPermission"><a class="anchor" href="#Tutorials-CheckingMy-CompanysSalesTasksPermission"></a>Checking My-Company&#8217;s Sales Tasks Permission</h5>
<div class="paragraph">
<p>To find where the FS-Sales group comes from, let&#8217;s take a look at My-Company&#8217;s Sales Tasks permission structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Sales Tasks</strong> permission in the <strong>Department Specific</strong> folder and then the <strong>Assigned Groups</strong> tab. It uses the same two FS Sales groups but the match rule uses only the c attribute. The resolution of this permission assigns the FS Sales group of the Windows Domain Europe target system.</p>
</li>
<li>
<p>Let&#8217;s check to see how the Sales Tasks permission is assigned to the user. In the <strong>Roles</strong> tab, you can see that the <strong>Sales</strong> <strong>Tasks</strong> role uses this permission.</p>
</li>
<li>
<p>Check the <strong>Assigned Roles</strong> tab of the user to see that this role is assigned by a rule (see the <strong>Assigned by</strong> column).</p>
</li>
<li>
<p>Click the <strong>Policies</strong> view. Open <strong>Policies</strong> &#8594; <strong>Rules</strong> &#8594; <strong>Role based scenario</strong> &#8594; <strong>Corporate</strong>.</p>
</li>
<li>
<p>Click <strong>Sales Tasks</strong>, and then click the <strong>Filter</strong> tab. The filter searches all users under the My-Company subtree with ou=SA or ou=PS. In combination with the ou matching rule of the FS Sales permission this works well (the total filter is (ou=SA or ou=PS) and c=ES).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-IdentifyingtheMaintenanceTasks"><a class="anchor" href="#Tutorials-IdentifyingtheMaintenanceTasks"></a>Identifying the Maintenance Tasks</h5>
<div class="paragraph">
<p>From the tour we just took of My-Company&#8217;s privilege structure, we can see two problems that need to be resolved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Professional Services department does not have its own file share FS Professional Services. This is the reason for the error message we received.</p>
</li>
<li>
<p>The FS Sales group is assigned twice, once by the Group File Share permission and once by the Sales Tasks permission. This assignment duplication is not transparent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The powerful features of DirX Identity can sometimes result in erroneous situations as, for example, the double assignment of a group. Nevertheless we can see that DirX Identity provides a lot of features to find the cause of such problems.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CorrectingtheProblemswiththePrivilegeStructure"><a class="anchor" href="#Tutorials-CorrectingtheProblemswiththePrivilegeStructure"></a>Correcting the Problems with the Privilege Structure</h4>
<div class="paragraph">
<p>Now we&#8217;ll fix the problems we found in the last section. First, we&#8217;ll remove the FS Sales groups from the Sales Tasks permission and then we&#8217;ll create a file share privilege structure for the Professional Services department.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CorrectingtheSalesTasksPermission"><a class="anchor" href="#Tutorials-CorrectingtheSalesTasksPermission"></a>Correcting the Sales Tasks Permission</h5>
<div class="paragraph">
<p>To remove the FS Sales groups from the Sales Tasks permission and consequently from the related users:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Privileges</strong> view.</p>
</li>
<li>
<p>Open <strong>Permissions</strong> &#8594; <strong>Corporate Permissions</strong> &#8594; <strong>Department Specific</strong> &#8594; <strong>Sales Tasks</strong> and select the <strong>Assigned Groups</strong> tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong>, select the two FS Sales groups in the lower pane and remove them.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DirX Identity removes the groups directly from the related set of users. Now let&#8217;s check the Users view to make sure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Users</strong> view. Open <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Sales</strong> &#8594; <strong>Sales Europe</strong> &#8594; <strong>Fani Shelby</strong> and select the <strong>Assigned Groups</strong> tab. The group FS Sales is still there but in state DELETED. Subsequent synchronization of this information to the target system Windows Domain Europe would remove the group membership there.</p>
</li>
<li>
<p>Open <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Sales</strong> &#8594; <strong>Sales Europe</strong> &#8594; <strong>Klarmann Bruno</strong> and select the <strong>Assigned Groups</strong> tab. The group FS Sales is there in state ADD. This comes from the Group File Share permission that works only for internal employees. Shelby Fani is a contractor.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CreatingaFileSharePrivilegeStructure"><a class="anchor" href="#Tutorials-CreatingaFileSharePrivilegeStructure"></a>Creating a File Share Privilege Structure</h5>
<div class="paragraph">
<p>Now we&#8217;ll create a separate privilege structure for the Professional Services department. Because this privilege structure is similar to the Sales privilege structure, we can copy many of the objects we&#8217;ll need for our new structure from the Sales privilege structure and modify them afterwards. We&#8217;ll start by creating the FS Professional Services group and then copy and modify the Sales Tasks permission and the Sales Tasks role.</p>
</div>
<div class="sect5">
<h6 id="Tutorials-CreatingtheGroups"><a class="anchor" href="#Tutorials-CreatingtheGroups"></a>Creating the Groups</h6>
<div class="paragraph">
<p>First we&#8217;ll create a new FS Professional Services group in the Windows Domain Europe and Windows Domain USA group folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Privileges</strong> view.</p>
</li>
<li>
<p>Open <strong>Groups</strong> &#8594; <strong>Windows Domain Europe</strong>.</p>
</li>
<li>
<p>Right-click the <strong>General</strong> folder and select <strong>New</strong> &#8594; <strong>Group</strong>. A dialog opens.</p>
</li>
<li>
<p>Enter <strong>FS Professional Services</strong> in <strong>Name</strong> and <strong>Group file share for professional services</strong> in <strong>Description</strong>. Click <strong>OK</strong> to store the new group.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and enter some additional values. Create 5 new lines in <strong>Country</strong> and select <strong>DE</strong>, <strong>ES</strong>, <strong>FR</strong>, <strong>GB</strong> and <strong>IT</strong>. Enter <strong>PS</strong> into <strong>Organizational</strong> <strong>Unit</strong>. This setting means that this group can be selected when the organizational unit is set to <strong>PS</strong> and to one of the country values.</p>
</li>
<li>
<p>Enter the link from <strong>Owner</strong> to <strong>Bellanger Lionel</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the modified object. Note that DirX Identity reports an error in the <strong>Error</strong> field: <strong>Group is invalid: it is not referenced by any permission</strong> because the group is not referenced by a permission.</p>
</li>
<li>
<p>Open <strong>Groups</strong> &#8594; <strong>Windows Domain USA</strong>.</p>
</li>
<li>
<p>Right-click the <strong>General</strong> folder and select <strong>New</strong> &#8594; <strong>Group</strong>. A dialog opens.</p>
</li>
<li>
<p>Enter <strong>FS Professional Services</strong> in <strong>Name</strong> and <strong>Group file share for professional services</strong> in <strong>Description</strong>. Click <strong>OK</strong> to store the new group.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and enter some additional values. Create a new line in <strong>Country</strong> and select <strong>US</strong>. Enter <strong>PS</strong> into <strong>Organizational Unit</strong>. This setting means that this group can be selected when the organizational unit is set to PS and country is set to US.</p>
</li>
<li>
<p>Enter the link from <strong>Owner</strong> to <strong>Bellanger Lionel</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the modified object. Note that DirX Identity reports an error in the Error field: <strong>Group is invalid: it is not referenced by any permission</strong> because this group is not referenced by a permission, either.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-AddingtheNewGroupstotheGroupFileSharePermission"><a class="anchor" href="#Tutorials-AddingtheNewGroupstotheGroupFileSharePermission"></a>Adding the New Groups to the Group File Share Permission</h6>
<div class="paragraph">
<p>Next, we&#8217;ll add the new file share groups to the Group File Share permission:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Privileges</strong> view.</p>
</li>
<li>
<p>Open <strong>Permissions</strong> &#8594; <strong>Corporate Permissions</strong> &#8594; <strong>General</strong>.</p>
</li>
<li>
<p>Click <strong>Group File Share</strong> and then the <strong>Assigned Groups</strong> tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Select <strong>Name</strong> in <strong>Search for</strong> and enter <strong>fs</strong> into the value field. Click <span class="image"><img src="_images/502005954/501579961.gif" alt="attachments/502005954/501579961"></span>. Four groups are displayed in the upper pane. Select both <strong>FS Professional Services groups</strong> and then click <span class="image"><img src="_images/502005954/501121252.gif" alt="attachments/502005954/501121252"></span> to move them to the lower pane.</p>
</li>
<li>
<p>Click <strong>Save</strong>. DirX Identity processes the change. All users that have this permission assigned are resolved anew.</p>
</li>
<li>
<p>Check Fani Shelby from the Sales department again to see that no new group has been added during the resolution. Check Auffret Jean<strong>-</strong>Marc from the Professional Services department to see the result. He has the new FS Professional Services group (the FS Sales group is still in the DELETE state). All the other members of this department have one of the two groups depending on the country in which they reside.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-CopyingtheSalesTasksPermissionandRole"><a class="anchor" href="#Tutorials-CopyingtheSalesTasksPermissionandRole"></a>Copying the Sales Tasks Permission and Role</h6>
<div class="paragraph">
<p>Now we&#8217;ll copy the Sales Tasks permission and role and adapt them to Professional Services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Privileges</strong> view.</p>
</li>
<li>
<p>Open <strong>Permissions</strong> &#8594; <strong>Corporate Permissions</strong> &#8594; <strong>Department Specific</strong>.</p>
</li>
<li>
<p>Right-click <strong>Sales Tasks</strong> and select <strong>Copy Object</strong>. A dialog opens. Change the name to <strong>Professional Services Tasks</strong> and click <strong>OK</strong>. The permission is copied.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and change <strong>Description</strong> to <strong>Standard tasks in the professional services department</strong> and <strong>Owner</strong> from <strong>Straub</strong> <strong>Hatty</strong> to <strong>Bellanger Lionel</strong>. Click <strong>Save</strong> to store the object.</p>
</li>
<li>
<p>Open <strong>Roles</strong> &#8594; <strong>Corporate Roles</strong> &#8594; <strong>Department Specific</strong>.</p>
</li>
<li>
<p>Right-click <strong>Sales Tasks</strong> and select <strong>Copy Object</strong>. A dialog opens. Change <strong>Name</strong> to <strong>Professional Services Tasks</strong> and click <strong>OK</strong>. The role is copied.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and change <strong>Description</strong> to <strong>Standard tasks in the professional services department</strong>, <strong>Role</strong> <strong>ID</strong> to <strong>0308</strong> and set <strong>Owner</strong> to <strong>Bellanger</strong> <strong>Lionel</strong>. Change the fields in the <strong>Details</strong> tab to values that fit for Professional Services.</p>
</li>
<li>
<p>Click the <strong>Assigned Permissions</strong> tab. The <strong>Sales Tasks</strong> permission is still linked to this role. Remove it and move the <strong>Professional Services Tasks</strong> permission to the lower pane.</p>
</li>
<li>
<p>Click <strong>Save</strong> to store the object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you expect a resolution process to occur after the save, this action won&#8217;t occur because the new role is not assigned to any user. Currently all members of the Professional Services department have the <strong>Sales</strong> <strong>Tasks</strong> role assigned. We need to create a provisioning rule and run it.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-CreatingtheProvisioningRule"><a class="anchor" href="#Tutorials-CreatingtheProvisioningRule"></a>Creating the Provisioning Rule</h6>
<div class="paragraph">
<p>Next, we&#8217;ll update the Sales Tasks provisioning rule to remove Professional Services from it, then copy and modify it to create a new Professional Services provisioning rule:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Policies</strong> view.</p>
</li>
<li>
<p>Open <strong>Policies</strong> &#8594; <strong>Rules</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Role based scenario</strong> &#8594; <strong>Corporate</strong> and select the <strong>Sales Tasks</strong>.</p>
</li>
<li>
<p>Click the <strong>Filter</strong> tab. This policy works for all users in the My-Company tree that are either in department Sales (SA) or Professional Services (PS). We need to change this policy.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and open the filter editor with the <span class="image"><img src="_images/502005954/501383303.gif" alt="attachments/502005954/501383303"></span> button. Click the <span class="image"><img src="_images/502005954/501022924.gif" alt="attachments/502005954/501022924"></span> button at the end of the PS line, select <strong>Delete row</strong> and then <strong>OK</strong>. Change the description field (remove "and Professional Services") and then click <strong>Save</strong>.</p>
</li>
<li>
<p>Click <strong>Sales Tasks</strong> in the tree again and select <strong>Copy Object</strong>. A dialog opens. Change the name to <strong>Professional Services Tasks</strong> and click <strong>OK</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong>, change the <strong>Search Filter</strong> in the <strong>Filter</strong> tab to <strong>PS</strong>, select the <strong>Professional Services Tasks</strong> role in the <strong>Privileges</strong> tab instead of the <strong>Sales</strong> <strong>Tasks</strong> role and change <strong>Description</strong>. Click <strong>Save</strong> to store the object.</p>
</li>
<li>
<p>Now both policies fit with the new privileges structure. We need to run the policy execution service.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-RunningthePolicyExecutionService"><a class="anchor" href="#Tutorials-RunningthePolicyExecutionService"></a>Running the Policy Execution Service</h6>
<div class="paragraph">
<p>To run the policy execution service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click DirX Identity Manager&#8217;s <strong>Connectivity</strong> view and log in.</p>
</li>
<li>
<p>Click <strong>Global</strong> <strong>View</strong> and then the <strong>Maintenance</strong> scenario.</p>
</li>
<li>
<p>Click the line between the two <strong>Identity</strong> <strong>Store</strong> connected directories and configure the <strong>Policy Execution</strong> workflow. Set <strong>Provisioning</strong> <strong>Mode</strong> in the <strong>Policy</strong> <strong>Agent</strong> <strong>Parameters</strong> step to <strong>Assign Privilege and Resolve</strong>. Set <strong>Trace</strong> in the <strong>Tracing</strong> tab to <strong>2-Errors and Warnings</strong> (this setting is already selected).</p>
</li>
<li>
<p>Click <strong>Finish</strong> and run this workflow.</p>
</li>
<li>
<p>When the run is complete, click the <strong>Structure</strong> tab and double-click the <strong>PolicyExecution</strong> activity. Click the <strong>Trace</strong> tab and open the trace file. The statistics show that the role <strong>Professional</strong> <strong>Services</strong> <strong>Tasks</strong> was granted to 7 users. Also the <strong>Sales</strong> <strong>Tasks</strong> role affected 7 users which resulted in 7 warnings.</p>
</li>
<li>
<p>Check the user <strong>Auffret</strong> <strong>Jean</strong>-<strong>Marc</strong>. The role <strong>Sales</strong> <strong>Tasks</strong> is replaced by <strong>Professional</strong> <strong>Services</strong> <strong>Tasks</strong>. The same change holds for the permission.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the groups have not changed up to now because the <strong>Professional</strong> <strong>Services</strong> <strong>Tasks</strong> role is an exact copy of the <strong>Sales</strong> <strong>Tasks</strong> role. This does not make much sense unless we change this role.</p>
</div>
</div>
<div class="sect5">
<h6 id="Tutorials-ChangingtheProfessionalServicesTasksPermission"><a class="anchor" href="#Tutorials-ChangingtheProfessionalServicesTasksPermission"></a>Changing the Professional Services Tasks Permission</h6>
<div class="paragraph">
<p>To change the Professional Services Tasks permission:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Privileges</strong>.</p>
</li>
<li>
<p>Select <strong>Permissions</strong> &#8594; <strong>Corporate Permissions</strong> &#8594; <strong>Department Specific</strong> &#8594; <strong>Professional Services Tasks</strong> and click the <strong>Assigned</strong> <strong>Groups</strong> tab.</p>
</li>
<li>
<p>We check all the groups and decide that it makes sense to keep these groups for the Professional Services employees. In addition we want to introduce a new group <strong>Professional</strong> <strong>Services</strong> <strong>Portal</strong>.</p>
</li>
<li>
<p>Select <strong>Groups</strong> &#8594; <strong>Intranet Portal</strong> &#8594; <strong>Group Portals</strong>.</p>
</li>
<li>
<p>Create a new group <strong>Professional Services Portal</strong> with the values <strong>Description</strong>: <strong>Portal pages for professional services</strong>, <strong>Owner</strong>: <strong>Bellanger</strong> <strong>Lionel</strong>, <strong>Country</strong>: <strong>*</strong>.</p>
</li>
<li>
<p>Select the <strong>Professional Services Tasks</strong> permission again, click the <strong>Assigned Groups</strong> tab and click <strong>Edit</strong>. Add the <strong>Professional</strong> <strong>Services</strong> <strong>Portal</strong> group. Click <strong>Save</strong>.</p>
</li>
<li>
<p>Verify that all users of the Professional Services department now have this group.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-ChangingaWorkflowsStructure"><a class="anchor" href="#Tutorials-ChangingaWorkflowsStructure"></a>Changing a Workflow&#8217;s Structure</h3>
<div class="paragraph">
<p>You can use DirX Identity Manager&#8217;s Global View wizards to access most of a workflow&#8217;s properties. If you need to access specific options or the workflow&#8217;s configuration files, you can use the Expert View, which presents all of a workflow&#8217;s objects for viewing and editing. In this section, we&#8217;ll describe the elements of a workflow&#8217;s structure using the NewHR2Ident workflow as an example, then we&#8217;ll show how to use the Expert View&#8217;s configuration objects from a workflow&#8217;s structure view to make a change to this workflow.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingaWorkflowsStructure"><a class="anchor" href="#Tutorials-UnderstandingaWorkflowsStructure"></a>Understanding a Workflow&#8217;s Structure</h4>
<div class="paragraph">
<p>Usually, you&#8217;re only interested in the objects that belong to the workflow with which you&#8217;re currently working. In this case, you can use the workflow&#8217;s structure view from DirX Identity Manager&#8217;s Global View to access the objects in the Manager&#8217;s Expert View. To access the NewHR2Ident workflow&#8217;s structure from the Global View:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Global View</strong>, then <strong>My-Company</strong> &#8594; <strong>NewCompany</strong> in the scenario pane&#8217;s tree.</p>
</li>
<li>
<p>In the scenario map, right-click the workflow line, then select <strong>NewHR2Ident</strong> &#8594; <strong>Show Structure</strong>. This action opens a separate window (this window can stay open while you do other things in another view). The window displays the workflow you are working with and the Identity server (IdS-C) on which this workflow runs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Activity</strong> shows all of the activities that this workflow contains. <strong>Identity Server</strong> specifies the server on which the activity will run. (If you have set up a distributed environment during installation, you can easily change the distribution of each workflow by changing the DirX Identity server here).</p>
</div>
<div class="paragraph">
<p><strong>Run Workflow/Job</strong> identifies the job that this activity uses. <strong>Channels</strong> identifies the channels that this job uses to access the connected directories. In this case, the <strong>ODBC2Ident_ODBCExport</strong> job reads the <strong>New-HR</strong> connected directory via the channel <strong>ODBC2Ident</strong> (indicated by <strong>&lt;</strong> in <strong>D</strong>irection) and writes the information via the channel <strong>OutData</strong> (indicated by <strong>&gt;</strong> in <strong>D</strong>irection) to an intermediate file directory <strong>Data</strong>.</p>
</div>
<div class="paragraph">
<p>The next activity <strong>ODBC2Ident_metaCP</strong> reads the information from the intermediate file directory <strong>Data</strong> via the channel <strong>InData</strong> and writes it via the channel <strong>ODBC2Ident</strong> to the connected directory <strong>Identity Store</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ChangingaJobsTimeoutValue"><a class="anchor" href="#Tutorials-ChangingaJobsTimeoutValue"></a>Changing a Job&#8217;s Timeout Value</h4>
<div class="paragraph">
<p>As you can see, a workflow&#8217;s structure view allows you to view all of the objects that belong to a workflow definition and the internal relationships between them. You can also use this view to edit all aspects of your workflow or simply view more details. In this section, we&#8217;ll show you how to make a change to one of the HR2Ident workflow&#8217;s job objects.</p>
</div>
<div class="paragraph">
<p>When you&#8217;re editing a workflow in the structure view, always make sure that you double-click the beginning of an entry because there are hidden buttons located at the end of each entry which, if selected, will execute immediately. If you accidentally click one of these buttons, especially <strong>Delete</strong>, click <strong>Reset</strong>, and then click <strong>Edit</strong> again.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Edit</strong> to open the <strong>HR2Ident</strong> workflow for editing.</p>
</li>
<li>
<p>Double-click the beginning of the top-most job entry in <strong>Workflows/Jobs</strong>.</p>
</li>
<li>
<p>Three buttons are displayed at the end of the job entry. You can view the job with the first button, delete it with the second button and change the reference to another job with the third button. Click the first button.</p>
</li>
<li>
<p>The job object is opened with all its tabs. Click through the different tabs and view their content.</p>
</li>
<li>
<p>Click the <strong>Job</strong> tab again and change <strong>Timeout</strong> to <strong>01:00:00</strong>. This action affects the automatic abort feature of DirX Identity. Now your job can run for 1 hour (the default was 2 hours) because you are sure that the amount of data can always be handled in this timeframe.</p>
</li>
<li>
<p>Do not change anything else. Click <strong>OK</strong> to close the job object and then <strong>Save</strong> to exit the edit mode of the structure view. Click <strong>Close</strong> to close the structure view window.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This simple example shows that you can use the structure view to access any detail of your workflow.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-ApplyingSoDPolicies"><a class="anchor" href="#Tutorials-ApplyingSoDPolicies"></a>Applying SoD Policies</h3>
<div class="paragraph">
<p>In this section, we&#8217;ll demonstrate how segregation of duties (SoD) checks work. We&#8217;ll show you how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Activate SoD checking</p>
</li>
<li>
<p>Activate an SoD policy</p>
</li>
<li>
<p>Make a privilege assignment that causes an SoD violation and examine the effects</p>
</li>
<li>
<p>Check the SoD violation</p>
</li>
<li>
<p>Override an SoD violation and examine the effects</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Tutorials-ActivatingSoDChecking"><a class="anchor" href="#Tutorials-ActivatingSoDChecking"></a>Activating SoD Checking</h4>
<div class="paragraph">
<p>First, we&#8217;ll activate SoD checking if necessary. For performance reasons, this feature is deactivated by default in all customer domains. We&#8217;ll check its activation using DirX Identity Manager&#8217;s Provisioning &#8594; Domain Configuration view in the sample domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager&#8217;s <strong>Provisioning</strong> view group.</p>
</li>
<li>
<p>Click <strong>Domain</strong> <strong>Configuration</strong> &#8594; <strong>My</strong>-<strong>Company</strong>.</p>
</li>
<li>
<p>In the <strong>Compliance</strong> tab, click <strong>Edit</strong>.</p>
</li>
<li>
<p>Check <strong>Segregation</strong> <strong>of</strong> <strong>Duties</strong> <strong>(SoD)</strong> <strong>checks</strong> if it isn&#8217;t already checked.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To make this change effective within DirX Identity Manager itself, you must stop and then restart all of your running Manager instances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>File</strong> &#8594; <strong>Exit</strong> to close your Manager instance(s).</p>
</li>
<li>
<p>Start Manager again and log in to the <strong>Provisioning</strong> view.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ActivatinganSoDPolicy"><a class="anchor" href="#Tutorials-ActivatinganSoDPolicy"></a>Activating an SoD Policy</h4>
<div class="paragraph">
<p>Next, we&#8217;ll activate one of My-Company&#8217;s SoD policies. The My-Company sample domain has an SoD policy that prohibits a person with the Contractor role from getting the Manager role. We&#8217;ll activate this policy now with DirX Identity Manager:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Policies</strong>, click <strong>SOD</strong> <strong>Policies</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Contractor</strong> <strong>&lt;&gt;</strong> <strong>Manager</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong>, and then check <strong>Is</strong> <strong>active</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>When enabling the SoD policy, DirX Identity checks whether there are already violations for this policy. In our example, there are no violations found.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now let&#8217;s look at the two privileges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Privileges</strong>, click <strong>Roles</strong> &#8594; <strong>Corporate</strong> <strong>Roles</strong> &#8594; <strong>General</strong> &#8594; <strong>Manager</strong>. Look at the Approval tab. You can see that <strong>Potential SoD conflict</strong> is checked.</p>
</li>
<li>
<p>Click the role <strong>Contractor</strong>. You can see that this role also has <strong>Potential SoD conflict</strong> checked.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-AssigningaConflictingPrivilege"><a class="anchor" href="#Tutorials-AssigningaConflictingPrivilege"></a>Assigning a Conflicting Privilege</h4>
<div class="paragraph">
<p>Now we&#8217;re ready to test the "Contractor cannot be a manager" SoD policy. Let&#8217;s find a user with the Contractor role and assign him the Manager privilege. We&#8217;ll use Lavina Pitton in Information Technology as our example, and use Web Center to make the privilege assignment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In an Internet browser, start DirX Identity Web Center.</p>
</li>
<li>
<p>Log in as <strong>Taspatch Nik</strong> with the password <strong>dirx</strong>.</p>
</li>
<li>
<p>In <strong>Users</strong> &#8594; <strong>Select</strong> <strong>user</strong>, enter <strong>P</strong> in <strong>Search</strong> <strong>for</strong>, and then click <strong>Search</strong> to return a list of users whose names begin with "P".</p>
</li>
<li>
<p>Select <strong>Pitton</strong> <strong>Lavina</strong> from the list. Web Center displays a user summary for Lavina.</p>
</li>
<li>
<p>In the <strong>Users</strong> menu, click <strong>Assign</strong> <strong>privileges</strong>.</p>
</li>
<li>
<p>Enter <strong>M</strong> in <strong>Search</strong> <strong>for</strong>, and then click <strong>Search</strong> to return a list of roles that begin with "M".</p>
</li>
<li>
<p>Check <strong>Manager</strong>, and then move it to <strong>Assigned</strong> <strong>roles</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>. Web Center displays a warning dialog that identifies the Manager &lt;&gt; Contractor SoD violation.</p>
</li>
<li>
<p>Click <strong>Save anyway</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheSoDViolation"><a class="anchor" href="#Tutorials-CheckingtheSoDViolation"></a>Checking the SoD Violation</h4>
<div class="paragraph">
<p>Now we&#8217;ll look at the effect of our conflicting privilege assignment. First we&#8217;ll look at the SoD mitigation workflow, which automatically runs to handle the violation. Then we&#8217;ll check the result at Lavina Pitton&#8217;s user object.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheSoDMitigationWorkflow"><a class="anchor" href="#Tutorials-CheckingtheSoDMitigationWorkflow"></a>Checking the SoD Mitigation Workflow</h5>
<div class="paragraph">
<p>First, let&#8217;s use Web Center to look at the workflow that is generated to handle the SoD violation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Work List</strong>, click <strong>Show</strong> <strong>initiated</strong> <strong>workflows</strong>.</p>
</li>
<li>
<p>Click <strong>Pitton</strong> <strong>Lavina</strong> &#8594; <strong>Manager</strong>. This is the SoD mitigation workflow.</p>
</li>
<li>
<p>Look at <strong>Running</strong> <strong>Activities</strong>. A single approval activity is running with two potential participants: Hungs Olivier and Morton Gabriela. One or the other of these two company heads must approve the privilege assignment to override the SoD conflict.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can use DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>Monitor</strong> view to get more details about this workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to Manager&#8217;s <strong>Provisioning</strong> view, and then click <strong>Workflows</strong> &#8594; <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>Manager</strong> <strong>Nomination</strong>. In the My-Company sample domain, all requests for the Manager privilege must be approved by either Olivier Hungs or Gabriela Morton. These two people can decide whether or not to override the SoD conflict and approve the Manager privilege for the contractor Lavina Pitton.</p>
</li>
<li>
<p>Under <strong>Manager</strong> <strong>Nomination</strong>, you&#8217;ll see a folder with today&#8217;s date. Open it, and then click <strong>Pitton</strong> <strong>Lavina</strong> &#8594; <strong>Manager</strong>.</p>
</li>
<li>
<p>The <strong>General</strong> tab displays this workflow&#8217;s structure. You can see that the Approval by Company-Head activity is the current one (it&#8217;s highlighted in grey). Right-click it, and then click <strong>Open</strong>.</p>
</li>
<li>
<p>Click the <strong>Status</strong> <strong>Information</strong> tab. In the Participants field, you can see the approvers. You can see Olivier Hungs and Gabriela Morton in the participant list.</p>
</li>
<li>
<p>Click <strong>Close</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheUsersSoDInformation"><a class="anchor" href="#Tutorials-CheckingtheUsersSoDInformation"></a>Checking the User&#8217;s SoD Information</h5>
<div class="paragraph">
<p>Now let&#8217;s look at Lavina Pitton&#8217;s user information in DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Users</strong> view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to <strong>Provisioning</strong> &#8594; <strong>Users</strong>, and then click <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Global</strong> <strong>IT</strong> &#8594; <strong>Pitton</strong> <strong>Lavina</strong>.</p>
</li>
<li>
<p>Click the <strong>SoD</strong> <strong>Exceptions</strong> tab and look at <strong>Pending</strong> <strong>SoD</strong> <strong>violations</strong>. Two violations are listed: one for the <strong>Contractor</strong> privilege and one for the <strong>Manager</strong> privilege. Notice that <strong>Approved</strong> <strong>SoD</strong> <strong>violations</strong>, which provides a history of SoD violations for this user, is empty.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll approve the Contractor &lt;&gt; Manager SoD conflict and examine the result.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-OverridingtheSoDViolation"><a class="anchor" href="#Tutorials-OverridingtheSoDViolation"></a>Overriding the SoD Violation</h4>
<div class="paragraph">
<p>We&#8217;ll log in to Web Center as Olivier Hungs and approve the Manager request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to DirX Identity Web Center and click <strong>Logout</strong> to log out of Nik Taspatch&#8217;s account.</p>
</li>
<li>
<p>In the <strong>Log in</strong> dialog, enter <strong>Hungs Olivier</strong> in Name and the password <strong>dirx</strong>.</p>
</li>
<li>
<p>Click <strong>Work List</strong> &#8594; <strong>Task</strong> <strong>list</strong>. Olivier Hungs task list is displayed.</p>
</li>
<li>
<p>Click the <strong>Pitton Lavina &#8594; Manager</strong> task.</p>
</li>
<li>
<p>Enter <strong>L</strong>. <strong>Pitton</strong> <strong>is</strong> <strong>a</strong> <strong>substitute</strong> <strong>manager</strong> <strong>for</strong> <strong>6</strong> <strong>months</strong> in <strong>Reason</strong> and then click <strong>Accept</strong>.</p>
</li>
<li>
<p>There is nothing more to do, so click <strong>Logout</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheEffectoftheSoDViolationException"><a class="anchor" href="#Tutorials-CheckingtheEffectoftheSoDViolationException"></a>Checking the Effect of the SoD Violation Exception</h4>
<div class="paragraph">
<p>Now we&#8217;ll show the effect of Olivier Hung&#8217;s SoD violation override from three different perspectives: the SoD mitigation workflow, the user-privilege assignment, and the SoD policy. We&#8217;ll use DirX Identity Manager for this task.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheEffectontheSoDMitigationWorkflow"><a class="anchor" href="#Tutorials-CheckingtheEffectontheSoDMitigationWorkflow"></a>Checking the Effect on the SoD Mitigation Workflow</h5>
<div class="paragraph">
<p>First let&#8217;s return to DirX Identity Manager&#8217;s <strong>Workflows</strong> &#8594; <strong>Monitor</strong> view and examine the <strong>Pitton</strong> <strong>Lavina</strong> &#8594; <strong>Manager</strong> workflow again:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to <strong>Provisioning</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>Manager</strong> <strong>Nomination</strong> &#8594; <em>today&#8217;s</em> <em>date</em> &#8594; <strong>Pitton</strong> <strong>Lavina</strong> <strong>&#8594; Manager</strong>. Click the <strong>Refresh</strong> button if necessary.</p>
</li>
<li>
<p>You&#8217;ll see that the <strong>Approval</strong> <strong>by</strong> <strong>Company</strong> <strong>Head</strong> activity and the <strong>Apply Changes</strong> activity are now green.</p>
</li>
<li>
<p>Right-click <strong>Approval</strong> <strong>by</strong> <strong>Company</strong> <strong>Head</strong> and then click <strong>Open</strong>.</p>
</li>
<li>
<p>Click the <strong>Status</strong> <strong>Information</strong> tab. In the Status field, you can see that the approval activity was successfully accepted.</p>
</li>
<li>
<p>Click <strong>Close</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheEffectontheUsersPrivileges"><a class="anchor" href="#Tutorials-CheckingtheEffectontheUsersPrivileges"></a>Checking the Effect on the User&#8217;s Privileges</h5>
<div class="paragraph">
<p>Next, let&#8217;s go to DirX Identity Manager&#8217;s Users view to look at Lavina Pitton&#8217;s privileges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Global</strong> <strong>IT</strong> &#8594; <strong>Pitton</strong> <strong>Lavina</strong>. Click the <strong>Refresh</strong> button.</p>
</li>
<li>
<p>Click the <strong>Assigned</strong> <strong>Roles</strong> tab. The <strong>Manager</strong> privilege is now in the state ENABLED. Notice that it has an <strong>End</strong> <strong>date</strong> and <strong>Reapproval</strong> is checked. The reason for this is that My-Company&#8217;s SoD policy requires that all privilege assignments approved despite an SoD conflict must be re-approved after 3 months.</p>
</li>
<li>
<p>Click the <strong>SoD</strong> <strong>Exceptions</strong> tab and look at <strong>Approved</strong> <strong>SoD</strong> <strong>violations</strong>. Now it shows that Olivier Hungs has approved Lavina&#8217;s Manager privilege assignment and shows the reason why.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheEffectontheSoDPolicy"><a class="anchor" href="#Tutorials-CheckingtheEffectontheSoDPolicy"></a>Checking the Effect on the SoD Policy</h5>
<div class="paragraph">
<p>Finally, we&#8217;ll go to DirX Identity Manager&#8217;s <strong>Policies</strong> view and look at the <strong>Contractor</strong> <strong>&lt;&gt;</strong> <strong>Manager</strong> SoD policy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Policies</strong> &#8594; <strong>SoD</strong> <strong>Policies</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Contractor</strong> <strong>&lt;&gt;</strong> <strong>Manager</strong>. You&#8217;ll see an entry <strong>Lavina</strong> <strong>Pitton</strong> <strong>001</strong>. Click it..</p>
</li>
<li>
<p><strong>Accepted</strong> <strong>Violations</strong> shows that Contractor and Manager roles have been assigned for this user and <strong>Approval</strong> <strong>Details</strong> shows who approved it and why.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From this exercise, you can see that DirX Identity provides the flexibility to create SoD policies and override them when reasonable and necessary. You can also see that it provides several ways to audit SoD violation exceptions.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-Re-approvingaPrivilegeAssignment"><a class="anchor" href="#Tutorials-Re-approvingaPrivilegeAssignment"></a>Re-approving a Privilege Assignment</h3>
<div class="paragraph">
<p>Many companies have a set of critical privileges that need to be protected from potential misuse or abuse. It is imperative that assignments of these kinds of privileges be periodically re-checked by authorized personnel. DirX Identity&#8217;s re-approval workflows allow sensitive privileges to be re-approved automatically and consistently across the enterprise rather than on a case-by-case basis.</p>
</div>
<div class="paragraph">
<p>In this section, we&#8217;ll show you how privilege re-approval works using the Trainer role that is assigned to My-Company&#8217;s Professional Services employees.</p>
</div>
<div class="paragraph">
<p>This section provides information how re-approval works and demonstrates how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select a privilege for re-approval</p>
</li>
<li>
<p>Run a report to identify all users to whom the privilege is assigned</p>
</li>
<li>
<p>Initialize the re-approval workflow</p>
</li>
<li>
<p>Run the re-approval workflow and examine the results</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingHowRe-approvalWorks"><a class="anchor" href="#Tutorials-UnderstandingHowRe-approvalWorks"></a>Understanding How Re-approval Works</h4>
<div class="paragraph">
<p>Re-approval of a privilege assignment is configured at both the privilege and domain levels. When set, the <strong>Reapproval</strong> parameter in a privilege object configures all assignments of that privilege for periodic re-approval. The privilege object also contains parameters for setting an end date or a time period after which assignments of the privilege expire if they are not re-approved. We&#8217;ll view and use these parameters in the Trainer role in the next section of this exercise.</p>
</div>
<div class="paragraph">
<p>The domain configuration object specifies default end dates or time periods to be used for privileges that are marked for re-approval but do not specify individual date or period settings. The domain configuration object also contains a parameter (<strong>Approval</strong> <strong>period</strong>) that controls the time interval before a privilege assignment&#8217;s end date or period at which re-approval workflows are to be started. The default for this parameter is 14 days. You can view these parameters with DirX Identity Manager&#8217;s Provisioning view by clicking <strong>Domain</strong> <strong>Configuration</strong> &#8594; <strong>My</strong>-<strong>Company</strong> and then clicking the <strong>Timing</strong> tab.</p>
</div>
<div class="paragraph">
<p>In the sample domain, the re-approval process is carried out by the following request workflows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>InitializeReapproval</strong> workflow, which examines all assignments of privileges marked for re-approval and sets their end date or period attributes.</p>
</li>
<li>
<p>The <strong>StartReapprovalWorkflows</strong> workflow, which starts the request workflow that has been configured for the privilege that requires re-approval. In the sample domain, the 4 Eye Approval request workflow is the default workflow to be run for any privilege assignments that require re-approval if no other workflow is configured.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although we&#8217;ll run <strong>InitializeReapproval</strong> and <strong>StartReapprovalWorkflows</strong> by hand later on in this exercise, these two workflows are normally run at scheduled intervals in DirX Identity production environments. It&#8217;s a good idea to schedule them to run at night or over a weekend so that they do not compete with workday network resources. To create a schedule for a workflow, you use the <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong> to create a schedule configuration object and associate it with a workflow. For example, you can create a schedule that runs the workflow every 24 hours between midnight and 4AM. Go to <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>&#8594; <strong>Schedules</strong> &#8594; <strong>Default</strong> to see some example schedules. Click <strong>Help</strong> to get information about how to set the schedule configuration object&#8217;s time controls and the rules for creating schedules.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-SelectingaPrivilegeforRe-approval"><a class="anchor" href="#Tutorials-SelectingaPrivilegeforRe-approval"></a>Selecting a Privilege for Re-approval</h4>
<div class="paragraph">
<p>Now we&#8217;ll use DirX Identity Manager&#8217;s Provisioning view to select the Trainer role for re-approval:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Privileges</strong> &#8594; <strong>Roles</strong> &#8594; <strong>Corporate</strong> <strong>Roles</strong> &#8594; <strong>General</strong> and click <strong>Trainer</strong> to select it.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Check <strong>Requires</strong> <strong>re-approval</strong> in the Certification tab.</p>
</li>
<li>
<p>In <strong>Re-approval</strong> <strong>period</strong>, enter <strong>5</strong> in <strong>Day(s)</strong>. Now all assignments of the <strong>Trainer</strong> role are scheduled to expire in 5 days unless they are re-approved.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-IdentifyingthePrivilegesUsers"><a class="anchor" href="#Tutorials-IdentifyingthePrivilegesUsers"></a>Identifying the Privilege&#8217;s Users</h4>
<div class="paragraph">
<p>Next, we&#8217;ll use Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Privileges</strong> view to run a report on the <strong>Trainer</strong> role that will identify the people in My-Company who are assigned the role and thus who will be affected by the re-approval process.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Privileges</strong> &#8594; <strong>Roles</strong> &#8594; <strong>Corporate</strong> <strong>Roles</strong> &#8594; <strong>General</strong>.</p>
</li>
<li>
<p>Right-click <strong>Trainer</strong>, and then click <strong>Report</strong>.</p>
</li>
<li>
<p>Click <strong>Number</strong> <strong>of</strong> <strong>users</strong> <strong>per</strong> <strong>role</strong> in the list of report templates.</p>
</li>
<li>
<p>Check <strong>Output</strong> <strong>to</strong> <strong>viewer</strong>, and then click <strong>Run</strong> <strong>report</strong>. After a few seconds, DirX Identity Manager displays a report on the number of users who are assigned the <strong>Trainer</strong> role. You can see that 5 users are affected by the role and 4 are direct users. Re-approval will affect only the direct users. If you have followed the getting started tutorial, you will see 6 affected users and 5 direct users.</p>
</li>
<li>
<p>Click <strong>Close</strong> to close the report.</p>
</li>
<li>
<p>Right-click <strong>Trainer</strong> again, select <strong>Report.</strong> Now click <strong>Users of a role</strong> in the list of templates and check <strong>Output to viewer</strong>. After a few seconds, DirX Identity Manager displays a list of the users who are affected by the <strong>Trainer</strong> role. They are: Straub Hatty in Sales, Costello Marcella and Blander Dyan in Professional Services, Kubalke Leo in Product Testing and Telfer Laura in Human Resources. If you have followed the getting started tutorial, you will see Teacher Mark as well.<br>
<br>
Note that Costello Marcella will not be affected by the re-approval process since she is an affected user of the Trainer role but not a direct one. This will be explained in greater detail at the end of this chapter.</p>
</li>
<li>
<p>Click <strong>Close</strong> to close the report.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-InitializingtheRe-approvalProcess"><a class="anchor" href="#Tutorials-InitializingtheRe-approvalProcess"></a>Initializing the Re-approval Process</h4>
<div class="paragraph">
<p>Now we need to initialize the re-approval process. In this step, we run the <strong>InitializeReapproval</strong> workflow, which checks for all assignments of the <strong>Trainer</strong> role and updates the re-approval attributes of the affected users. We&#8217;ll use DirX Identity Manager&#8217;s <strong>Connectivity</strong> view to run this workflow and then examine the results in the <strong>Provisioning</strong> &#8594; <strong>Users</strong> view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return to the Manager window, click <strong>Connectivity</strong>, and log in if necessary.</p>
</li>
<li>
<p>In <strong>Global View</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Main</strong>, right-click the workflow line between the two Identity Stores.</p>
</li>
<li>
<p>Select <strong>InitializeReapproval</strong> and then click <strong>Run</strong>. After a few seconds, the workflow should complete successfully. (The <strong>InitializeReapproval</strong> activity is displayed in green in the <strong>Structure</strong> tab.)</p>
</li>
<li>
<p>Click <strong>Close</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s return to the <strong>Provisioning</strong> view and examine one of users highlighted in our report. Let&#8217;s look at Laura Telfer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Human</strong> <strong>Resources</strong> &#8594; <strong>Telfer</strong> <strong>Laura</strong>.</p>
</li>
<li>
<p>Click <strong>Assigned</strong> <strong>Roles</strong> and look at the <strong>Trainer</strong> role in the list. Notice that <strong>End</strong> <strong>date</strong> now shows a date at which the role must be re-approved (five days from today), and <strong>Reapproval</strong> is checked.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-RunningtheRe-approvalWorkflow"><a class="anchor" href="#Tutorials-RunningtheRe-approvalWorkflow"></a>Running the Re-approval Workflow</h4>
<div class="paragraph">
<p>Next, we&#8217;ll run the <strong>StartReapprovalWorkflows</strong> workflow, which starts all necessary re-approval workflows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return to the Manager window and click <strong>Connectivity</strong>.</p>
</li>
<li>
<p>In <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Main</strong>, right-click the workflow line between the two Identity Stores, select <strong>StartReapprovalWorkflows</strong>, and then click <strong>Run</strong>. After a few seconds, the workflow should complete successfully. (The <strong>StartReapprovalWorkflows</strong> activity is displayed in green in the <strong>Structure</strong> tab.)</p>
</li>
<li>
<p>Click <strong>Close</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheRe-approvalWorkflowResults"><a class="anchor" href="#Tutorials-CheckingtheRe-approvalWorkflowResults"></a>Checking the Re-approval Workflow Results</h4>
<div class="paragraph">
<p>Now let&#8217;s check the results in Manager&#8217;s Workflows &#8594; Monitor tree view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Workflows</strong> &#8594; <strong>Monitor</strong> &#8594; <strong>Queries</strong> &#8594; <strong>Running</strong> <strong>Workflows</strong>. You can see that there are 4 (or 5) workflows, one for each user who is assigned the <strong>Trainer</strong> privilege. These workflows were started because the <strong>Trainer</strong> role is set to expire in 5 days, which falls within the 14-day approval period specified for starting re-approval workflows.</p>
</li>
<li>
<p>Click <strong>Telfer</strong> <strong>Laura</strong> &#8594; <strong>Trainer</strong>. You can see from the <strong>General</strong> tab that there are two activities in grey - <strong>Approval</strong> <strong>by</strong> <strong>User</strong> <strong>Manager</strong> and <strong>Approval</strong> <strong>by</strong> <strong>Privilege</strong> <strong>Managers</strong>. This is the <strong>4</strong>-<strong>Eye</strong> <strong>Approval</strong> workflow we&#8217;ve discussed in "Adding a User".</p>
</li>
<li>
<p>Right-click <strong>Approval</strong> <strong>by</strong> <strong>User</strong> <strong>Manager</strong>, then click <strong>Open</strong>.</p>
</li>
<li>
<p>Click the <strong>Status</strong> <strong>Information</strong> tab. Look at the Participant field. You can see that the approvers are Berner Hans, who is Laura&#8217;s manager, and Ormsby Mary-Jane, who is representative of Hans. The workflow has automatically notified them about the re-approval task, as it has the managers and their representatives of all the other affected users.</p>
</li>
<li>
<p>Click <strong>Close</strong> to return to the <strong>General</strong> tab. Right-click <strong>Approval</strong> <strong>by</strong> <strong>Privilege</strong> <strong>Managers</strong> and then click <strong>Open</strong>.</p>
</li>
<li>
<p>Click the <strong>Status</strong> <strong>Information</strong> tab and look at <strong>Participant</strong>. The re-approver here is Costello Marcella, the owner of the <strong>Trainer</strong> role.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now let&#8217;s use the Web Center to look at Marcella&#8217;s task list:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Web Center, log in as <strong>Costello Marcella</strong> with the password <strong>dirx</strong>.</p>
</li>
<li>
<p>In <strong>Work</strong> <strong>List</strong>, click <strong>Task list</strong>. You can see that Marcella has 5 (or 7) tasks in her queue: one for each user who needs his <strong>Trainer</strong> role re-approved since she is the role owner; and an additional task since she is the manager of Blander Dyan. She needs to accept each of these requests for these users to retain their <strong>Trainer</strong> roles. If she rejects any of these requests, the workflow automatically notifies the affected user that his role assignment has been rejected, and DirX Identity will remove the role assignment.<br>
If Marcella does not respond to these tasks (for example, because she is on vacation), the workflow ends with a timeout error once the end date is reached, and DirX Identity removes the privilege assignments. This is the reason why the default re-approval period is 14 days; in a production environment, the workflow should also be configured to define an escalation path for re-approval to avoid workflow timeouts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Recall that our <strong>Trainer</strong> role report listed Marcella Costello as an affected user. However, you&#8217;ll notice that no re-approval workflow was generated for her. Let&#8217;s look at her assigned roles to see why.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Self Service</strong> &#8594; <strong>Display</strong> <strong>summary</strong>, and then click on the <strong>Roles</strong> button. You&#8217;ll see that Marcella has the <strong>Training</strong> <strong>Manager</strong> role. Let&#8217;s take a look at this role in more detail.</p>
</li>
<li>
<p>Click <strong>Roles</strong> &#8594; <strong>Select</strong> <strong>role</strong>.</p>
</li>
<li>
<p>Enter <strong>T</strong> in <strong>Search</strong> <strong>for</strong>, and then click <strong>Search</strong> to get a list of roles that begin with "T".</p>
</li>
<li>
<p>Select the <strong>Training</strong> <strong>Manager</strong> role and look at <strong>Privileges</strong>. You can see that the <strong>Trainer</strong> role is listed in <strong>Assigned</strong> <strong>junior</strong> <strong>roles</strong>, which means that <strong>Training</strong> <strong>Manager</strong> automatically inherits the <strong>Trainer</strong> role. This is the reason why Marcella appears in the role report as an affected user but does not need her <strong>Trainer</strong> role re-approved: since she has the <strong>Training</strong> <strong>Manager</strong> role assigned to her, she automatically gets the <strong>Trainer</strong> role.</p>
</li>
<li>
<p>Logout and close the Internet browser.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-CertifyingaRole"><a class="anchor" href="#Tutorials-CertifyingaRole"></a>Certifying a Role</h3>
<div class="paragraph">
<p>Another method for protecting critical privileges from potential misuse or abuse is to certify the privilege itself. In this case, you have to certify the privilege regarding all assigned users. It is imperative that this kind of privilege is periodically checked by authorized personnel.</p>
</div>
<div class="paragraph">
<p>DirX Identity&#8217;s certification feature allows sensitive privileges to be checked on a regular schedule or during compliance campaigns.</p>
</div>
<div class="paragraph">
<p>In this section, we&#8217;ll show you how a certification campaign works using the <strong>Trainer</strong> role that is assigned to some of My-Company&#8217;s employees. We&#8217;ll demonstrate how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set up a certification campaign for this privilege</p>
</li>
<li>
<p>Start the campaign</p>
</li>
<li>
<p>Certify the privilege with DirX Identity Web Center or Business User Interface</p>
</li>
<li>
<p>Monitor the campaign</p>
</li>
<li>
<p>Finish the campaign</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find more information about privilege certification in the DirX Identity Use Case Document <em>Certification Campaigns</em>.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingHowaPrivilegeCertificationCampaignWorks"><a class="anchor" href="#Tutorials-UnderstandingHowaPrivilegeCertificationCampaignWorks"></a>Understanding How a Privilege Certification Campaign Works</h4>
<div class="paragraph">
<p>A privilege certification campaign is configured in both the Connectivity and Provisioning views and consists of the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating and configuring a certification campaign in the Provisioning view by providing a start date, an approval period, a search criterion for users to be certified and a search criterion for privileges to be certified.</p>
</li>
<li>
<p>Enabling the Certification Campaign Controller workflow in the Connectivity view.</p>
</li>
<li>
<p>Setting up a schedule for the Certification Campaign Controller workflow as a regular task.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this exercise, we assume that the My-Company Certification Campaign Controller workflow runs every night. A compliance administrator needs to create, configure and run a certification campaign on selected privileges and selected users. In our scenario, a compliance administrator selects the <strong>Trainer</strong> role and starts a certification campaign. <strong>Marcella</strong> <strong>Costello</strong>, the role owner, must certify this role.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ConfiguringtheCertificationCampaign"><a class="anchor" href="#Tutorials-ConfiguringtheCertificationCampaign"></a>Configuring the Certification Campaign</h4>
<div class="paragraph">
<p>The first step is to configure the certification campaign feature so that you can run the privilege certification campaign. Configuration tasks include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configuring the SMTP service</p>
</li>
<li>
<p>Setting up a schedule for the Certification Campaign Controller workflow</p>
</li>
<li>
<p>Creating a thread for the Certification Campaign Controller workflow in the Java-based Server</p>
</li>
<li>
<p>Configuring the Certification Campaign Controller workflow</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="Tutorials-ConfiguringtheSMTPService"><a class="anchor" href="#Tutorials-ConfiguringtheSMTPService"></a>Configuring the SMTP Service</h5>
<div class="paragraph">
<p>You need to configure the SMTP service because it&#8217;s required for sending the campaign notifications. To configure it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Provisioning view, browse to <strong>Workflows</strong> &#8594; <strong>Configuration</strong> &#8594; <strong>Services</strong> &#8594;<strong>SMTP</strong>.</p>
</li>
<li>
<p>In <strong>SMTP</strong> <strong>host</strong>, provide an appropriate SMTP host address (for example, <strong>localhost</strong> if you have a local SMTP server). For the purpose of this tutorial, you can update the <strong>Map mail address</strong> field. Enter <strong>dummy</strong> to suppress all notification emails or enter a specific email address; for example, your own address to send all the notifications to your mailbox rather than to the calculated ones. Note that you should clear this field in a production environment.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-SchedulingtheCertificationCampaignController"><a class="anchor" href="#Tutorials-SchedulingtheCertificationCampaignController"></a>Scheduling the Certification Campaign Controller</h5>
<div class="paragraph">
<p>In a production environment, you should configure a schedule for the workflow and make sure that it runs at least once a day. For this tutorial, we don&#8217;t need to set up a schedule for this workflow because we&#8217;ll start it manually.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ConfiguringtheJava-basedServerforCertificationCampaigns"><a class="anchor" href="#Tutorials-ConfiguringtheJava-basedServerforCertificationCampaigns"></a>Configuring the Java-based Server for Certification Campaigns</h5>
<div class="paragraph">
<p>The Java-based Server must start one thread for the Certification Campaign Controller workflow. To configure it to do so:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Connectivity Expert View, browse to <strong>Configuration</strong> &#8594; <strong>DirX Identity Servers</strong> &#8594; <strong>Java</strong> <strong>Servers</strong> &#8594; <strong>My-Company</strong> &#8594; *My-Company-S1-*<em>yourhost</em>.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>In the Resource Families tab, move <strong>CertificationCampaign</strong> from <strong>Available</strong> down to <strong>Selected</strong>. Change the number of threads to <strong>1</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ConfiguringtheCertificationCampaignControllerWorkflow"><a class="anchor" href="#Tutorials-ConfiguringtheCertificationCampaignControllerWorkflow"></a>Configuring the Certification Campaign Controller Workflow</h5>
<div class="paragraph">
<p>Now we&#8217;ll configure and enable the Certification Campaign Controller workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Connectivity Global View, select the <strong>My-Company</strong> &#8594; <strong>Main</strong> scenario.</p>
</li>
<li>
<p>Select the workflow line between the two Identity Store connected directories and then select <strong>New</strong> from the context menu. Select the <strong>CertificationCampaignController</strong> workflow.</p>
</li>
<li>
<p>The workflow wizard starts and guides you through the configuration options. In the first step, make sure you check <strong>Is Active</strong>. You also need to set the <strong>Cluster</strong> and <strong>Domain</strong> fields. For this tutorial, it&#8217;s sufficient to specify <strong>*</strong> for both fields. After the last wizard step, click <strong>Finish</strong> to save the new workflow in the My-Company scenario.</p>
</li>
<li>
<p>Now restart the Java-based Server so that it loads the configuration for the new workflow and is prepared to start it.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CreatingthePrivilegeCertificationCampaign"><a class="anchor" href="#Tutorials-CreatingthePrivilegeCertificationCampaign"></a>Creating the Privilege Certification Campaign</h4>
<div class="paragraph">
<p>As described in the DirX Identity Use Case Document <em>Certification Campaigns,</em> there are many ways to set up and execute certification campaigns. In this tutorial exercise, we use a simple approach: we select the privileges to be certified with search criteria and then set a corresponding filter in a newly created Certification Campaign entry.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start DirX Identity Manager and log in to the <strong>Provisioning</strong> view group.</p>
</li>
<li>
<p>To create the certification campaign, select <strong>Provisioning</strong> &#8594; <strong>Certification</strong> <strong>Campaigns</strong>. Right click the <strong>Certification</strong> <strong>Campaign</strong> folder and the select <strong>New</strong> &#8594; <strong>Certification</strong> <strong>Campaign</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Name</strong>, enter <strong>Tutorial Privilege Certification</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Type</strong>, select <strong>Privilege</strong> <strong>certification</strong> from the list.</p>
</div>
<div class="paragraph">
<p>In <strong>Owner</strong>, select user <strong>Hungs</strong> <strong>Olivier</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Description</strong>, enter <strong>Campaign Certification for Trainer privilege</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Apply</strong> <strong>Changes</strong>, select <strong>Revoke all manually assigned privileges that are rejected or left uncertified</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Status</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>State</strong>, select <strong>Campaign is in preparation (PREPARING)</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Start</strong> <strong>Date</strong>, select the yesterdays date from the calendar control. This selection ensures that the Campaign Controller workflow will start the campaign immediately after you start the workflow.</p>
</div>
<div class="paragraph">
<p>In <strong>Approval Period</strong>, set <strong>Year(s)</strong> and <strong>Month(s)</strong> to <strong>0</strong> and set <strong>Day(s)</strong> to <strong>2</strong>. These fields define the duration of the campaign’s approval period; in this case, one day.</p>
</div>
<div class="paragraph">
<p>Delete any value from <strong>Due Date</strong> if one is present. <strong>Due</strong> <strong>Date</strong> is automatically calculated and set when the campaign starts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>User</strong> <strong>filter</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Filter</strong> <strong>Base</strong>, enter <strong>cn=Users,cn=My-Company</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>User</strong> <strong>Filter</strong>, enter <strong>objectClass="dxrUser"</strong>. This query will return all users in the My-Company domain.</p>
</div>
<div class="paragraph">
<p>If risk management is enabled in the domain configuration, the certification campaign can use this information to create a certification campaign for users with High Risk. To use risk assessment values, we can add another search attribute to our User Filter that will check the <strong>dxrRskLevel</strong> attribute value for the following values: <strong>0</strong> (Normal Risk), <strong>1</strong> (Low Risk), <strong>2</strong> (Medium Risk) and <strong>3</strong> (High Risk). The following query will return all users with <strong>2</strong> (Medium Risk) or <strong>3</strong> (High Risk):</p>
</div>
<div class="paragraph">
<p>(&amp;(objectClass=dxrUser)(dxrRskLevel&gt;=2))</p>
</div>
<div class="paragraph">
<p>In this case, information about each user&#8217;s risk is available in Web Center pages during the approval period.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Privilege</strong> <strong>filter</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Filter</strong> <strong>Base</strong>, enter <strong>cn=Trainer,cn=General,cn=Corporate Roles, cn=RoleCatalogue,cn=My-Company</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Privileges</strong> <strong>Filter</strong>, enter <strong>objectClass="dxrRole"</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>OK</strong> to commit the changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We have selected the Trainer role for the privilege certification campaign. Now the certification campaign is ready to be run.</p>
</div>
<div class="paragraph">
<p>Note: you can find a demonstration of how to use the Notifications feature in the section "Certifying a User" &#8594; "Configuring the Certification Campaign". We won&#8217;t be using this feature in this tutorial exercise.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-StartingtheCertificationCampaign"><a class="anchor" href="#Tutorials-StartingtheCertificationCampaign"></a>Starting the Certification Campaign</h4>
<div class="paragraph">
<p>Because the campaign start date is set in the past, the campaign is ready to start:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Global View of the Connectivity view group, select the workflow line between the two Identity Store connected directories.</p>
</li>
<li>
<p>Select the <strong>CertificationCampaignController</strong> workflow and then select <strong>Run</strong> from the context menu. The workflow starts the campaign and creates the necessary certification tasks in the campaign folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now the privilege certification is running and we can perform the certification.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CertifyingthePrivilege"><a class="anchor" href="#Tutorials-CertifyingthePrivilege"></a>Certifying the Privilege</h4>
<div class="paragraph">
<p>There are two options for performing the certification: with DirX Identity Web Center or with DirX Identity Business User Interface. We’ll demonstrate both options in the next sections.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CertifyingthePrivilegewithDirXIdentityWebCenter"><a class="anchor" href="#Tutorials-CertifyingthePrivilegewithDirXIdentityWebCenter"></a>Certifying the Privilege with DirX Identity Web Center</h5>
<div class="paragraph">
<p>We act as Marcella Costello and perform the certification task in the Web Center. Marcella is informed about this task via email if the <strong>Approval</strong> <strong>Start</strong> notification is set to active inside the certification campaign.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Costello Marcella</strong>.</p>
</li>
<li>
<p>Select the campaign <strong>Tutorial Privilege Certification</strong> from the <strong>My Certification Campaigns</strong> list.</p>
</li>
<li>
<p>From <strong>Certification Campaign - Details</strong>, select the <strong>Trainer</strong> entry.</p>
</li>
<li>
<p>For <strong>Blander</strong> <strong>Dyan</strong>, select <strong>Accept</strong>.</p>
</li>
<li>
<p>For <strong>Kubalke Leo</strong> and <strong>Straub</strong> <strong>Hatty</strong>, reject the role by selecting <strong>Reject</strong>.</p>
</li>
<li>
<p>For <strong>Telfer</strong> <strong>Laura</strong>, do not select anything.</p>
</li>
<li>
<p>Click <strong>Save</strong> <strong>changes</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now this role is ready to apply changes.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CertifyingthePrivilegeswithDirXIdentityBusinessUserInterface"><a class="anchor" href="#Tutorials-CertifyingthePrivilegeswithDirXIdentityBusinessUserInterface"></a>Certifying the Privileges with DirX Identity Business User Interface</h5>
<div class="paragraph">
<p>We act as Marcella Costello and perform the certification tasks in the DirX Identity Business User Interface. Marcella is informed about this task via email if the Approval Start notification is set to active inside the certification campaign.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to the Business User Interface as <strong>Costello</strong> <strong>Marcella</strong>.</p>
</li>
<li>
<p>Click the <strong>My</strong> <strong>Certifications</strong> widget on the Business User Interface home page.</p>
</li>
<li>
<p>Select the campaign <strong>Tutorial</strong> <strong>Privilege</strong> <strong>Certification</strong> from the certification campaigns list.</p>
</li>
<li>
<p>From the <strong>Certification</strong> <strong>Campaign</strong> – <strong>Tutorial</strong> <strong>Privilege</strong> <strong>Certification</strong> list, select the <strong>Trainer</strong> entry.</p>
</li>
<li>
<p>For <strong>Blander</strong> <strong>Dyan</strong>, check <strong>Approve</strong>.</p>
</li>
<li>
<p>For <strong>Kubalke</strong> <strong>Leo</strong> and <strong>Straub</strong> <strong>Hatty</strong>, reject the role by checking <strong>Reject</strong>.</p>
</li>
<li>
<p>For <strong>Telfer</strong> <strong>Laura</strong>, do not select anything.</p>
</li>
<li>
<p>Click <strong>Save</strong> <strong>changes</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now this role is ready to apply changes.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-MonitoringtheCampaign"><a class="anchor" href="#Tutorials-MonitoringtheCampaign"></a>Monitoring the Campaign</h4>
<div class="paragraph">
<p>We can check the certification campaign status in DirX Identity Manager; the <strong>Trainer</strong> entry is still in <strong>RUNNING</strong> state because user <strong>Telfer</strong> <strong>Laura</strong> was not certified.</p>
</div>
<div class="paragraph">
<p>Return to Web Center and accept the role for this user and set <strong>End</strong> <strong>date</strong> for this role to the current date + 3 days. This time click <strong>Save</strong> <strong>changes</strong> <strong>and</strong> <strong>finish</strong> <strong>certification</strong> to finish this certification entry. Back in DirX Identity Manager, the <strong>Trainer</strong> entry is in state <strong>APPROVAL</strong>.<strong>FINISHED</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-FinishingtheCampaign"><a class="anchor" href="#Tutorials-FinishingtheCampaign"></a>Finishing the Campaign</h4>
<div class="paragraph">
<p>Now you can finish the campaign by changing the due date in the campaign entry (we do this because we want to finish the tutorial on the same day):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to the campaign entry <strong>Tutorial Privilege Certification</strong> and select the <strong>Status</strong> tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and change <strong>Due</strong> <strong>Date</strong> to today.</p>
</li>
<li>
<p>Click <strong>Save</strong> to commit the changes.</p>
</li>
<li>
<p>Run the <strong>CertificationCampaignController</strong> workflow in the Connectivity view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the workflow has finished, check the campaign status. The Privilege Certification task for the Trainer role should be in the state <strong>FINISHED</strong> and the certification campaign should be in the state <strong>Campaign finished successfully (SUCCEEDED)</strong>.</p>
</div>
<div class="paragraph">
<p>We can use DirX Identity to check the campaign results:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For users <strong>Kubalke</strong> <strong>Leo</strong> (Product Testing) and <strong>Straub</strong> <strong>Hatty</strong> (Sales), the role <strong>Trainer</strong> was removed.</p>
</li>
<li>
<p>For users <strong>Blander</strong> <strong>Dyan</strong> (Professional Services) and <strong>Telfer</strong> <strong>Laura</strong> (Human Resources), the role Trainer is assigned. For user <strong>Telfer</strong> <strong>Laura</strong>, the role is set to be removed after <strong>current</strong> <strong>date</strong> <strong>+ 3 days</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-CertifyingaUser"><a class="anchor" href="#Tutorials-CertifyingaUser"></a>Certifying a User</h3>
<div class="paragraph">
<p>As an alternative to certifying privileges, certification can be based on users. This section shows how to set up a certification campaign for all users working in the Finance department and one other user. Note that certification campaigns for users are completely different from the campaigns for privileges.</p>
</div>
<div class="paragraph">
<p>In this tutorial, we&#8217;ll demonstrate how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure the certification campaign function</p>
</li>
<li>
<p>Create a certification campaign</p>
</li>
<li>
<p>Start the certification campaign</p>
</li>
<li>
<p>Monitor a running certification campaign</p>
</li>
<li>
<p>Analyze the result of a finished certification campaign</p>
</li>
<li>
<p>Produce reports for a certification campaign</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more details about user certification campaigns and more complex scenarios, see the DirX Identity Use Case Document <em>Certification Campaigns</em>.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingHowaCertificationCampaignWorks"><a class="anchor" href="#Tutorials-UnderstandingHowaCertificationCampaignWorks"></a>Understanding How a Certification Campaign Works</h4>
<div class="paragraph">
<p>A certification campaign consists of the following phases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating the certification campaign. A campaign entry is created and configured with all mandatory attributes.</p>
</li>
<li>
<p>Running the certification campaign. After the campaign is started, the certification tasks are created. The approvers are notified and they must certify - approve or reject - privilege assignments.</p>
</li>
<li>
<p>Applying the results after the campaign is finished. Depending on the configuration, the rejected and/or ignored privilege assignments are deleted. The certification owner can run a report to document the certification result.</p>
</li>
<li>
<p>Physically deleting all the campaign entries from the Identity domain after the configurable status expiration date is reached.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ConfiguringtheCertificationCampaign.1"><a class="anchor" href="#Tutorials-ConfiguringtheCertificationCampaign.1"></a>Configuring the Certification Campaign</h4>
<div class="paragraph">
<p>First, you need to configure the Certification Campaign feature and perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make sure the SMTP service is configured (it&#8217;s required for sending the campaign notifications): In the Provisioning view, browse to <strong>Workflows</strong> &#8594; <strong>Configuration</strong> &#8594; <strong>Services</strong> &#8594;<strong>SMTP</strong>. In <strong>SMTP</strong> <strong>host</strong>, provide an appropriate SMTP host address (for example, <strong>localhost</strong> if you have a local SMTP server). For the purpose of this tutorial, you can update the <strong>Map</strong> <strong>mail</strong> <strong>address</strong> field. Enter <strong>dummy</strong> to suppress all notification emails or enter a specific email address; for example, your own address to send all the notifications to your mailbox rather than to the calculated ones. Note that you should clear this field in a production environment.</p>
</li>
<li>
<p>Set up a schedule for the Certification Campaign Controller workflow. For the purpose of this tutorial, we do not need a schedule for this workflow, because we&#8217;ll start it manually. For production, you should configure a schedule for the workflow and make sure that it runs at least once a day.</p>
</li>
<li>
<p>Make sure the Java-based Server starts one thread for the Certification Campaign Controller workflow: In the Connectivity view, browse to <strong>Configuration</strong> &#8594; <strong>DirX Identity Servers</strong> &#8594; <strong>Java</strong> <strong>Servers</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>My-Company-S1-*<em>yourhost</em>. Click *Edit</strong>. In the Resource Families tab, move <strong>CertificationCampaign</strong> from <strong>Available</strong> down to <strong>Selected</strong>. Change the number of threads to <strong>1</strong>. Click <strong>Save</strong>.</p>
</li>
<li>
<p>Configure and enable the Certification Campaign Controller workflow: In the Connectivity Global View, select the <strong>My</strong>-<strong>Company</strong> scenario. Select the workflow line between the two Identity Store connected directories and then select <strong>New</strong> from the context menu. After you have selected the Certification Campaign Controller workflow, the workflow wizard starts and guides you through the configuration options. In the first step, make sure you check <strong>Is</strong> <strong>Active</strong>. You also need to set the <strong>Cluster</strong> and <strong>Domain</strong> fields. For this tutorial, it&#8217;s sufficient to specify <strong>*</strong> for both fields. After the last step, click <strong>Finish</strong> to save the new workflow in the <strong>My</strong>-<strong>Company</strong> scenario.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Restart the Java-based Server so that it loads the configuration for the new workflow and is prepared to start it.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CreatingtheUserCertificationCampaign"><a class="anchor" href="#Tutorials-CreatingtheUserCertificationCampaign"></a>Creating the User Certification Campaign</h4>
<div class="paragraph">
<p>The goal of this certification campaign is to certify the manual assignments for the Finances department and for two users from Customers: Bellosa Marco and Maskery Guy.</p>
</div>
<div class="paragraph">
<p>To create the certification campaign, select <strong>Provisioning</strong> &#8594; <strong>Certification</strong> <strong>Campaigns</strong>. Right click the Certification Campaigns folder and then select <strong>New</strong> &#8594; <strong>CertificationCampaign</strong>.</p>
</div>
<div class="paragraph">
<p>A wizard opens and lets you enter the necessary data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Name</strong>, enter <strong>Tutorial User Certification</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Type</strong>, select <strong>User certification</strong> from the list.</p>
</div>
<div class="paragraph">
<p>In <strong>Owner</strong>, select user <strong>Hungs</strong> <strong>Oliver</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Description</strong>, enter <strong>Campaign Certification for Users in department Finances and some selected customers</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Apply</strong> <strong>Changes</strong>, select <strong>Revoke only rejected privileges that were manually assigned</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Status</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>State</strong>, select <strong>Campaign is in preparation (PREPARING)</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Start</strong> <strong>Date</strong>, select <strong>yesterday</strong> from the calendar control. This selection ensures that the campaign controller workflow will start the campaign immediately after you start the workflow.</p>
</div>
<div class="paragraph">
<p>In <strong>Approval</strong> <strong>Period</strong>, set <strong>Year(s)</strong> and <strong>Month(s)</strong> to <strong>0</strong> and set <strong>Day(s)</strong> to <strong>2</strong>. These fields establish the duration of the campaign&#8217;s approval period; in this case, one day.</p>
</div>
<div class="paragraph">
<p>Delete any value from <strong>Due</strong> <strong>Date</strong>, if one is present. <strong>Due</strong> <strong>Date</strong> is automatically calculated and set when the campaign starts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>User</strong> <strong>filter</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Filter</strong> <strong>Base</strong>, enter <strong>cn=Users,cn=My-Company</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>User</strong> <strong>Filter</strong>, enter <strong>(&amp;(objectClass=dxrUser)(|(ou=Finances)(cn=Bellosa</strong>)(cn=Maskery*)))*. This query will return all users in the Finances department and the users Bellosa and Maskery.</p>
</div>
<div class="paragraph">
<p>If risk management is enabled in the domain configuration, the certification campaign can use this information to create a certification campaign for users with High Risk. To use risk management values, we can add another search attribute to our User Filter that will check the <strong>dxrRskLevel</strong> attribute value for following values: <strong>0</strong> (Normal Risk), <strong>1</strong> (Low Risk), <strong>2</strong> (Medium Risk) and <strong>3</strong> (High Risk). The following query will return all users with <strong>2</strong> (Medium Risk) or <strong>3</strong> (High Risk):</p>
</div>
<div class="paragraph">
<p>(&amp;(objectClass=dxrUser)(|(ou=Finances)(cn=Bellosa*)(cn=Maskery*))(dxrRskLevel&gt;=2))</p>
</div>
<div class="paragraph">
<p>In this case, information about each user&#8217;s risk is available in Web Center pages during the approval period.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Privilege</strong> <strong>filter</strong> tab:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Filter</strong> <strong>Base</strong>, enter <strong>cn=RoleCatalogue,cn=My-Company</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Privileges</strong> <strong>Filter</strong>, enter <strong>(objectClass=dxrRole)</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>OK</strong> to commit the changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll enable several notifications for this campaign. In the newly created Tutorial User Certification campaign, go to the Notifications container and check <strong>Is</strong> <strong>Active</strong> in the General tab for the following entries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Campaign Start - this notification will be sent to the Certification Campaign owner, who is the user Hungs Oliver, when the Certification Campaign starts. The email contains information about campaign such: name, description, start date, due date, and other information.</p>
</li>
<li>
<p>No Approver - this notification will be sent to the Certification Campaign owner (by default) right after the campaign starts and all certification entries are created. The email contains a list of certifications which are not started (RUNNING state), and are moved to failed prepare (FAILED.PREPARE state). The reason for this notification is the missing manager field for the subject of the certification (the manager attribute in LDAP). The email recipient can use this content to fix the failed prepared certification and then restart them. We&#8217;ll describe how to do this in the next sections.</p>
</li>
<li>
<p>Approval Start - this notification will be sent to all Certification Campaign participants with the approver role. The email is sent at the start of campaign and contains the list with certifications to be approved (simple and attributed assignments). This email is sent once; during the approval period, the Approval Remind notification is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The content of these default notifications will provide sufficient information for the tutorial emails.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-StartingtheCertificationCampaign.1"><a class="anchor" href="#Tutorials-StartingtheCertificationCampaign.1"></a>Starting the Certification Campaign</h4>
<div class="paragraph">
<p>Before you start the campaign:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Perform a manual privilege assignment that can easily be rejected in the campaign: In <strong>Provisioning</strong> &#8594; <strong>Users</strong>, assign the role <strong>Test</strong> <strong>Tasks</strong> to the user <strong>Bellosa</strong> <strong>Marco</strong> in the folder <strong>Customers</strong> &#8594; <strong>Mercato</strong> <strong>Aurum</strong>.</p>
</li>
<li>
<p>Modify the preferred language of <strong>Hungs</strong> <strong>Olivier</strong> to English: in <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Hungs</strong> <strong>Olivier</strong> &#8594; <strong>Communication</strong>, set <strong>Preferred</strong> <strong>Language</strong> from <strong>German</strong> to <strong>English</strong> so that notifications regarding the certification campaign are sent in English. Make sure you record the previous value for this field before you modify it. You will need to reset <strong>Hungs</strong> <strong>Olivier</strong>'s preferred language to this value at the end of this tutorial to avoid side-effects when running other tutorials.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the campaign start date is set in the past, the campaign is ready to start: in the Global View of the Connectivity view group, select the workflow line between the two Identity Store connected directories. Select the <strong>CertificationCampaignController</strong> workflow and then select <strong>Run</strong> from the context menu. The workflow will then start the campaign and create the necessary certification tasks in the campaign folder.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-MonitoringtheCertificationCampaign"><a class="anchor" href="#Tutorials-MonitoringtheCertificationCampaign"></a>Monitoring the Certification Campaign</h4>
<div class="paragraph">
<p>After the Certification Campaign Controller workflow starts the campaign, the folder for the certification campaign has the following structure:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501907609.gif" alt="attachments/502005954/501907609" width="224"></span></p>
</div>
<div class="paragraph">
<p>The workflow creates a new folder <strong>User</strong> <strong>Certification</strong> with a list of certification task entries: one for each user that matches the user filter configured in the campaign entry.</p>
</div>
<div class="paragraph">
<p>The <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong> campaign entry has now changed:</p>
</div>
<div class="paragraph">
<p>In the Status tab, the <strong>State</strong> has been changed to <strong>Campaign is running (RUNNING)</strong>; the campaign has been started and is not yet finished.</p>
</div>
<div class="paragraph">
<p>In the Logs tab, we see some log messages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A warning for user <strong>Bellosa</strong> <strong>Marco</strong>. The Certification Campaign Controller workflow didn&#8217;t find an approver for this user and the state of the certification task is set to <strong>FAILED.PREPARE</strong>. Note that the default implementation selects the manager of a user as the approver.</p>
</li>
<li>
<p>A warning for user <strong>Maskery</strong> <strong>Guy</strong> for the same reason.</p>
</li>
<li>
<p>Because <strong>Status</strong> <strong>Expiration</strong> <strong>Date</strong> was not set at the start of campaign, a default Status Expiration Date will be calculated at the end of the campaign and will be <strong>End Date</strong> plus 30 days.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each user, a certification task is created. By default, the workflow selects the manager of a user as the approver. Especially note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The certification for <strong>Abele</strong> <strong>Marc</strong> is running correctly with <strong>Dalmar</strong> <strong>Christopher</strong> as approver, with <strong>DXR</strong> <strong>Auditors</strong> as Simple Assignments.</p>
</li>
<li>
<p>The certification for <strong>Bellosa</strong> <strong>Marco</strong> is in status <strong>FAILED.PREPARE</strong>. The reason is explained in the Log entry of the Status tab: this user does not have a manager and therefore no approver was found. To fix this problem, click the Edit button. In the Approvers list in the Approvers tab, select <strong>Hungs</strong> <strong>Olivier</strong>. In the Status tab, change the <strong>Status</strong> to <strong>RETRY.PREPARE</strong> and then click <strong>Save</strong>. Now run the Certification Campaign controller again. Certification changes to <strong>RUNNING</strong> status.</p>
</li>
<li>
<p>The certification for <strong>Dalmar</strong> <strong>Christopher</strong> is running correctly with <strong>Hungs</strong> <strong>Olivier</strong> as approver.</p>
</li>
<li>
<p>The certification for <strong>Maskery</strong> <strong>Guy</strong> is in status <strong>FAILED.PREPARE</strong>. The reason is explained in the Logs entry of the Status tab: this user does not have any manual assignments. Automatic assignments, such as inherited or obtained by provisioning rules, are not certified.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because Notifications templates are available for this campaign, the following email notifications are sent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>Campaign</strong> <strong>Start</strong> notification for the campaign owner; in our tutorial, this is <strong>Hungs</strong> <strong>Olivier</strong>. This email contains details about the campaign such as: User Filter Base, User Filter, Start Date, Due Date, and so on.</p>
</li>
<li>
<p>A <strong>No</strong> <strong>Approver</strong> notification for campaign owner; in our tutorial, to <strong>Hungs</strong> <strong>Olivier</strong>. This email informs about users without approvers; in our tutorial, <strong>Bellosa</strong> <strong>Marco</strong> and <strong>Maskery</strong> <strong>Guy</strong>.</p>
</li>
<li>
<p>Two <strong>Approval</strong> <strong>Start</strong> notifications for approvers <strong>Hungs</strong> <strong>Olivier</strong> and <strong>Dalmar</strong> <strong>Christopher</strong>. These emails contain details about the campaign and about certification tasks subjects (the users to be certified), their Attributed Assignments and Simple Assignments.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following figure lists these notifications for <strong>Hungs</strong> <strong>Olivier</strong>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501776582.gif" alt="attachments/502005954/501776582" width="606"></span></p>
</div>
<div class="paragraph">
<p>Because user <strong>Hungs</strong> <strong>Olivier</strong> has English as his preferred language (<strong>Provisioning</strong>&#8594; <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Hungs</strong> <strong>Olivier</strong> &#8594; <strong>Communication &#8594; Preferred</strong> <strong>Language</strong>), notifications will be sent in English. For user <strong>Dalmar</strong> <strong>Christopher</strong>, the preferred language is set to German.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CertifyingtheUsers"><a class="anchor" href="#Tutorials-CertifyingtheUsers"></a>Certifying the Users</h4>
<div class="paragraph">
<p>Because the campaign is in the state <strong>Campaign is running (RUNNING)</strong>, you can now certify the selected users, which is to accept or reject their manual assignments. You can do this with DirX Identity Web Center or with DirX Identity Business User Interface. In the next sections, we&#8217;ll demonstrate how to use both options to perform this task. You can choose either option, but don’t perform them both.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CertifyingtheUserswithDirXIdentityWebCenter"><a class="anchor" href="#Tutorials-CertifyingtheUserswithDirXIdentityWebCenter"></a>Certifying the Users with DirX Identity Web Center</h5>
<div class="paragraph">
<p>Because the campaign is in the state <strong>Campaign is running (RUNNING)</strong>, you can now open Web Center to certify the selected users, which is to accept or reject their manual assignments.</p>
</div>
<div class="paragraph">
<p>One approver is <strong>Dalmar</strong> <strong>Christopher</strong>. Log in to Web Center as <strong>Dalmar</strong> <strong>Christopher</strong> with the default password <strong>dirx</strong>. The home page shows the currently running certification campaigns where <strong>Dalmar</strong> <strong>Christopher</strong> has at least one task.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>. The list of users that <strong>Dalmar</strong> <strong>Christopher</strong> needs to certify is displayed.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501645459.gif" alt="attachments/502005954/501645459" width="525"></span></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dalmar</strong> <strong>Christopher</strong> has two certification tasks: one for user <strong>Abele</strong> <strong>Marc</strong> and one for <strong>Tinker</strong> <strong>Boris</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Abele</strong> <strong>Marc</strong> entry. The following figure shows the result:</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501088462.gif" alt="attachments/502005954/501088462" width="525"></span></p>
</div>
</li>
<li>
<p>Check <strong>Accept</strong> and then click <strong>Save</strong> <strong>changes and finish certification</strong>.</p>
</li>
<li>
<p>For user <strong>Tinker</strong> <strong>Boris</strong>, apply the same actions: accept the current role as <strong>DXR</strong> <strong>Audit</strong> <strong>Administrator</strong>.</p>
</li>
<li>
<p>Select <strong>Accept</strong> and then click <strong>Save changes and finish certification</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now log out from Web Center and then log in as <strong>Hungs</strong> <strong>Olivier</strong> with the default password <strong>dirx</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Follow the same steps as you did for <strong>Dalmar</strong> <strong>Christopher</strong>. <strong>Hungs</strong> <strong>Olivier</strong> has two users to certify: <strong>Bellosa</strong> <strong>Marco</strong> and <strong>Dalmar</strong> <strong>Christopher</strong>.</p>
</li>
<li>
<p>Ignore all the privileges for <strong>Dalmar</strong> <strong>Christopher</strong> and leave them uncertified.</p>
</li>
<li>
<p>For <strong>Bellosa</strong> <strong>Marco</strong>, reject the <strong>Test</strong> <strong>Tasks</strong> privilege and then click <strong>Save</strong> <strong>changes</strong> <strong>and</strong> <strong>finish</strong> <strong>certification</strong>.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501285073.gif" alt="attachments/502005954/501285073" width="476"></span></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In DirX Identity Manager, check the campaign <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Tutorial User Certification</strong> is in the state <strong>Campaign is running (RUNNING)</strong>.</p>
</li>
<li>
<p>All approved certifications are now in the state <strong>APPROVAL.FINISHED</strong>.</p>
</li>
<li>
<p>The <strong>Maskery</strong> <strong>Guy</strong> certification is still in the state <strong>FAILED.PREPARE</strong> because there were no manual assignments to approve, and no approver assigned.</p>
</li>
<li>
<p>The <strong>Dalmar</strong> <strong>Christopher</strong> certification is in the state <strong>RUNNING</strong> because no approver performed any action for certifying this user.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CertifyingtheUserswithDirXIdentityBusinessUserInterface"><a class="anchor" href="#Tutorials-CertifyingtheUserswithDirXIdentityBusinessUserInterface"></a>Certifying the Users with DirX Identity Business User Interface</h5>
<div class="paragraph">
<p>Because the campaign is in the state <strong>Campaign is running (RUNNING)</strong>, you can now open Business User Interface to certify selected users, which is to accept or reject their manual assignments.</p>
</div>
<div class="paragraph">
<p>One approver is Dalmar Christopher. Log in to the Business User Interface as <strong>Dalmar</strong> <strong>Christopher</strong> with the default password <strong>dirx</strong>. The home page shows the current running certification campaigns where Dalmar Christopher has at least one task.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the My Certification widget.</p>
</li>
<li>
<p>Select <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong> from the certification campaign lists. The list of users that Dalmar Christopher needs to certify is displayed.</p>
</li>
<li>
<p>Dalmar Christopher has two certification tasks: one for user <strong>Abele</strong> <strong>Marc</strong> and one for <strong>Tinker</strong> <strong>Boris</strong>.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501285077.gif" alt="attachments/502005954/501285077" width="525"></span></p>
</div>
</li>
<li>
<p>Click the <strong>Abele</strong> <strong>Marc</strong> entry. The following figure shows the result:</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501514370.gif" alt="attachments/502005954/501514370" width="525"></span></p>
</div>
</li>
<li>
<p>Check <strong>Approve</strong> and then <strong>click</strong> <strong>Save</strong> changes and finish certification.</p>
</li>
<li>
<p>For user <strong>Tinker</strong> <strong>Boris</strong>, apply the same actions: approve the current role as DXR Audit Administrator.</p>
</li>
<li>
<p>Check <strong>Approve</strong> and then click <strong>Save</strong> <strong>changes</strong> and finish certification.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now log out from Business User Interface and log in as <strong>Hungs</strong> <strong>Olivier</strong> with the default password <strong>dirx</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Follow the same steps as you did for <strong>Dalmar</strong> <strong>Christopher</strong>. <strong>Hungs</strong> <strong>Olivier</strong> has two users to certify: <strong>Bellosa</strong> <strong>Marco</strong> and <strong>Dalmar</strong> <strong>Christopher</strong>.</p>
</li>
<li>
<p>Ignore all the privileges for <strong>Dalmar</strong> <strong>Christopher</strong> and leave them uncertified.</p>
</li>
<li>
<p>For <strong>Bellosa</strong> <strong>Marco</strong>, reject the <strong>Test</strong> <strong>Tasks</strong> privilege and then click <strong>Save</strong> <strong>changes</strong> and finish certification.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In DirX Identity Manager, check the campaign <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong> is in the state Campaign is running (<strong>RUNNING</strong>).</p>
</li>
<li>
<p>All approved certifications are now in the state <strong>APPROVAL.FINISHED</strong>.</p>
</li>
<li>
<p>The <strong>Maskery</strong> <strong>Guy</strong> certification is still in the state <strong>FAILED.PREPARE</strong> because there no manual assignments to approve, and no approver assigned.</p>
</li>
<li>
<p>The <strong>Dalmar</strong> <strong>Christopher</strong> certification is in the state <strong>RUNNING</strong> because no approver performed any action for certifying this user.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-FinishingtheCampaign.1"><a class="anchor" href="#Tutorials-FinishingtheCampaign.1"></a>Finishing the Campaign</h4>
<div class="paragraph">
<p>Now you can finish the campaign by changing the Due Date in the campaign entry (we do this because we want to finish the tutorial on the same day):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to the campaign entry <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong> and select the Status tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and change <strong>Due</strong> <strong>Date</strong> to today.</p>
</li>
<li>
<p>Click <strong>Save</strong> to commit the changes.</p>
</li>
<li>
<p>Run the <strong>CertificationCampaignController</strong> workflow from the <strong>Connectivity</strong> view group.<br>
After the workflow has finished, check the campaign status. All the certification tasks should be in the state <strong>FINISHED</strong> except for the <strong>FAILED</strong> one and the certification campaign should be in the state <strong>Campaign finished successfully (SUCCEEDED)</strong>.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/502399127.gif" alt="attachments/502005954/502399127" width="290"></span></p>
</div>
</li>
<li>
<p>In the <strong>Provisioning</strong> view group, select the Certification Campaigns view and then select the campaign <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>.<br>
The <strong>End</strong> <strong>Date</strong> is set to the current date.<br>
Because we did not explicitly set the <strong>Status</strong> <strong>Expiration</strong> <strong>Date</strong> field during the campaign, the value was set by the Certification Campaign controller as <strong>End Date</strong> plus 30 days. After the campaign status expires, the campaign will be automatically moved to the <strong>Campaign is marked for deletion (DELETED)</strong> state and deleted later on by the Cleanup Objects workflow.</p>
</li>
<li>
<p>Underneath the campaign container, browse to the certification for <strong>Bellosa</strong> <strong>Marco</strong>. The <strong>Approvers</strong> tab shows <strong>Hungs</strong> <strong>Olivier</strong>.</p>
</li>
<li>
<p>The <strong>Attributed</strong> <strong>Assignments</strong> tab is empty. <strong>Bellosa</strong> <strong>Marco</strong> had no assignments with either role parameters or end date.</p>
</li>
<li>
<p>The <strong>Simple</strong> <strong>Assignments</strong> tab shows that the <strong>Test</strong> <strong>Tasks</strong> role has been rejected.</p>
</li>
<li>
<p>Navigate to the user <strong>Bellosa</strong> <strong>Marco</strong> in the folder <strong>Customers</strong> &#8594; <strong>Mercato</strong> <strong>Aurum</strong> and check that the role <strong>Test</strong> <strong>Tasks</strong> has been removed.</p>
</li>
<li>
<p>Return to the <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong> campaign and select the certification for <strong>Dalmar</strong> <strong>Christopher</strong>.</p>
</li>
<li>
<p>All assignments in the tabs Attributed Assignments and Simple Assignments are in the <strong>Not</strong> <strong>Certified</strong> list. If you check the user entry in the folder <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Finances</strong>, you&#8217;ll see that all these assignments still exist. This is correct because the <strong>Revoke</strong> <strong>privileges</strong> <strong>settings</strong> field in the campaign requested to remove only the rejected assignments and leave the assignments that were not certified as they are.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-GeneratingaCertificationCampaignReport"><a class="anchor" href="#Tutorials-GeneratingaCertificationCampaignReport"></a>Generating a Certification Campaign Report</h4>
<div class="paragraph">
<p>You can produce a report at any time during a running campaign:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Provisioning view group, select the Certification Campaigns view and then browse to <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>.</p>
</li>
<li>
<p>Right click the campaign entry and then select <strong>Report</strong> from the context menu.</p>
</li>
<li>
<p>Select the report <strong>Campaign</strong> <strong>with</strong> <strong>all</strong> <strong>properties</strong>.</p>
</li>
<li>
<p>Set the following fields:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>Search</strong> <strong>base</strong>, select <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Type</strong>, select <strong>HTML</strong>.</p>
</div>
<div class="paragraph">
<p>Uncheck <strong>Output</strong> <strong>to</strong> <strong>viewer</strong>.</p>
</div>
<div class="paragraph">
<p>In <strong>Output</strong> <strong>file</strong>, select a location in which to save the report.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Run</strong> <strong>report</strong>.</p>
</li>
<li>
<p>Browse to the location where the report was saved and open the generated HTML report with your favorite web browser. You will see something like this:</p>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/502169797.gif" alt="attachments/502005954/502169797" width="525"></span></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-DeletingaCertificationCampaign"><a class="anchor" href="#Tutorials-DeletingaCertificationCampaign"></a>Deleting a Certification Campaign</h4>
<div class="paragraph">
<p>If you do not want to wait 30 days until the campaign has expired, you can change the <strong>Status</strong> <strong>Expiration</strong> <strong>Date</strong> and let the standard workflow delete the campaign tree:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Provisioning view group, select the Certification Campaigns view and then browse to <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong>.</p>
</li>
<li>
<p>Select the Status tab and then set <strong>Status Expiration Date</strong> to a date in the past (for example, <strong>yesterday</strong>).</p>
</li>
<li>
<p>In the Connectivity view group, navigate to the workflow <strong>CertificationCampaignController</strong> (<strong>Workflows</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity</strong> <strong>Store</strong>) and then run it via the context menu.</p>
</li>
<li>
<p>Return to the campaign in the Provisioning view group. You&#8217;ll see that the campaign <strong>Tutorial</strong> <strong>User</strong> <strong>Certification</strong> is now in the state <strong>Campaign is marked for deletion (DELETED)</strong>. This state is handled by the DirX Identity cleanupObjects workflow, which also evaluates the <strong>cleanupDeletedCertificationCampaigns</strong> rule from <strong>Provisioning</strong> &#8594; <strong>Policies</strong> &#8594; <strong>Rules</strong> &#8594; <strong>Default</strong>&#8594; <strong>Consistency</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have now completed the certification campaign tutorial. The last step is to reset the preferred language for user <strong>Hungs</strong> <strong>Olivier</strong> to the value you recorded before you changed it to English to avoid side-effects when running other tutorials. See the section "Starting the Certification Campaign" for instructions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-ApplyingAttributeModificationApproval"><a class="anchor" href="#Tutorials-ApplyingAttributeModificationApproval"></a>Applying Attribute Modification Approval</h3>
<div class="paragraph">
<p>In this section, we&#8217;ll demonstrate how attribute modification approval works. We&#8217;ll show you how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Activate attribute modification approval</p>
</li>
<li>
<p>Modify and activate a user attribute modification policy</p>
</li>
<li>
<p>Modify user attributes that require approval and examine the effects</p>
</li>
<li>
<p>Approve the attribute modification request and check the result</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Tutorials-ActivatingAttributeModificationApprovalChecking"><a class="anchor" href="#Tutorials-ActivatingAttributeModificationApprovalChecking"></a>Activating Attribute Modification Approval Checking</h4>
<div class="paragraph">
<p>First, we&#8217;ll activate attribute modification approval checking, if necessary. For performance reasons, this feature is deactivated by default in all customer domains. We&#8217;ll activate it using DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Domain</strong> <strong>Configuration</strong> view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager&#8217;s <strong>Provisioning</strong> view group.</p>
</li>
<li>
<p>Click <strong>Domain</strong> <strong>Configuration</strong> &#8594; <strong>My</strong>-<strong>Company</strong>.</p>
</li>
<li>
<p>In the <strong>RequestWorkflows</strong> tab, click <strong>Edit</strong>.</p>
</li>
<li>
<p>Check <strong>Attribute modification approval</strong>, if it&#8217;s not already checked.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To make this change effective within DirX Identity Manager itself, you must stop and then restart all of your running Manager instances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>File</strong> &#8594; <strong>Exit</strong> to close your Manager instance(s).</p>
</li>
<li>
<p>Start Manager again and log in to the <strong>Provisioning</strong> view.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ModifyinganAttributeModificationApprovalPolicy"><a class="anchor" href="#Tutorials-ModifyinganAttributeModificationApprovalPolicy"></a>Modifying an Attribute Modification Approval Policy</h4>
<div class="paragraph">
<p>Next, we&#8217;ll configure an existing attribute modification approval policy provided with DirX Identity in the sample domain.</p>
</div>
<div class="paragraph">
<p>The My-Company sample domain has a pre-configured attribute modification approval policy for user attributes that requires approval on changes to the attributes Location and Organizational Unit. We&#8217;ll configure and activate this policy now with DirX Identity Manager if necessary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Policies</strong>, click <strong>Attribute</strong> <strong>Policies</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>User</strong> - <strong>Location</strong> <strong>and</strong> <strong>Organization</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, click <strong>Edit</strong>, and then check <strong>Is active</strong> if it&#8217;s not already checked.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Click the <strong>Configuration</strong> tab. You can see the attributes that require approval listed in the <strong>Selected</strong> box. The <strong>Available</strong> box lists additional attributes you can select to require approval.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ModifyingtheUserAttributes"><a class="anchor" href="#Tutorials-ModifyingtheUserAttributes"></a>Modifying the User Attributes</h4>
<div class="paragraph">
<p>Now we&#8217;re ready to test the user attribute modification policy. We&#8217;ll use Franca Baretti in Marketing as our example, and use Web Center to change her Locality and Country attributes. We&#8217;ll log in as Nik Taspatch, since he is the user administrator for the Marketing Department:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In an Internet browser, start DirX Identity Web Center.</p>
</li>
<li>
<p>Log in as <strong>Taspatch</strong> <strong>Nik</strong> with the password <strong>dirx</strong>.</p>
</li>
<li>
<p>In <strong>Users</strong> &#8594; <strong>Select</strong> <strong>user</strong>, enter <strong>B</strong> in <strong>Search</strong> <strong>for</strong>, and then click <strong>Search</strong> to return a list of users whose names begin with "B".</p>
</li>
<li>
<p>Select <strong>Baretti</strong> <strong>Franca</strong> from the list. Web Center displays a user summary for Franca.</p>
</li>
<li>
<p>In the <strong>Users</strong> menu, click <strong>Modify user data</strong>.</p>
</li>
<li>
<p>Change the location to <strong>My</strong>-<strong>Company</strong> <strong>San</strong> <strong>Jose</strong> in <strong>Location</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>. Web Center displays Franca Baretti&#8217;s entry again.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-MonitoringtheAttributeApprovalProcess"><a class="anchor" href="#Tutorials-MonitoringtheAttributeApprovalProcess"></a>Monitoring the Attribute Approval Process</h4>
<div class="paragraph">
<p>We can use the Web Center to check the results of Nik Taspatch&#8217;s changes to Franca&#8217;s user attributes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First note that the location in Franca Baretti&#8217;s summary page is still <strong>My-Company Rome</strong>. But the page now includes a modification order list which shows that the modification is in approval (Since it may take some time to start the approval workflow, you may have to click the <strong>Refresh summary</strong> icon in the page repeatedly before you see the item.)</p>
</li>
<li>
<p>Now click <strong>Show</strong> <strong>subscription</strong> <strong>status</strong> in the <strong>Users</strong> menu.</p>
</li>
<li>
<p>The <strong>Select a Workflow</strong> page lists a workflow for Franca Baretti with the status <strong>Running</strong>. Click it.</p>
</li>
<li>
<p>Franca Baretti&#8217;s attribute modifications require approval from a member of My-Company&#8217;s Human Resources department. In <strong>Running activities</strong>, you can see the members of this department. Only one of these members needs to approve the request.</p>
</li>
<li>
<p>There is nothing more for Nik Taspatch to do, so click <strong>Logout</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can also use DirX Identity Manager&#8217;s Monitor View to see the progress of Franca Baretti&#8217;s attribute modification approval:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager&#8217;s <strong>Provisioning</strong> view.</p>
</li>
<li>
<p>Click <strong>Workflow</strong>, and then click <strong>Workflow</strong> &#8594; <strong>Monitor</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Users</strong> &#8594; <strong>Modify</strong> <strong>Location</strong> <strong>and</strong> <strong>Organization</strong>. In a production environment, this folder contains sub-folders named with dates; for example, <strong>2024</strong>-<strong>06</strong>-<strong>12</strong>. Each sub-folder contains status information about the request workflows that have executed on these dates.</p>
</li>
<li>
<p>In our case, we have one folder with today&#8217;s date. Click this folder, and then look for <strong>Baretti</strong> <strong>Franca</strong> in the list of workflows (it should be the only one there). Click it. In the General tab, Manager displays a graphical representation of the request workflow that is processing Franca&#8217;s attribute modification approval. The step <strong>Approval</strong> <strong>of</strong> <strong>Attribute</strong> <strong>Modifications</strong> is highlighted in grey to indicate that it is the activity that is currently being processed. You can double-click this step, and then click the Status Information tab. You can see the same participant list of Human Resources members who are allowed to approve the request.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ApprovingtheAttributeModificationRequest"><a class="anchor" href="#Tutorials-ApprovingtheAttributeModificationRequest"></a>Approving the Attribute Modification Request</h4>
<div class="paragraph">
<p>As mentioned before, Franca Baretti&#8217;s attribute modifications require approval from a member of My-Company&#8217;s Human Resources department. The request workflow&#8217;s approval activity will automatically notify each of these people by email about Franca Baretti&#8217;s attribute modification request. Only one of these people needs to approve the request in order for it to be successfully processed. In this topic, we&#8217;ll show how one of these people - Hans Berner - uses the Web Center to view and approve Nik Taspatch&#8217;s request. We can do this with or without email notification; it depends on how you set up email notification when you prepared to use the quick start. For this exercise, we&#8217;ll assume that email notification is off (the default). See the first exercise in this tutorial ("User Self-Registration") for more information about this feature.</p>
</div>
<div class="paragraph">
<p>To approve the request from Hans Berner&#8217;s <strong>Task</strong> <strong>list</strong> dialog:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the Web Center.</p>
</li>
<li>
<p>Enter <strong>Berner</strong> <strong>Hans</strong> in <strong>Name</strong> and the password <strong>dirx</strong>. (Remember that all persons in the sample domain are set up to have the same password.)</p>
</li>
<li>
<p>Click <strong>Log</strong> <strong>in</strong> (or press RETURN) to log in.</p>
</li>
<li>
<p>In <strong>Work List</strong>, click <strong>Task list</strong> and select the approval task. Web Center displays Franca Baretti&#8217;s data in the "Approval of Attribute Modification" dialog.</p>
</li>
<li>
<p>Enter <strong>F. Baretti transfer to San Jose, U.S. of America</strong> in <strong>Reason</strong>. (It&#8217;s good practice to provide a reason for your decision, especially if you reject a request.)</p>
</li>
<li>
<p>Click <strong>Accept</strong> to grant the request.</p>
</li>
<li>
<p>Note that <strong>Task</strong> <strong>list</strong> is now empty.</p>
</li>
<li>
<p>There is nothing more to do, so click <strong>Logout</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheResultofAttributeModificationApproval"><a class="anchor" href="#Tutorials-CheckingtheResultofAttributeModificationApproval"></a>Checking the Result of Attribute Modification Approval</h4>
<div class="paragraph">
<p>Next, we use the Web Center to check the results of the approval on Franca Baretti&#8217;s user data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter <strong>Taspatch</strong> <strong>Nik</strong> in <strong>Name</strong> and the password <strong>dirx</strong>. Click <strong>Log</strong> <strong>in</strong> or press RETURN.</p>
</li>
<li>
<p>In <strong>Users</strong> &#8594; <strong>Select</strong> <strong>user</strong>, enter <strong>B</strong> in <strong>Search</strong> <strong>for</strong>, and then click <strong>Search</strong> to return a list of users whose names begin with "B".</p>
</li>
<li>
<p>Select <strong>Baretti</strong> <strong>Franca</strong> from the list. The <strong>Display</strong> <strong>summary</strong> page is shown. Check that the location has now changed to <strong>My-Company San Jose</strong>. Also note that country and postal address have been changed accordingly since these attributes are mastered by location.</p>
</li>
<li>
<p>Select the <strong>Groups</strong> button near the bottom of the page.</p>
</li>
<li>
<p>Check that the Windows groups and accounts have moved from <strong>Windows</strong> <strong>Domain</strong> <strong>Europe</strong> to <strong>Windows</strong> <strong>Domain</strong> <strong>US</strong> (the assignments still exist, but are in the state DELETED or DISABLED). This shows that DirX Identity automatically re-configures the IT resources that Franca Baretti requires.</p>
</li>
<li>
<p>Click the <strong>Users</strong> &#8594; <strong>Show</strong> <strong>subscription</strong> status icon in the toolbar and then click the button <strong>Succeeded Workflows</strong>. The <strong>Select a Workflow</strong> list shows the workflow for Franca Baretti with the status <strong>Succeeded</strong>. Click the workflow. The <strong>Finished</strong> <strong>activities</strong> section shows the results of the approval.</p>
</li>
<li>
<p>There is nothing more to do, so click <strong>Logout</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also check the results with DirX Identity Manager:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Provisioning view group, click <strong>Workflows</strong>, and then click <strong>Workflows</strong> &#8594; <strong>Monitor</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Users</strong> &#8594; <strong>Modify</strong> <strong>Location</strong> <strong>and</strong> <strong>Organization</strong> &#8594; <em>today&#8217;s date</em> &#8594; <strong>Baretti</strong> <strong>Franca</strong>.</p>
</li>
<li>
<p>Double-click the <strong>Approval</strong> <strong>of</strong> <strong>Attribute</strong> <strong>Modifications-0</strong> step, and then click the Status Information tab. Here you can see that the approval request workflows for the other Human Resources members were successfully finished, since one member accepted the attribute modification.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-ScheduledPrivilegeAssignment"><a class="anchor" href="#Tutorials-ScheduledPrivilegeAssignment"></a>Scheduled Privilege Assignment</h3>
<div class="paragraph">
<p>Event-based privilege assignment changes access rights almost in real time and reduces time-consuming policy executions and privilege resolutions. Nevertheless, there may be reasons when these concepts are not sufficient; for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You want to run a cleanup policy execution and privilege resolution over all users from time to time to be sure that all users have the correct access rights.</p>
</li>
<li>
<p>You allow pure LDAP clients to change user entries. In this case, the service layer cannot produce events. The only way to solve this problem is to indicate the changed users by setting the dxrTBA flag (<strong>To</strong> <strong>Be</strong> <strong>Analyzed</strong> in the user interface) to TRUE and then subsequently run a scheduled or manually-triggered policy execution and privilege resolution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next sections, we demonstrate the second scenario.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-DisablingEvent-basedPrivilegeResolution"><a class="anchor" href="#Tutorials-DisablingEvent-basedPrivilegeResolution"></a>Disabling Event-based Privilege Resolution</h4>
<div class="paragraph">
<p>Before we proceed with this exercise, we need to stop the Java-based server to disable event-based privilege resolution, which runs as a part of the event-based maintenance workflows. See the "Managing the Java-based Server" section in the <em>DirX Identity Connectivity Administration Guide</em> for instructions.</p>
</div>
<div class="paragraph">
<p>We must also disable the SoD flag at the domain object, otherwise privilege resolution will run automatically with policy execution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager&#8217;s Provisioning view group.</p>
</li>
<li>
<p>Click <strong>Domain</strong> <strong>Configuration</strong> &#8594; <strong>My</strong>-<strong>Company</strong>.</p>
</li>
<li>
<p>In the Compliance tab, click <strong>Edit</strong>.</p>
</li>
<li>
<p>Uncheck <strong>Segregation</strong> <strong>of</strong> <strong>Duties</strong> (<strong>SoD</strong>) <strong>checks</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-PerformingaPureLDAPChange"><a class="anchor" href="#Tutorials-PerformingaPureLDAPChange"></a>Performing a Pure LDAP Change</h4>
<div class="paragraph">
<p>Use either a pure LDAP client or DirX Identity Manager&#8217;s Data View:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong>.</p>
</li>
<li>
<p>Select the user <strong>cn=Briner Ruben,ou=Sales,o=My-Company,cn=Users,cn=My-Company</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>Scroll down to the <strong>employeeType</strong> attribute and change its value to <strong>Contractor</strong>.</p>
</li>
<li>
<p>Set the <strong>dxrTBA</strong> attribute to <strong>true</strong>. You can use this flag later on to indicate to DirX Identity services (policy execution and privilege resolution) that only users with this flag need to be managed (after working on these objects, the services reset the flag). If you do not use this flag, you must run the services on the entire user population, which might be a time-consuming procedure with a high load on the Provisioning configuration server.</p>
</li>
<li>
<p>Save the user object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check the object from the Provisioning view group:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the user <strong>Briner Ruben</strong> from <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Sales</strong>.</p>
</li>
<li>
<p>Click the <strong>General</strong> tab and then refresh the entry. The <strong>Employee Type</strong> field displays <strong>Contractor</strong>.</p>
</li>
<li>
<p>Verify that the <strong>To be analyzed</strong> flag in the <strong>Operational</strong> tab is set (this is the <strong>dxrTBA</strong> flag).</p>
</li>
<li>
<p>Check that the user has the <strong>Internal</strong> <strong>Employee</strong> role assigned; this is inconsistent with the changed employee type. To correct this problem, we run the policy execution service and a subsequent privilege resolution.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ConfiguringthePolicyExecutionService"><a class="anchor" href="#Tutorials-ConfiguringthePolicyExecutionService"></a>Configuring the Policy Execution Service</h4>
<div class="paragraph">
<p>First, we need to configure the policy execution service with DirX Identity Manager:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Provisioning</strong> and then click <strong>Target Systems</strong>.</p>
</li>
<li>
<p>Right-click <strong>Target Systems</strong> (the top-level object in the tree) and then select <strong>Connectivity</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>PolicyExecution</strong> &#8594; <strong>Configure Workflow</strong>. The workflow wizard opens.</p>
</li>
<li>
<p>Click <strong>Next</strong>. You can see that the policy execution service does not perform a privilege resolution automatically (<strong>Provisioning</strong> <strong>Mode</strong> is set to <strong>Assign</strong> <strong>Privilege</strong> <strong>only</strong>). Do not change this step. Click <strong>Next</strong> again.</p>
</li>
<li>
<p>Change <strong>Base Object</strong> to <strong>cn=Role based scenario,cn=My-Company,cn=Rules,cn=Policies,cn=My-Company</strong> if it is not already set to this value. This setting indicates that we run all policies below this node.</p>
</li>
<li>
<p>Change <strong>Search Filter</strong> to <strong>(objectClass=dxrProvisionRule)</strong> if it is not already set to this value to specify that we use only provisioning rules in this run.</p>
</li>
<li>
<p>Click <strong>Finish</strong> to close the wizard.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-RunningthePolicyExecutionService.1"><a class="anchor" href="#Tutorials-RunningthePolicyExecutionService.1"></a>Running the Policy Execution Service</h4>
<div class="paragraph">
<p>To run the policy execution service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click <strong>Target Systems</strong> and select <strong>Connectivity</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>PolicyExecution</strong> &#8594; <strong>Run Workflow</strong> to run the workflow. Wait until the workflow has completed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-UsingtheStructureTabtoChecktheResults"><a class="anchor" href="#Tutorials-UsingtheStructureTabtoChecktheResults"></a>Using the Structure Tab to Check the Results</h4>
<div class="paragraph">
<p>First we&#8217;ll use the policy execution workflow&#8217;s open window to check the results:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Structure</strong> tab and then the activity in the middle. A new window opens. Click the <strong>Trace</strong> tab and then check the trace file (click the line and then the button to the right).</p>
</li>
<li>
<p>At the tracing level set for the workflow, the trace file contains only brief statistics. Each privilege that has been processed is listed in a table with the number of subjects processed and the corresponding errors and warnings. In this case, the privileges <strong>Contractors</strong>, <strong>Internal Employee</strong> and <strong>Signature</strong> <strong>Level</strong> <strong>1</strong> each have processed one subject (user). This must be our Ruben Briner, because all other users in the database were not changed, and so the policy execution service had nothing else to do.</p>
</li>
<li>
<p>Note that assignment of permission <strong>Signature Level 1</strong> failed since we’ve stopped the Java-based server. Let’s ignore this for this tutorial chapter.</p>
</li>
<li>
<p>Close the trace window and the Policy Execution and Run Workflow windows.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingRubenBrinersPrivileges"><a class="anchor" href="#Tutorials-CheckingRubenBrinersPrivileges"></a>Checking Ruben Briner&#8217;s Privileges</h4>
<div class="paragraph">
<p>Use the DirX Identity Manager to check the result of the policy execution workflow run.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the user <strong>Briner Ruben</strong> from <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Sales</strong>.</p>
</li>
<li>
<p>Click the <strong>Assigned Roles</strong> tab and refresh the entry. The <strong>Contractor</strong> role should be visible.</p>
</li>
<li>
<p>Click the <strong>Assigned Permissions</strong> tab and refresh the entry. The <strong>Contractor</strong> permission is not yet visible because the privilege resolution service did not run. For the same reason, the <strong>Internal Employee</strong> permission is still assigned.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-RunningthePrivilegeResolutionService"><a class="anchor" href="#Tutorials-RunningthePrivilegeResolutionService"></a>Running the Privilege Resolution Service</h4>
<div class="paragraph">
<p>Now we&#8217;ll resolve the privileges that the policy execution service assigned to Ruben Briner:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Target Systems</strong> view.</p>
</li>
<li>
<p>Right-click the <strong>Target</strong> <strong>Systems</strong> top-level node and select <strong>Connectivity</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>PrivilegeResolution</strong> &#8594; <strong>Run</strong> <strong>Workflow</strong> to run the privilege resolution workflow. Wait until the workflow has completed.</p>
</li>
<li>
<p>Click the <strong>Structure</strong> tab to check whether the workflow has performed successfully. The workflow activity <strong>PrivilegeResolution</strong> must be displayed in green.</p>
</li>
<li>
<p>Close the Run Workflow window.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-Re-CheckingRubenBrinersPrivileges"><a class="anchor" href="#Tutorials-Re-CheckingRubenBrinersPrivileges"></a>Re-Checking Ruben Briner&#8217;s Privileges</h4>
<div class="paragraph">
<p>Now we return to the DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Users</strong> view and examine Ruben Briner&#8217;s privileges again. In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Sales</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Assigned Permissions</strong> tab. Now the <strong>Contractor</strong> permission is visible (you may need to click the refresh button <span class="image"><img src="_images/502005954/502399123.gif" alt="attachments/502005954/502399123"></span> first).</p>
</li>
<li>
<p>Click the <strong>Assigned Groups</strong> tab. Several new group assignments have been created. Note that a new <strong>Contractor</strong> group is visible (<strong>Windows</strong> <strong>Domain</strong> <strong>USA</strong>) as well as the <strong>Contractor</strong> <strong>Portal</strong> group in the <strong>Intranet Portal</strong> target system.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This exercise shows how you can resolve inconsistencies in the Identity Store.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-CreatingaNestedWorkflow"><a class="anchor" href="#Tutorials-CreatingaNestedWorkflow"></a>Creating a Nested Workflow</h3>
<div class="paragraph">
<p>In this exercise, we show you how to create a nested Tcl-based workflow. Before you try this exercise, make sure you&#8217;ve followed the exercise described in "Importing Identities" in this Guide.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll combine the run of the NewHR2Ident workflow, the policy execution service and the privilege resolution service in a nested workflow. To do this, we&#8217;ll use the DirX Identity Manager&#8217;s Expert View to copy a default workflow and move it to our NewCompany scenario and then reconfigure its activities from the defaults to the values for our scenario. Next, we&#8217;ll run and monitor the workflow from the Expert View, then make it available for execution in the Global View.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-CopyingandMovingaDefaultWorkflow"><a class="anchor" href="#Tutorials-CopyingandMovingaDefaultWorkflow"></a>Copying and Moving a Default Workflow</h4>
<div class="paragraph">
<p>First, we&#8217;ll use DirX Identity Manager&#8217;s Expert View to copy a default workflow and move it to our NewCompany scenario:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Connectivity</strong>, and then click <strong>Expert View</strong>.</p>
</li>
<li>
<p>Open <strong>Workflows</strong> &#8594; <strong>Default</strong> &#8594; <strong>Source Scheduled</strong>. The workflow <strong>ODBC2Ident+Maintenance</strong> is exactly what we need.</p>
</li>
<li>
<p>Select this object and then select <strong>Copy Object</strong>. Set the name to <strong>NewHR2Ident+Maintenance</strong> and click <strong>OK</strong>.</p>
</li>
<li>
<p>The location of the copied object is not correct. Select <strong>Move Object</strong> and set <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>NewCompany</strong> &#8594; <strong>Source Scheduled</strong> &#8594; <strong>ODBC</strong> as the target. Click <strong>OK</strong> and wait until the move is performed. DirX Identity checks and adapts all references pointing to the moved object to guarantee the integrity of the Connectivity configuration, so this action requires some time.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ReconfiguringtheDefaultWorkflowsActivities"><a class="anchor" href="#Tutorials-ReconfiguringtheDefaultWorkflowsActivities"></a>Reconfiguring the Default Workflow&#8217;s Activities</h4>
<div class="paragraph">
<p>Next, we&#8217;ll reconfigure the activities in the default workflow to point to our scenario&#8217;s objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the previously selected target path for the move operation. The new workflow <strong>NewHR2Ident+Maintenance</strong> is visible there.</p>
</li>
<li>
<p>Click it and open it. Three activities are visible but they point to the wrong (default) objects. Adjust them to make the workflow usable for the My-Company scenario.</p>
</li>
<li>
<p>Click the <strong>Creation Workflow</strong> activity in the left pane and then <strong>Edit</strong>. Click the last icon behind <strong>Run</strong> <strong>Object (&#8230;&#8203;)</strong>. A tree browser opens and you can see that this activity references the default <strong>ODBC2Ident</strong> workflow. Select <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>NewCompany</strong> &#8594; <strong>Source Scheduled</strong> &#8594; <strong>ODBC</strong> &#8594; <strong>NewHR2Ident</strong> instead and click <strong>Save</strong>.</p>
</li>
<li>
<p>Click the <strong>Policy Execution</strong> activity and link it to <strong>Jobs</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong> &#8594; <strong>Policy Execution</strong>. Click <strong>Save</strong>.</p>
</li>
<li>
<p>Click the <strong>Privilege Resolution</strong> activity and link it to <strong>Jobs</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong> &#8594; <strong>Privilege Resolution</strong>. Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-RunningandMonitoringtheNestedWorkflow"><a class="anchor" href="#Tutorials-RunningandMonitoringtheNestedWorkflow"></a>Running and Monitoring the Nested Workflow</h4>
<div class="paragraph">
<p>Now we have a workflow that runs the ODBC creation workflow and then the policy execution and privilege resolution services. Run the new workflow from the Expert View and click the <strong>Structure</strong> tab in the run window. Watch the three activities running in sequence.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-MakingtheNestedWorkflowAvailableintheGlobalView"><a class="anchor" href="#Tutorials-MakingtheNestedWorkflowAvailableintheGlobalView"></a>Making the Nested Workflow Available in the Global View</h4>
<div class="paragraph">
<p>The last step is to make this workflow available in the Global View:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Global View</strong> and select the scenario <strong>My-Company</strong> &#8594; <strong>NewCompany</strong>.</p>
</li>
<li>
<p>Right-click the workflow line, then select <strong>Assign</strong>.</p>
</li>
<li>
<p>Select the <strong>NewHR2Ident+Maintenance</strong> workflow from the list and click <strong>OK</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can run the workflow from the Global View.</p>
</div>
<div class="paragraph">
<p>If you need a new nested workflow for another identity creation workflow, simply copy this workflow and link only the first activity to the new creation workflow. It makes sense to use the same second and third activity; for example, if you need to reconfigure one of these activities, the new configuration will take effect in all nested workflows at once.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-UsingManualProvisioning"><a class="anchor" href="#Tutorials-UsingManualProvisioning"></a>Using Manual Provisioning</h3>
<div class="paragraph">
<p>There are many reasons why it is difficult or why it does not make sense to tightly integrate a potential connected system. Setting up the system for manual provisioning provides you with a quick and easy solution. In this section, we&#8217;ll show you how to do it with the example of a physical access system that is part of the DirX Identity sample domain. We&#8217;ll describe how manual provisioning works and demonstrate how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the scenario in the sample domain</p>
</li>
<li>
<p>Request physical access to secured rooms</p>
</li>
<li>
<p>Check the approval result</p>
</li>
<li>
<p>Perform manual provisioning as an administrator</p>
</li>
<li>
<p>View the result</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can read more about this topic in the <em>DirX Identity Use Case Document</em> "Service Management".</p>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingManualProvisioning"><a class="anchor" href="#Tutorials-UnderstandingManualProvisioning"></a>Understanding Manual Provisioning</h4>
<div class="paragraph">
<p>The My-Company sample domain contains the Physical Access target system, which is an example of an offline target system. With an offline system, there is no direct connection for provisioning. Instead, the target system administrator is notified by request workflow activities that he needs to synchronize the external offline system with the target system&#8217;s content.</p>
</div>
<div class="paragraph">
<p>Manual provisioning requires configuration in both the Connectivity and Provisioning views and consists of the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating a new target system of type <strong>RequestWorkflow</strong> in the <strong>Target</strong> <strong>Systems</strong> view that reflects your offline system that is to be manually provisioned. This step adds the necessary Java-based workflow that starts the corresponding request workflow for each change to the target system.</p>
</li>
<li>
<p>Setting up the necessary groups in your target system or loading them from the offline system.</p>
</li>
<li>
<p>Copying the provided request workflow template, modifying it to your requirements and then configuring the Java-based workflow you copied to use this request workflow definition.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These steps have been completed for the <strong>Physical Access</strong> target system. You can use this prepared example to run this exercise.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ViewingtheScenario"><a class="anchor" href="#Tutorials-ViewingtheScenario"></a>Viewing the Scenario</h4>
<div class="paragraph">
<p>In our scenario, the Physical Access target system controls access to protected rooms in the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A documentation archive in Munich</p>
</li>
<li>
<p>Three data center rooms in Berlin, Frankfurt and Munich.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Roles and rules protect the access to these rooms.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingtheTargetSystem"><a class="anchor" href="#Tutorials-ViewingtheTargetSystem"></a>Viewing the Target System</h5>
<div class="paragraph">
<p>First we view the target system Physical Access.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to the <strong>Provisioning</strong> view group of the DirX Identity Manager.</p>
</li>
<li>
<p>Select the <strong>Target Systems</strong> view and navigate to the <strong>Physical Access</strong> target system.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, you can see that the target system type is <strong>RequestWorkflow</strong>. This assignment means that it is configured and tailored to be used with real-time workflows that start request workflows. These request workflows can be used for manual provisioning. To create another instance of this type of target system, select the type <strong>Service Management</strong> in the target system wizard.</p>
</li>
<li>
<p>Click the <strong>Advanced</strong> tab. This target system works with assignment states and references groups from the account side. This is important because then all changes for attributes and group memberships are stored at the account. Real-time provisioning is enabled and password synchronization is disabled. Synchronizing passwords does not make sense because the administrator would potentially know all passwords of all users.</p>
</li>
<li>
<p>Open the tree. You can see a folder with a set of accounts and a folder with four groups: <strong>Munich - Archive</strong> protects the documentation archive and the three <strong>Data Center</strong> groups protect the data centers in Berlin, Frankfurt and Munich. Note that all these groups are not user assignable.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingthePrivilegeStructure"><a class="anchor" href="#Tutorials-ViewingthePrivilegeStructure"></a>Viewing the Privilege Structure</h5>
<div class="paragraph">
<p>Next, we evaluate the privilege structure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Privileges</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Roles</strong> &#8594; <strong>Corporate Roles</strong> &#8594; <strong>Physical Access</strong>. This folder contains four roles that are each linked to the corresponding permission (view the <strong>Assigned Permissions</strong> tab). These roles are all user assignable.</p>
</li>
<li>
<p>Navigate to <strong>Permissions</strong> &#8594; <strong>Corporate Permissions</strong> &#8594; <strong>Physical Access</strong>. This folder contains four permissions that are linked to the four groups in the target system (view the <strong>Assigned Groups</strong> tab). Note that the permissions are not user assignable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The role administrator has decided that only roles can be assigned to users. Assignment of permissions and groups is not possible.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingtheRules"><a class="anchor" href="#Tutorials-ViewingtheRules"></a>Viewing the Rules</h5>
<div class="paragraph">
<p>The sample scenario assumes that users located in Berlin, Frankfurt and Munich get automatic access to the data center rooms. Access to the archive requires explicit role assignment as well as access to the data center rooms for persons outside the three mentioned locations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Policies</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Rules &#8594; My-Company &#8594; Role based scenario &#8594; Corporate</strong>.</p>
</li>
<li>
<p>View the three rules for access to <strong>Data Center</strong>. They assign all internal employees of the specific location to the corresponding group.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These rules are either executed during a policy execution service run or during an event-based user processing workflow.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-RequestingPhysicalAccess"><a class="anchor" href="#Tutorials-RequestingPhysicalAccess"></a>Requesting Physical Access</h4>
<div class="paragraph">
<p>In our example scenario for manual provisioning, Bill Sedran, the head of software development in San Jose, frequently visits the My-Company&#8217;s Munich branch and needs access to the Munich Archive when he&#8217;s there. He requests the necessary role via Web Center.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-RequestingAccesstotheMunichArchive"><a class="anchor" href="#Tutorials-RequestingAccesstotheMunichArchive"></a>Requesting Access to the Munich Archive</h5>
<div class="paragraph">
<p>To launch the access request for the Munich Archive:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in as <strong>Sedran Bill</strong> into Web Center.</p>
</li>
<li>
<p>Select <strong>Self Service</strong> &#8594; <strong>Subscribe privileges</strong> and click <strong>Search</strong>.</p>
</li>
<li>
<p>Click the <strong>Munich</strong> - <strong>Archive</strong> role, move it to <strong>Assigned</strong> r<strong>oles</strong> and then click <strong>Save</strong>.</p>
</li>
<li>
<p>Select <strong>Self Service</strong> &#8594; <strong>Show Subscription Status</strong>. A new line with the pending approval is shown.</p>
</li>
<li>
<p>Click the line to open the details. You can see that Olivier Hungs, Gabriela Morton (the role&#8217;s owners) or Christopher Dalmar (Olivier’s representative) are required to approve the assignment in <strong>Approval</strong> <strong>by</strong> <strong>Privilege</strong> <strong>Managers</strong> activity. The <strong>Approval</strong> <strong>by</strong> <strong>User</strong> <strong>Manager</strong> activity must be approved by Frederic Duplan (Bill&#8217;s manager) or by Veronique Cohu (Frederic’s representative).</p>
</li>
<li>
<p>Log out from Web Center.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ApprovingtheAccessRequest"><a class="anchor" href="#Tutorials-ApprovingtheAccessRequest"></a>Approving the Access Request</h5>
<div class="paragraph">
<p>All of the approvers have received an email message that requests that they approve the role assignment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Hungs</strong> <strong>Olivier</strong>.</p>
</li>
<li>
<p>Select <strong>Work List</strong> &#8594; <strong>Task list</strong> and approve the subscription with the reason "As discussed with Dalmar Christopher".</p>
</li>
<li>
<p>Log out from Web Center.</p>
</li>
<li>
<p>Log in as <strong>Duplan Frederic</strong> into Web Center.</p>
</li>
<li>
<p>Select <strong>Work List</strong> &#8594; <strong>Task list</strong> and approve the subscription with the reason "Necessary according to Bill Sedran&#8217;s work profile".</p>
</li>
<li>
<p>Log out from Web Center.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheApprovalResult"><a class="anchor" href="#Tutorials-CheckingtheApprovalResult"></a>Checking the Approval Result</h4>
<div class="paragraph">
<p>Now that approval is complete, we can check the result in various places.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingtheRequestWorkflowResult"><a class="anchor" href="#Tutorials-CheckingtheRequestWorkflowResult"></a>Checking the Request Workflow Result</h5>
<div class="paragraph">
<p>First, we&#8217;ll check the approval result in the <strong>Workflows</strong> view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open DirX Identity Manager (<strong>Provisioning</strong> view group).</p>
</li>
<li>
<p>Click the <strong>Workflows</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>4-Eye Approval &#8594;</strong> <em>date</em> <strong>&#8594; Sedran Bill</strong> &#8594; <strong>Munich - Archive</strong>.</p>
</li>
<li>
<p>Click the <strong>General</strong> tab. In the structure view, you can see that both approvers have accepted and the Apply Approved Privilege Change activity has succeeded. In this step, privilege resolution was performed that created a new account for Bill Sedran and that was assigned to the Munich - Archive group in the Physical Access target system.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingtheNewAccountandGroupMembership"><a class="anchor" href="#Tutorials-ViewingtheNewAccountandGroupMembership"></a>Viewing the New Account and Group Membership</h5>
<div class="paragraph">
<p>Now let&#8217;s view the new account and group membership information in the Physical Access target system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Target Systems</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Physical Access</strong> &#8594; <strong>accounts</strong> and open this folder.</p>
</li>
<li>
<p>Click the <strong>Bill Sedran</strong> account.</p>
</li>
<li>
<p>View the <strong>Operational</strong> tab. You can see that the account is in state ENABLED but the target system state is still in state NONE which means that it is not yet created in the connected system.</p>
</li>
<li>
<p>Click the <strong>Member of</strong> tab. The assignment state for the Munich - Archive group is ADD which also means that the assignment is not yet provisioned.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingtheRealTimeWorkflow"><a class="anchor" href="#Tutorials-ViewingtheRealTimeWorkflow"></a>Viewing the Real Time Workflow</h5>
<div class="paragraph">
<p>Next, we&#8217;ll check the real time workflow that results from the approvals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open DirX Identity Manager (<strong>Connectivity</strong> view group).</p>
</li>
<li>
<p>Click the <strong>Monitor View</strong>.</p>
</li>
<li>
<p>Navigate to <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Target Realtime</strong> &#8594; <strong>Physical Access</strong> &#8594; <strong>Ident_PhysicalAccess_Realtime</strong>. You can see one instance of the workflow.</p>
</li>
<li>
<p>Click the instance and view the <strong>Remark</strong> field. There could be a message that indicates that a request workflow was started to request manual provisioning:<br>
Creation request workflow for object "cn=Bill Sedran 4365,cn=accounts,cn=Physical Access,cn=TargetSystems,cn=My-Company" successfully instantiated.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingtheRequestWorkflowInstance"><a class="anchor" href="#Tutorials-ViewingtheRequestWorkflowInstance"></a>Viewing the Request Workflow Instance</h5>
<div class="paragraph">
<p>Now let&#8217;s check the request workflow instance (created by the previous real time workflow):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open DirX Identity Manager (<strong>Provisioning</strong> view group).</p>
</li>
<li>
<p>Click the <strong>Workflows</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Service Management</strong> &#8594; <strong>Physical Access</strong> &#8594; <em>date</em>. One request workflow instance is present.</p>
</li>
<li>
<p>Click the instance. You can see that one instance waits in the activity <strong>Addition by Administrator</strong>. Double-click the activity and view the approver in the <strong>Status</strong> <strong>Information</strong> tab. <strong>Retha Wagner</strong> - who is the <strong>Local Admin</strong> of the <strong>Physical</strong> <strong>Access</strong> target system - is responsible for acting on this workflow.</p>
</li>
<li>
<p>Click the <strong>Object</strong> tab of the workflow. You can see all attributes of the new account (this is technically the order information). We will see that this information is sufficient for the administrator to create the account in the Physical Access offline system.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The order information in the <strong>Object</strong> and <strong>Assignment</strong> tabs is used to create the necessary information in the corresponding Web Center pages.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-PerformingManualProvisioning"><a class="anchor" href="#Tutorials-PerformingManualProvisioning"></a>Performing Manual Provisioning</h4>
<div class="paragraph">
<p>In our sample scenario, we assume that an administrator of an offline target system does not receive an email message when a new provisioning request is produced. As a result, the approval activities of the Physical Access request workflow are not configured for email. Look-up the definition of the workflow in the path <strong>Definitions &#8594; My-Company &#8594; Service Management &#8594; Physical Access</strong>. For our scenario, we assume that Retha Wagner works frequently in her work list.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Wagner Retha</strong>.</p>
</li>
<li>
<p>Execute <strong>Work List &#8594; Task list</strong> from the menu bar.</p>
</li>
<li>
<p>You can see a work item that requests the account creation.</p>
</li>
<li>
<p>Click the item to view the details (<strong>Addition by Administrator</strong>). It shows that an account for Bill Sedran is to be created and added to the Munich - Archive group. All of the required attributes are shown.<br>
Note that these attributes are defined in the mapping of the corresponding real-time workflow. So you can add or remove attributes as they are needed. You can also define the sequence of the attributes in the mapping definition.</p>
</li>
<li>
<p>Retha now must open the administrative interface to the Physical Access system and add the account as requested. After successful creation, she can add a reason and then click <strong>Accept</strong>. If she wants to do the task later, she can press <strong>Do later</strong>. Clicking <strong>Reject</strong> means that she cannot do the task. In this case, it makes sense to add a reason. This action only sends a notification to the user that the task failed. The DirX Identity target system and the external system are not in sync which is visible because the target system state is still NONE.</p>
</li>
<li>
<p>We assume that Retha can add the account to the Physical Access system, so we acknowledge it by clicking <strong>Accept</strong>.</p>
</li>
<li>
<p>The work list is now empty.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The manual provisioning scenario assumes that the administrator works carefully and correctly. Nevertheless, errors are possible. To solve this problem, build a mechanism such as a file-based workflow that validates the content of the external system from time to time against the target system. Then the differences are visible and the administrator can address them.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ViewingtheResult"><a class="anchor" href="#Tutorials-ViewingtheResult"></a>Viewing the Result</h4>
<div class="paragraph">
<p>In the previous sections, we learned how manual provisioning is to be done. This section completes the topic by viewing the result in various ways.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingtheProvisionedUser"><a class="anchor" href="#Tutorials-ViewingtheProvisionedUser"></a>Viewing the Provisioned User</h5>
<div class="paragraph">
<p>First, let&#8217;s view Bill Sedran&#8217;s account and group membership from his perspective:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Sedran Bill</strong>.</p>
</li>
<li>
<p>Perform <strong>Self Service &#8594; Display summary</strong> from the menu bar.</p>
</li>
<li>
<p>Click the <strong>Accounts</strong> button. The target system state of the account in the Physical Access target system is ENABLED.</p>
</li>
<li>
<p>Click the image at the end of the account line to display the assigned groups. Verify that the assignment state is ENABLED.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingastheAdministrator"><a class="anchor" href="#Tutorials-ViewingastheAdministrator"></a>Viewing as the Administrator</h5>
<div class="paragraph">
<p>Next, we&#8217;ll view the account and group membership from the target system administrator&#8217;s perspective:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Wagner Retha</strong>.</p>
</li>
<li>
<p>Perform <strong>Accounts &#8594; Select account</strong> from the menu bar.</p>
</li>
<li>
<p>Type in "Bill" into the search field (begins with). Click <strong>Search</strong>.</p>
</li>
<li>
<p>In the displayed account table, click the account for the <strong>Physical Access</strong> system. All attributes are displayed and also the group membership.</p>
</li>
<li>
<p>Click the button at the end of the group line to display the group.</p>
</li>
<li>
<p>Select <strong>Groups &#8594; Show members</strong> to display the group members.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CheckingStatisticsonGroups"><a class="anchor" href="#Tutorials-CheckingStatisticsonGroups"></a>Checking Statistics on Groups</h5>
<div class="paragraph">
<p>Finally, we&#8217;ll run a report on group statistics to check the effect:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Web Center, select <strong>Tools</strong> &#8594; <strong>Reports</strong>.</p>
</li>
<li>
<p>Navigate in the tree to <strong>Target Systems</strong> &#8594; <strong>Physical Access</strong> and then click it. A set of possible reports is displayed.</p>
</li>
<li>
<p>Click <strong>Number of users per group</strong>. After a few seconds, the list of groups is displayed. The second column displays all users that are directly assigned to the groups via the provisioning rules. The first column also shows the indirectly assigned users, which are users assigned via roles or permissions. There&#8217;s only a difference for the <strong>Munich - Archive</strong> group.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-WorkingwithInternalTickets"><a class="anchor" href="#Tutorials-WorkingwithInternalTickets"></a>Working with Internal Tickets</h3>
<div class="paragraph">
<p>In most cases, you want changes in your identity solution to be effective immediately in real time. However, there are situations where it makes sense to delay changes to a later date. If you have no way of delaying these changes, you have to note the changes somewhere, wait until the time comes and then perform the changes.</p>
</div>
<div class="paragraph">
<p>Of course this procedure is very inconvenient. You can use DirX Identity&#8217;s internal service management component to manage these situations.</p>
</div>
<div class="paragraph">
<p>In this section, we&#8217;ll show you how to create and manage tickets in DirX Identity. First, we explain how you can work with internal tickets and then we demonstrate how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create tickets</p>
</li>
<li>
<p>View tickets</p>
</li>
<li>
<p>Process tickets</p>
</li>
<li>
<p>View the processed ticket and its results</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about this topic, read the <em>DirX Identity Use Case Document</em> about "Service Management".</p>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingHowtoWorkwithInternalTickets"><a class="anchor" href="#Tutorials-UnderstandingHowtoWorkwithInternalTickets"></a>Understanding How to Work with Internal Tickets</h4>
<div class="paragraph">
<p>Creating tickets in DirX Identity is easy. Perform your action as usual and then set a due date with Web Center or DirX Identity Manager. The action is not performed immediately, but at the required due date. DirX Identity supports the following types of actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating objects</p>
</li>
<li>
<p>Modifying objects</p>
</li>
<li>
<p>Deleting objects</p>
</li>
<li>
<p>Assigning privileges</p>
</li>
<li>
<p>Removal of privileges</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A ticket processor needs to run daily to process all maturing tickets. Depending on the action to be processed, corresponding approval workflows and their results must be handled.</p>
</div>
<div class="paragraph">
<p>In this follow-on tutorial, we modify a user while setting a due date, process the ticket and view the results.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CreatingaModificationTicket"><a class="anchor" href="#Tutorials-CreatingaModificationTicket"></a>Creating a Modification Ticket</h4>
<div class="paragraph">
<p>We assume that Leo Kubalke from the Product Testing group is to receive his doctorate on the date that he defends his thesis. After that date, he&#8217;d like to add his new title to his company name information.</p>
</div>
<div class="paragraph">
<p>For purposes of this exercise, we need to set today&#8217;s date as the due date, or the ticket processor won&#8217;t run and we can&#8217;t perform the whole tutorial on one day. Note also that we use the DirX Identity Manager for this tutorial.</p>
</div>
<div class="paragraph">
<p>To prepare for the upcoming name change:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login to the <strong>Provisioning</strong> view group of the DirX Identity Manager.</p>
</li>
<li>
<p>Click the <strong>Users</strong> view and then navigate to <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Product Testing</strong>.</p>
</li>
<li>
<p>Select <strong>Leo Kubalke</strong> and then click the <strong>General</strong> tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and enter <strong>Dr</strong>. into the <strong>Title</strong> field.</p>
</li>
<li>
<p>Enter today&#8217;s date into the <strong>Due Date</strong> field (to the left of the <strong>Save</strong> button).</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After a short time, the <strong>Title</strong> field is cleared, which means that the change is not yet effective.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ViewingtheModificationTicket"><a class="anchor" href="#Tutorials-ViewingtheModificationTicket"></a>Viewing the Modification Ticket</h4>
<div class="paragraph">
<p>Now we&#8217;ll explore several ways to view the upcoming change.</p>
</div>
<div class="paragraph">
<p>First we&#8217;ll check the information at the user entry:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If not yet done, click the entry of <strong>Leo Kubalke</strong>.</p>
</li>
<li>
<p>Click the <strong>Orders</strong> tab. If it is still empty, perform a refresh (on Windows: F5). Be patient until the data appears.</p>
</li>
<li>
<p>You can see the order with the <strong>due date</strong> (the current date), the attribute name <strong>title</strong>, the empty old value and the new value 'Dr.'.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally you can view the ticket:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Tickets</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Tickets</strong> &#8594; <strong>Internal</strong> &#8594; <strong>Users</strong> &#8594; <em>date</em> &#8594; <strong>Kubalke Leo</strong> <em>time</em> and click this entry.<br>
DirX Identity stores all of its self-created tickets in the tree <strong>Internal</strong>. The next level divides the object types, in this case we have a <strong>Users</strong> folder. Below this folder you can find a folder for each date (this is the due date). This allows easily finding out all tickets that are valid for a specific date and you can also see that for a specific date no tickets exist if the corresponding folder is missing.</p>
</li>
<li>
<p>In the <strong>General</strong> tab of the ticket, you can see the <strong>Name</strong> (Kubalke Leo <em>time</em>), the <strong>Object type</strong> (here dxrUser) and the O<strong>peration</strong> (here MODIFY). The creator of this ticket is shown as the <strong>Owner</strong> (in this case the Domain Admin). The <strong>Subject</strong> field shows the DN of the object the ticket is valid for. Because the Request workflow field is empty, there is no related approval in progress.</p>
</li>
<li>
<p>Check the <strong>Status Information</strong> tab. The <strong>Status</strong> field shows Input.Completed, which means that the ticket is ready to process. You can also see the Due date here. The <strong>Expiration date</strong> and <strong>Delete date</strong> are still empty. If any errors occur, for example, during ticket processing, the <strong>Error</strong> field shows this information.</p>
</li>
<li>
<p>In the <strong>Object</strong> tab, you can find the order (the change definition) for the object itself (for the subject). It is identical to the previously viewed <strong>Orders</strong> tab at the user entry.</p>
</li>
<li>
<p>Click the <strong>Assignments</strong> tab to see that this ticket does not have any assignment order.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use query folders to explore and manage the ticket tree. Especially if you have many tickets, these queries help a lot. If the provided default queries are not specific enough, set up your own queries but first let&#8217;s use some of the default queries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>_Queries</strong> folder. At the top level, you can find a set of general queries.</p>
</li>
<li>
<p>Click <strong>Active Tickets</strong> to see our active ticket for Leo Kubalke.</p>
</li>
<li>
<p>Because there are no error tickets, clicking <strong>Error Tickets</strong> does not show any entries.</p>
</li>
<li>
<p>Click the <strong>Variable Time Constraint</strong> query. A dialog appears that shows by default a three-hour time period for modifications and creations. You could change these values, but in this case, we accept them and simply click <strong>OK</strong>. Again we can see the Leo Kubalke entry.</p>
</li>
<li>
<p>There are some additional folders that help to evaluate specific types of tickets. Open <strong>For Object Types</strong> and click <strong>Users</strong>. Our entry is shown again.</p>
</li>
<li>
<p>Opening <strong>For Operation Types</strong> and clicking <strong>Modify</strong> reveals the same entry.</p>
</li>
<li>
<p>Now open <strong>For Status</strong> and click <strong>Input.Complete</strong> to see the same entry.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These examples show that there are many ways to view and explore tickets.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ProcessingtheModificationTicket"><a class="anchor" href="#Tutorials-ProcessingtheModificationTicket"></a>Processing the Modification Ticket</h4>
<div class="paragraph">
<p>In this step, we&#8217;ll process the previously created ticket.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login to the <strong>Connectivity</strong> view group of the DirX Identity Manager.</p>
</li>
<li>
<p>Click <strong>Global</strong> <strong>View</strong> and then navigate to <strong>My-Company &#8594; Main</strong>.</p>
</li>
<li>
<p>Click the line between the two <strong>Identity Store</strong> icons and select <strong>Process Internal Tickets &#8594; Configure</strong> from the context menu.</p>
</li>
<li>
<p>Click through the two tabs. There is nothing interesting to see besides the fact that this workflow runs with <strong>Resource Family</strong> Event_Maintenance, which means it runs in the Java-based server and does not run as an external executable in the C++-based server.</p>
</li>
<li>
<p>Now run the workflow (select <strong>Process Internal Tickets &#8594; Run</strong> from the context menu.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The workflow runs and we can view the result.</p>
</div>
<div class="paragraph">
<p>Typically you should set up a schedule for this workflow to run it overnight on a daily basis. This configuration guarantees that all mature tickets are processed. Each day, you should check to see if any errors occurred. Use the <strong>Error Tickets</strong> query to perform this task.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ViewingtheModificationTicketResult"><a class="anchor" href="#Tutorials-ViewingtheModificationTicketResult"></a>Viewing the Modification Ticket Result</h4>
<div class="paragraph">
<p>Now we&#8217;ll see if the user entry has changed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to the <strong>Provisioning</strong> view group of the DirX Identity Manager.</p>
</li>
<li>
<p>Click the <strong>Users</strong> view and then navigate to <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Product Testing</strong>.</p>
</li>
<li>
<p>Select <strong>Kubalke Leo</strong> and click the <strong>General</strong> tab. You should see the value <strong>Dr</strong>. in the title field. This shows that the ticket was processed.</p>
</li>
<li>
<p>Click the <strong>Orders</strong> tab. The tab is empty.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we check the ticket itself:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Tickets</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Tickets</strong> &#8594; <strong>Internal</strong> &#8594; <strong>_Queries</strong> and then click the <strong>Processed Tickets</strong> query.</p>
</li>
<li>
<p>The <strong>Kubalke Leo</strong> ticket is found.</p>
</li>
<li>
<p>Click the <strong>Status Information</strong> tab.</p>
</li>
<li>
<p>The <strong>Ticket state</strong> is now ApplyChange.completed and the <strong>Delete Date</strong> is set to one month later.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where does this one month value come from?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Domain Configuration</strong> view and then the top-level object with the name of your domain.</p>
</li>
<li>
<p>Select the <strong>Timing</strong> tab.</p>
</li>
<li>
<p>In this tab, you can find global settings for the <strong>Ticket life time</strong> of successfully processed tickets and erroneous tickets.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-WorkingwithSourceTickets"><a class="anchor" href="#Tutorials-WorkingwithSourceTickets"></a>Working with Source Tickets</h3>
<div class="paragraph">
<p>Many customers have already service management systems (ticketing systems) in place to manage and control IT processes. Users open tickets that allow them to get access to specific resources. These processes are well-known and thus hard to change. When introducing an identity management system into this environment, it makes sense to connect it to these ticketing systems to allow for seamless integration with existing processes.</p>
</div>
<div class="paragraph">
<p>In this section, we&#8217;ll show you how to integrate a ticketing system with DirX Identity&#8217;s provisioning mechanism via a sample web service. First, we explain how you can work with source tickets and then we demonstrate how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prepare the web service environment.</p>
</li>
<li>
<p>View the ticket request.</p>
</li>
<li>
<p>Send the ticket.</p>
</li>
<li>
<p>Watch the ticket workflow.</p>
</li>
<li>
<p>Check the ticket status.</p>
</li>
<li>
<p>Approve the Manager Analyst Relations role.</p>
</li>
<li>
<p>View the request workflows.</p>
</li>
<li>
<p>Check the final ticket state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about this topic, read the DirX Identity Use Case Document <em>Service Management</em>.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-UnderstandingHowtoUseSourceTickets"><a class="anchor" href="#Tutorials-UnderstandingHowtoUseSourceTickets"></a>Understanding How to Use Source Tickets</h4>
<div class="paragraph">
<p>Tickets from source ticketing systems (service management systems) that are related to identity management can comprise various issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation of a new user optionally with already assigned privileges.</p>
</li>
<li>
<p>Modification of a user, which means either attribute changes or changes of the assigned privileges.</p>
</li>
<li>
<p>Deletion of users.</p>
</li>
<li>
<p>Creation, modification and deletion also apply for other object types like roles, permissions or groups.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configuration of this feature includes these issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting up a Web service that is derived from the delivered sample web service that consumes tickets, converts them to Identity internal order representation and starts with that order the corresponding request workflow.</p>
</li>
<li>
<p>Copying the provided ticket processing request workflow and adapting it as required. You can set up one or more of these request workflows for each type of object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These steps have already been performed in the My-Company sample domain. You can use this prepared example to run the following tutorial. You can find more information about source ticketing in the <em>DirX Identity Use Case Document</em> "Service Management".</p>
</div>
<div class="paragraph">
<p>For purposes of this exercise, we assume that My-Company has a service management system in place that manages contractors. This system was connected to DirX Identity via web services. If a new contractor is hired, the hiring information goes through a process in the service management system and a ticket is then created that is consumed and processed by the DirX Identity sample Web service. In our example, the My-Company division in Ottawa, Canada needs help in the professional services area. So they hire the famous Irwin Dough as a contractor. Because the tasks are well-understood, the user is created together with two role assignments: <strong>Manager Analyst Relations</strong> and <strong>My-Company Newsletter</strong>. A ticket request workflow is started that implements the user and his privileges automatically.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-PreparingtheWebServiceEnvironment"><a class="anchor" href="#Tutorials-PreparingtheWebServiceEnvironment"></a>Preparing the Web Service Environment</h4>
<div class="paragraph">
<p>DirX Identity comes with a sample ticket web service server and client. To set up the sample web service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the complete folder <strong>Additions\ServiceMM\WorkingWithSourceTickets</strong> on your DVD to any location on your machine (for example <strong>C:\SampleTicketWS</strong>).</p>
</li>
<li>
<p>Make sure your PATH variable is set appropriately to find the correct version of the program java.exe.</p>
</li>
<li>
<p>Start the sample ticketing Web Service. There are two possibilities:</p>
<div class="ulist">
<ul>
<li>
<p>Starting the Web Service as stand-alone application</p>
</li>
<li>
<p>Deploying the Web Service into Tomcat</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Web Service is then accessible via an URL of the form</p>
</div>
<div class="paragraph">
<p><strong><a href="http://*" class="bare">http://*</a><em>host</em></strong>:*<em>port</em>*/sourceTicketing/sourceTicketingService*.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-StartingtheWebServiceasStand-aloneApplication"><a class="anchor" href="#Tutorials-StartingtheWebServiceasStand-aloneApplication"></a>Starting the Web Service as Stand-alone Application</h5>
<div class="paragraph">
<p>Run the file <strong>runServer.bat</strong> to start the sample ticket web service server. The server runs stand-alone and does not require any other environment. The default parameters assume that the web service is accessible via host=localhost and port=40099. It is also assumed that the Java-based server is accessible via host=localhost and port=40000.<br>
Note: If you want to use other parameters, read the <em>DirX Identity Use Case Document</em> "DXI Service Management.pdf".</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-DeployingtheWebServiceintoTomcat"><a class="anchor" href="#Tutorials-DeployingtheWebServiceintoTomcat"></a>Deploying the Web Service into Tomcat</h5>
<div class="paragraph">
<p>Perform the following steps to deploy the Web Service into Tomcat:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the <strong>sourceTicketing.war</strong> file to <em>tomcat_install_path</em>*/webapps*.<br>
Tomcat will automatically detect it and deploy it to <em>tomcat_install_path</em>*/webapps/sourceTicketing*.</p>
</li>
<li>
<p>Check the request workflow service connection parameters in the file <strong>config.properties</strong> of the folder <em>tomcat_install_path</em>*/webapps/sourceTicketing/WEB-INF/config*.</p>
</li>
<li>
<p>If necessary, correct them and restart Tomcat. The web service is accessible through the Tomcat host and port. This is the recommended approach for productive environment.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-PreparingtheSampleWebServiceClient"><a class="anchor" href="#Tutorials-PreparingtheSampleWebServiceClient"></a>Preparing the Sample Web Service Client</h4>
<div class="paragraph">
<p>In this tutorial, we use a pre-configured Web Service client that is easy to use. It reads a request file and sends it to the sample Web Service server. To set up the sample Web Service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check the setting of the variable <strong>ENDPOINT</strong> in the file <strong>seturl4client.bat</strong> regarding the port number. The file shipped with the product is correct if the related port is <strong>8080</strong>. If the correct port is not 8080, then the setting must be corrected so that it contains the correct port - either the port used when starting the service via <strong>runServer.bat</strong> or the actual Tomcat port, respectively.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ViewingtheTicketRequest"><a class="anchor" href="#Tutorials-ViewingtheTicketRequest"></a>Viewing the Ticket Request</h4>
<div class="paragraph">
<p>The sample ticket web service that is delivered with DirX Identity can consume various ticket requests for different types of objects. It is similar to SPML but simplified and thus easier to handle. To learn more about the sample web service, read the corresponding chapter in the <em>DirX Identity Integration Framework Guide</em>.</p>
</div>
<div class="paragraph">
<p>To understand the details of the request we use in this tutorial, open the file <strong>CreateUserWithRoles.xml</strong> from the folder <strong>C:\SampleTicketWS\sampleTickets</strong> and view it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The request contains a <strong>requestID</strong> (value Request-1) that is important because you need it later on to refer to the sent request if you request the status of it. Typically this ID is generated by the generating service management system or it is equal to the ticket number in that system.</p>
</li>
<li>
<p>The <strong>spml:identifier</strong> is of type DN and defines the object to create with its path:<br>
<strong>cn=Irwin Dough,ou=Professional Services,o=My-Company,cn=Users,cn=My-Company</strong></p>
</li>
<li>
<p>The <strong>spml:operationalAttributes</strong> section defines operational attributes:<br>
<strong>directoryType=dxrUser</strong> - defines the object type to create. This information is used to find the correct ticket workflow via the <strong>When Applicable</strong> section.<br>
<strong>operation=CREATE</strong> - specifies the operation to perform on this object.<br>
<strong>creator=cn=DomainAdmin,cn=My-Company</strong> - sets the initiator of the workflow. You can use it in the <strong>When Applicable</strong> section.</p>
</li>
<li>
<p>The <strong>spml:attributes</strong> section allows specifying all attributes of the user to create as there are for example the <strong>cn</strong>, <strong>objectClass</strong>, <strong>sn</strong>, <strong>givenName</strong>. You can also set links to other objects, for example <strong>manager</strong>, <strong>dxrLocationLink</strong>, <strong>dxrOrganizationLink</strong>, <strong>dxrOULink</strong>.<br>
<br>
Note that we cannot set the <strong>dxrOULink</strong> to Professional Services because this would assign the Sales Task role to the user. This role includes SAP relevant groups that cannot be synchronized because the SAP R/3 system is not physically connected. This would cause ticket workflow that cannot end successfully.</p>
</li>
<li>
<p>Use the <strong>spml:addPrivilegeAssignment</strong> section to specify the privileges to add together with the user creation. In this case, we add two roles: <strong>Manager Analyst Relations</strong> and <strong>My-Company Newsletter</strong>. The first role must be approved later on, which is not visible here. Of course we could specify time restrictions or - if the role requires it - role parameters. But we keep it simple here. Check the other sample requests delivered with the product to see all features of this sample web service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we will send this request to the sample web service server.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-SendingtheTicket"><a class="anchor" href="#Tutorials-SendingtheTicket"></a>Sending the Ticket</h4>
<div class="paragraph">
<p>To send the ticket, use the prepared batch file and perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Double click the batch file <strong>CreateUserWithRoles.bat</strong> to run it. The client sends the XML request to the sample web service which starts a request workflow. This requires some seconds. Be patient.</p>
</li>
<li>
<p>A log file <strong>CreateUserWithRoles.log</strong> is written. Open it to see the result:</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>CreateUserWithRoles.id=Request-1
Connecting to http://localhost:8080/sourceTicketing/sourceTicketingService
CreateUserWithRoles.result=URN_OASIS_NAMES_TC_SPML_1_0_SUCCESS
CreateUserWithRoles.correlationId=141cb8e7b72$7bcc</pre>
</div>
</div>
<div class="paragraph">
<p>The third line shows that the request ended with SUCCESS.</p>
</div>
<div class="paragraph">
<p>The fourth line delivers the internal correlation ID that can be used for status requests alternatively to the request ID.</p>
</div>
<div class="paragraph">
<p>If everything worked as expected, we can view the resulting ticket workflow.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-WatchingtheTicketWorkflow"><a class="anchor" href="#Tutorials-WatchingtheTicketWorkflow"></a>Watching the Ticket Workflow</h4>
<div class="paragraph">
<p>The sample ticket web service evaluates the incoming tickets and starts the request workflow that fits best. Perform these steps to view and monitor the workflow:</p>
</div>
<div class="paragraph">
<p>Log in to the DirX Identity Manager&#8217;s <strong>Provisioning</strong> view group.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Workflows</strong> view and navigate to <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Service Management</strong> &#8594; <strong>Process Ticket &#8594;</strong> <em>date</em> <strong>&#8594; Irwin Dough</strong>.</p>
</div>
<div class="paragraph">
<p>Click the <strong>General</strong> tab to view the workflow progress.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can see <strong>Add attributes</strong> and <strong>Apply order</strong> steps that are already completed. The sample web service converted the ticket into an Identity order that was passed to the ticket request workflow.</p>
</li>
<li>
<p>The first activity <strong>Add attributes</strong> added two fixed value attributes. To understand this, navigate to the workflow definition:<br>
<strong>Definitions &#8594; My-Company &#8594; Service Management &#8594; Process Ticket</strong>.</p>
</li>
<li>
<p>Open this entry, click the <strong>Add attributes</strong> activity and then click the <strong>Parameters</strong> tab. You can see that the attribute <strong>employeeType</strong> is set to "Contractor" and the <strong>dxmOprMaster</strong> attribute to "Service Management".</p>
</li>
<li>
<p>Check the result in the workflow instance: click the <strong>Object</strong> tab. You should see all attributes from your ticket definition and additionally the two attributes that were set by the <strong>Add attributes</strong> step.</p>
</li>
<li>
<p>Click the <strong>Assignments</strong> tab. Here you should see the two requested assignments from the ticket definition.</p>
</li>
<li>
<p>The second activity <strong>Apply order</strong> performed a sequence of steps:</p>
<div class="ulist">
<ul>
<li>
<p>It created the user in the Identity Store at the requested location. Check that the user exists (<strong>Users &#8594; My-Company &#8594; Professional Services &#8594; Irwin Dough</strong>). Step through the tabs to verify that the attributes were correctly set. You can see that many attributes were set automatically through attribute mastering from the business object <strong>Location</strong>.</p>
</li>
<li>
<p>It performed a privilege resolution. Check the <strong>Assigned</strong> <strong>Roles</strong>, <strong>Assigned</strong> <strong>Permissions</strong>, <strong>Assigned</strong> <strong>Groups</strong> and <strong>Accounts</strong> tabs to see the result.</p>
</li>
<li>
<p>One role was assigned automatically and is already resolved (<strong>Contractor</strong> role via rule).</p>
</li>
<li>
<p>The role <strong>My-Company Newsletter</strong> was resolved immediately because it is not flagged for approval.</p>
</li>
<li>
<p>The role <strong>Manager Analyst Relations</strong> requires approval. Thus an approval child workflow was started from the parent (ticket) workflow.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You can check this workflow either directly under <strong>Monitor &#8594; My-Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>4-Eye Approval</strong> &#8594; <em>date</em> <strong>&#8594; Irwin Dough</strong>&#8594; <strong>Manager Analyst Relations</strong> or you can use the parent workflow as starting point.</p>
</li>
<li>
<p>Click the parent workflow instance again and then select the <strong>Child</strong> <strong>Workflows</strong> tab. You can see the started child workflow as a line in the table. Note that <strong>State</strong> and <strong>ApplicationState</strong> are empty for child workflows not yet finished. Click the line and then the icon right beside the table. The Manager navigates to the child workflow instance. You can view it and then return to the parent workflow (use the arrow button of the manager).</p>
</li>
<li>
<p>We check the configuration of the <strong>Apply order</strong> activity to understand the settings in more detail. Click this activity in the workflow definition and select the <strong>Parameters</strong> tab. The meaning of the flags is:</p>
<div class="ulist">
<ul>
<li>
<p>If <strong>Apply Subject Order</strong> is flagged, the activity analyzes the order and creates or modifies the object.</p>
</li>
<li>
<p>If <strong>Track Changes</strong> is checked, all account and group relevant changes that are caused by this activity are stored in a list of provisioning changes that can be used later on by the <strong>Wait for completed provisioning</strong> activity.</p>
</li>
<li>
<p>If <strong>Track Changes in Child Workflows</strong> is checked, then child workflows get the Track Changes flag checked. This setting forces the child workflow to propagate the list of provisioning actions to its parent. This means that the parent has a consolidated list of all changes that a <strong>Wait for completed provisioning</strong> activity can use.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before we perform the pending approval task, we check the ticket status via the web service.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheTicketStatus"><a class="anchor" href="#Tutorials-CheckingtheTicketStatus"></a>Checking the Ticket Status</h4>
<div class="paragraph">
<p>Meanwhile, a user in the ticket system wants to know whether the ticket is processed. Regardless of how this is done, the ticket system has to send a status request to DirX Identity. You can simulate this procedure.</p>
</div>
<div class="paragraph">
<p>First, we view the status request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the file <strong>sampleTickets/CheckStatus.xml</strong> for editing.</p>
</li>
<li>
<p>Change the status request so that the operational attribute <strong>correlationID</strong> is exactly the correlation ID of the response that was received from <strong>CreateUserWithRoles.xml</strong> request. The correct value is the value of <strong>CreateUserWithRoles.correlationId</strong> from the file <strong>CreateUserWithRoles.log</strong>.The <strong>correlationID</strong> is the identifier of the workflow.</p>
</li>
<li>
<p>Remove the xml-comment characters which enclose the operationalAttributes section. This ensures that the status is checked first via correlationID and then via requestID as fallback.</p>
</li>
<li>
<p>If not yet done, change the requestID value so that it is <strong>checkStatus-1</strong> instead of <strong>Request-1</strong>. This way, the status request will only be successful in case of a correct correlationID in the request.</p>
</li>
<li>
<p>Save the file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we can start the status request.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run the prepared <strong>CheckStatus.bat</strong> batch file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check the result:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the <strong>CheckStatus.log</strong> file.</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>CheckStatus.id=Request-1
Connecting to http://localhost:8080/sourceTicketing/sourceTicketingService
CheckStatus.result=URN_OASIS_NAMES_TC_SPML_1_0_PENDING
CheckStatus.correlationId=141cb8e7b72$7bcc</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can see the request ID in the first line. The third line shows the status: <strong>PENDING</strong>. This indicates that the ticket processing in DirX Identity has not yet completed.</p>
</li>
<li>
<p>The correlation ID in the fourth line is the internal ID of the ticket in DirX Identity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The response result can be used by the ticket system to present the associated information to the end user.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheTicketStatusbyRequestIdentifier"><a class="anchor" href="#Tutorials-CheckingtheTicketStatusbyRequestIdentifier"></a>Checking the Ticket Status by Request Identifier</h4>
<div class="paragraph">
<p>In a scenario where a ticket client is able to send tickets with unique identifiers for the <strong>requestID</strong> parameter, the status can be checked by this request identifier. You can simulate this procedure.</p>
</div>
<div class="paragraph">
<p>First, we view the status request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the file <strong>sampleTickets/CheckStatusByRequestID.xml</strong>.</p>
</li>
<li>
<p>Note that the value for <strong>requestID</strong> is the same as for <strong>sampleTickets/CreateUserWithRoles.xml</strong>. Close the file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we can start the status request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run the prepared <strong>CheckStatusByRequestID.bat</strong> batch file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check the result:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the <strong>CheckStatusByRequestID.log</strong> file:</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>CheckStatus.id=Request-1
Connecting to http://localhost:8080/sourceTicketing/sourceTicketingService
CheckStatus.result=URN_OASIS_NAMES_TC_SPML_1_0_PENDING
CheckStatus.correlationId=141cb8e7b72$7bcc</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can see the request ID in the first line. The third line shows the status: <strong>PENDING</strong>. This indicates that the ticket processing in DirX Identity has not yet completed.</p>
</li>
<li>
<p>The correlation ID in the fourth line is the internal ID of the ticket in DirX Identity. You could use it alternatively to request the status, see the section "Checking the Ticket Status" above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The response result can be used by the ticket system to present the associated information to the end user.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ApprovingtheManagerAnalystRelationsRole"><a class="anchor" href="#Tutorials-ApprovingtheManagerAnalystRelationsRole"></a>Approving the Manager Analyst Relations Role</h4>
<div class="paragraph">
<p>Now we have to approve the pending Manager Analyst Relations approval workflow.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Benetton Gianfranco</strong>.</p>
</li>
<li>
<p>Click <strong>Work List</strong> &#8594; <strong>Task list</strong> and click the relevant item.</p>
</li>
<li>
<p>Enter a reason and accept the request.</p>
</li>
<li>
<p>Log out and log in again as <strong>Bellanger Lionel</strong>.</p>
</li>
<li>
<p>Click <strong>Work List</strong> &#8594; <strong>Task list</strong> and click the relevant item.</p>
</li>
<li>
<p>Enter a reason and accept the request.</p>
</li>
<li>
<p>Log out of Web Center.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll view the status of the request workflows.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ViewingtheRequestWorkflows"><a class="anchor" href="#Tutorials-ViewingtheRequestWorkflows"></a>Viewing the Request Workflows</h4>
<div class="paragraph">
<p>First we check the completed approval workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager.</p>
</li>
<li>
<p>Select the <strong>Workflows</strong> view.</p>
</li>
<li>
<p>Navigate to <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>4-Eye Approval</strong> &#8594; <em>date</em> &#8594; <strong>Irwin Dough</strong> &#8594; <strong>Manager Analyst Relations</strong>.</p>
</li>
<li>
<p>Click the <strong>General</strong> tab and verify that the workflow is completed. The <strong>Apply Approved Privilege Change</strong> activity is green.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the <strong>Track Changes</strong> flag was set for this child workflow from the parent workflow, the child workflow propagated the completion to the parent workflow. We can see the result in the ticket workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Request Workflows</strong> view and navigate to <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Service Management</strong> &#8594; <strong>Process Ticket &#8594;</strong> <em>date</em> &#8594; <strong>Irwin Dough</strong>.</p>
</li>
<li>
<p>Click the <strong>General</strong> tab. The <strong>Wait for child workflows</strong> activity is green (successfully completed) and the <strong>Wait for completed provisioning</strong> activity is either in progress or also green (successfully completed). If not, wait until the activity and the workflow are complete.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last step checked every minute that all states of all relevant accounts and groups have changed as expected. This means that provisioning was performed correctly.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingtheFinalTicketState"><a class="anchor" href="#Tutorials-CheckingtheFinalTicketState"></a>Checking the Final Ticket State</h4>
<div class="paragraph">
<p>Meanwhile, a user in the ticket system wants to know the status of the ticket, so we need to send another status request.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run the prepared <strong>CheckStatus.bat</strong> batch file again.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check the result:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the <strong>CheckStatus.log</strong> file:</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>CheckStatus.id=Request-1
Connecting to http://localhost:8080/sourceTicketing/sourceTicketingService
CheckStatus.result=URN_OASIS_NAMES_TC_SPML_1_0_SUCCESS
CheckStatus.correlationId=141cb8e7b72$7bcc</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The third line shows that the ticket could be processed correctly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The response result can be used by the ticket system to present the associated information to the end user. The ticket was correctly and completely implemented.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-ManagingPersonas"><a class="anchor" href="#Tutorials-ManagingPersonas"></a>Managing Personas</h3>
<div class="paragraph">
<p>Personas are special representations of one real identity. To understand the concept of personas you should be familiar with chapter "Managing Personas" in the <em>Provisioning Administration Guide</em>.</p>
</div>
<div class="paragraph">
<p>In this section, we show you how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable persona management.</p>
</li>
<li>
<p>Create and view personas in Web Center.</p>
</li>
<li>
<p>Prepare the persona environment.</p>
</li>
<li>
<p>Create a persona from a non-primary account.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the professional license is required to use persona management.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-EnablingPersonaManagement"><a class="anchor" href="#Tutorials-EnablingPersonaManagement"></a>Enabling Persona Management</h4>
<div class="paragraph">
<p>To enable persona management:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DirX Identity Manager, select <strong>Domain</strong> <strong>Configuration</strong> of the Provisioning domain.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, check <strong>Enable Persona Handling</strong> if it&#8217;s not already checked.</p>
</li>
<li>
<p>Save the update and then re-start the IdS-J service, Apache Tomcat, and DirX Identity Manager so that enabling persona management takes effect.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-HandlingPersonasinWebCenter"><a class="anchor" href="#Tutorials-HandlingPersonasinWebCenter"></a>Handling Personas in Web Center</h4>
<div class="paragraph">
<p>This part of the exercise demonstrates how to handle personas in Web Center.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CreatingaUsersMainIdentity"><a class="anchor" href="#Tutorials-CreatingaUsersMainIdentity"></a>Creating a User&#8217;s Main Identity</h5>
<div class="paragraph">
<p>To create a user&#8217;s main identity, you simply create a user. We create the user John Smith, who will act as the main identity in our tutorial:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Taspatch Nik</strong>.</p>
</li>
<li>
<p>From the <strong>Users</strong> menu, select the operation <strong>Create new user</strong>.</p>
</li>
<li>
<p>Select the workflow <strong>Create a user stepwise without approval</strong>. The <strong>Enter Attributes</strong> dialog appears.</p>
</li>
<li>
<p>Select the folder <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Sales</strong> &#8594; <strong>Sales</strong> <strong>Europe</strong>.</p>
</li>
<li>
<p>Specify the following data for John Smith in the fields provided:<br>
Last Name: <strong>Smith</strong><br>
First name: <strong>John</strong><br>
Description: <strong>Main identity for persona tutorial</strong><br>
Employee type: <strong>Internal</strong><br>
Employee number: <strong>EN-7716</strong><br>
Location: <strong>My-Company London</strong><br>
Manager: <strong>Richter Sven</strong><br>
Company: <strong>My-Company</strong><br>
Organizational unit: <strong>Sales</strong><br>
Phone: <strong>+44 324 234-6944</strong><br>
E-Mail: <strong>John.Smith@My-Company.com</strong></p>
</li>
<li>
<p>Click <strong>Save</strong> to submit the data. The <strong>Request Privileges</strong> dialog is displayed.</p>
</li>
<li>
<p>Assign the role <strong>Internal Employee</strong> and then click <strong>Save</strong> to submit the data.</p>
</li>
<li>
<p>The workflow now creates the new user <strong>John Smith</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-VerifyingJohnSmithsMainIdentity"><a class="anchor" href="#Tutorials-VerifyingJohnSmithsMainIdentity"></a>Verifying John Smith&#8217;s Main Identity</h5>
<div class="paragraph">
<p>To verify John Smith&#8217;s main identity:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Web Center, search user <strong>Smith John</strong>.</p>
</li>
<li>
<p>In the search result table, click on John Smith&#8217;s name to display the overview page.</p>
</li>
<li>
<p>Verify whether the data you entered are correct.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CreatingaPersonaforJohnSmith"><a class="anchor" href="#Tutorials-CreatingaPersonaforJohnSmith"></a>Creating a Persona for John Smith</h5>
<div class="paragraph">
<p>John Smith will work for a specific time-period for My-Company in Houston, USA. Therefore Nik Taspatch creates a persona for John Smith. John Smith&#8217;s user entry acts as template for the persona entry to be created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Web Center, select user John Smith.</p>
</li>
<li>
<p>From the <strong>Users</strong> menu, select the operation <strong>Create new persona</strong>.</p>
</li>
<li>
<p>Select the workflow <strong>Create a persona stepwise without approval</strong>. The <strong>Enter Attributes</strong> dialog appears.</p>
</li>
<li>
<p>The folder <strong>Sales Europe,</strong> <strong>Sales,</strong> <strong>My-Company,</strong> <strong>Users</strong> is pre-selected. Last name and first name are initialized with John Smith&#8217;s data.</p>
</li>
<li>
<p>Specify the following data for John Smith&#8217;s persona in the fields provided:<br>
Description: <strong>Persona for John Smith&#8217;s location in USA</strong><br>
Employee type: <strong>Internal</strong><br>
Employee number: <strong>EN-7716</strong><br>
Location: <strong>My-Company Houston</strong><br>
Manager: <strong>Richter Sven</strong><br>
Company: <strong>My-Company</strong><br>
Organizational unit: <strong>Sales</strong><br>
Phone: <strong>+1 214 324-46387</strong><br>
E-Mail: <strong>John.Smith@My-Company.us</strong></p>
</li>
<li>
<p>Click <strong>Save</strong> to submit the data. The <strong>Request Privileges</strong> dialog is displayed.</p>
</li>
<li>
<p>Assign the role <strong>Internal Employee</strong> and then click <strong>Save</strong> to submit the data.</p>
</li>
<li>
<p>The workflow now creates the new persona <strong>John Smith</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ViewingJohnSmithsMainIdentityandPersona"><a class="anchor" href="#Tutorials-ViewingJohnSmithsMainIdentityandPersona"></a>Viewing John Smith&#8217;s Main Identity and Persona</h5>
<div class="paragraph">
<p>In Web Center, specify <strong>Smith</strong> in the quick search panel and press <strong>Enter</strong>.</p>
</div>
<div class="paragraph">
<p>In the search result table, the user <strong>Smith John</strong> and his persona <strong>Smith John Psn</strong> are displayed. The table displays the phone numbers of the user and his persona.</p>
</div>
<div class="paragraph">
<p>Double-click the persona entry in the table to display the persona overview page. It turns out that the user&#8217;s email address is displayed instead of the specified value.</p>
</div>
<div class="paragraph">
<p>The main identity is displayed on the bottom of the overview page (in the references block). Clicking the name (Smith John) displays the main identity’s overview page.</p>
</div>
<div class="paragraph">
<p>Clicking <strong>Personas</strong> shows the list of all personas assigned to the user. Clicking on the icon at the right in the table displays the persona’s overview page.</p>
</div>
<div class="paragraph">
<p>Clicking <strong>Accounts</strong> on the persona overview page displays two accounts: one in the Intranet Portal and one in the Windows Domain USA.</p>
</div>
<div class="paragraph">
<p>So, with his identity and with his persona, John Smith now has accounts in Windows Domain Europe <em>and</em> in Windows Domain USA, and he is able to work at both locations.</p>
</div>
<div class="paragraph">
<p>The search result illustrates that there are the following problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The persona&#8217;s email address is overwritten with the user&#8217;s data.</p>
</li>
<li>
<p>The create workflow can be optimized.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore you must change the configuration to prepare DirX Identity for using persona functionality. The following sections describe this task.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-PreparingthePersonaEnvironment"><a class="anchor" href="#Tutorials-PreparingthePersonaEnvironment"></a>Preparing the Persona Environment</h4>
<div class="paragraph">
<p>We assume that the main identity only has personas that have the same employeeType, employeeNumber and company as the main identity.</p>
</div>
<div class="paragraph">
<p>This assumption and the evaluation from the sections above result in the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The persona&#8217;s email address can be different from the user&#8217;s email address.</p>
</li>
<li>
<p>The user&#8217;s main identity serves as a template for the persona. It inherits the attributes employeeType, employeeNumber and company. In the create persona dialog of Web Center, these attributes must be initialized with the values of the main identity and be read-only.</p>
</li>
<li>
<p>The persona&#8217;s common name is built according the rule:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>cn=sn givenName employeeNumer P<br>
<br>
for example, <strong>Smith John EN-7716 P</strong>.<br>
<br>
Starting with the user&#8217;s second persona, a counter is appended to the common name; for example, <strong>Smith John EN-7716 P1</strong> for John Smith&#8217;s second persona.</p>
</div>
<div class="paragraph">
<p>To satisfy these requirements, you must modify object descriptions and Java scripts in the domain configuration with DirX Identity Manager and a properties file of Web Center. The following sections provide details about these modifications.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-ModifyingthePersonaCommon.xmlObjectDescription"><a class="anchor" href="#Tutorials-ModifyingthePersonaCommon.xmlObjectDescription"></a>Modifying the PersonaCommon.xml Object Description</h5>
<div class="paragraph">
<p>Recall from "Preparing the Persona Environment" that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The user&#8217;s main identity inherits the values of employeeNumber, emplyeeType and organization to the persona.</p>
</li>
<li>
<p>The user&#8217;s main identity does not inherit the email address value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the PersonaCommon.xml object description, the <strong>master="owner"</strong> attribute specifies the inheritance of property values. To remove this attribute for the email address and add this attribute for the attributes employeeType, employeeNumber and company:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager &#8594; <strong>Provisioning</strong>.</p>
</li>
<li>
<p>Select the <strong>Domain Configuration</strong> view.</p>
</li>
<li>
<p>Edit the <strong>PersonaCommon.xml</strong> object description under <strong>My-Company</strong> &#8594; <strong>Customer Extensions</strong> &#8594; <strong>Object Descriptions</strong>.</p>
</li>
<li>
<p>From <strong>&lt;property name="mail"</strong> &#8230;&#8203; <strong>/&gt;</strong>, remove <strong>master="owner"</strong> to disable the inheritance of the user&#8217;s email address to the persona.</p>
</li>
<li>
<p>To the property descriptions of employeeType, employeeNumber and company add <strong>master="owner"</strong>:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;property name="employeeType" ... master="owner" /&gt;
&lt;property name="employeeNumber" ... master="owner" /&gt;
&lt;property name="dxrOrganizationLink" ... master="owner" /&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>to enable inheritance from the user. Note that you must add the entire property description for <strong>employeeNumber</strong> because this property is imported from the <strong>Persona.xml</strong> object description.</p>
</div>
<div class="paragraph">
<p>Now whenever the persona is saved, the properties marked with <strong>master="owner"</strong> are updated from the persona&#8217;s owner, the user&#8217;s main identity.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ModifyingthePersonaFromUser.xmlObjectDescription"><a class="anchor" href="#Tutorials-ModifyingthePersonaFromUser.xmlObjectDescription"></a>Modifying the PersonaFromUser.xml Object Description</h5>
<div class="paragraph">
<p>Recall from "Preparing the Persona Environment" that the user serves as a template when creating the persona.</p>
</div>
<div class="paragraph">
<p>The PersonaFromUser.xml object description specifies how the persona is created from its template, the user&#8217;s main identity. Perform the following steps to modify this object description:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You&#8217;re already logged in to DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Domain Configuration</strong> view.</p>
</li>
<li>
<p>Edit the <strong>PersonaFromUser.xml</strong> object description under <strong>My-Company</strong> &#8594; <strong>Customer Extensions</strong> &#8594; <strong>Object Descriptions</strong>.</p>
</li>
<li>
<p>Add the following property description for company:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;property name="dxrOrganizationLink" type="java.lang.String" &gt;
   &lt;extension&gt;
       &lt;namingRule&gt;
       &lt;reference baseObject="SvcUser" attribute="dxrOrganizationLink" /&gt;
       &lt;/namingRule&gt;
   &lt;/extension&gt;
&lt;/property&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a result, the persona&#8217;s organization is initialized with the user&#8217;s organization value in the create persona dialog. Note that the corresponding property descriptions for employeeNumber and employeeType already exist.</p>
</div>
<div class="paragraph">
<p>Now the user&#8217;s main identity is used as a template for the persona and the attributes employeeNumber, employeeType and company are inherited from the user&#8217;s data. The last task in the DirX Identity Manager is to specify the building rule for the persona&#8217;s common name. The following section describes this task.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ModifyingtheJavaScriptCommonNameForPersona.js"><a class="anchor" href="#Tutorials-ModifyingtheJavaScriptCommonNameForPersona.js"></a>Modifying the Java Script CommonNameForPersona.js</h5>
<div class="paragraph">
<p>Recall from "Preparing the Persona Environment" that the persona&#8217;s common name is built from the user&#8217;s surname, given name, employeeNumber, an appended <strong>P</strong> and a counter. The existing script uses the surname and the given name to build the persona&#8217;s common name. It appends the suffix <strong>Psn</strong> and a counter starting with the second persona.</p>
</div>
<div class="paragraph">
<p>The Java script CommonNameForPersona.js specifies the building rule for the persona&#8217;s common name. Perform the following steps to modify this Java script:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You&#8217;re already logged in to DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Domain Configuration</strong> view.</p>
</li>
<li>
<p>Edit the Java script <strong>CommonNameForPersona.js</strong> <strong>My-Company</strong> &#8594; <strong>Customer Extensions</strong> &#8594; <strong>JavaScripts</strong>.</p>
</li>
<li>
<p>To include the employeeNumer to the persona&#8217;s common name, you must first add the variable definition for emplyeeNumber. Insert the following definition after the definition for <strong>sn</strong>:<br>
<br>
<strong>var employeeNumber = obj.getValue("employeeNumber");</strong></p>
</li>
<li>
<p>The building rule for the persona&#8217;s common name is specified in the variable definition for <strong>cn</strong>. Change this definition to:<br>
<br>
<strong>var cn = sn + " " + givenName + " " + employeeNumber + " P";</strong></p>
</li>
<li>
<p>Finally, you must change the instruction in the while statement below to:<br>
<br>
<strong>cn = sn + " " + givenName + " " + employeeNumber + " P"+i;</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you have completed all of the tasks that you must perform with DirX Identity Manager:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The user&#8217;s main identity is used as a template for creating the persona.</p>
</li>
<li>
<p>The persona&#8217;s e-mail address can be different from the user&#8217;s.</p>
</li>
<li>
<p>The employeeNumer, the employeeType and the organization are inherited from the user&#8217;s data.</p>
</li>
<li>
<p>The persona&#8217;s common name is built from the user&#8217;s surname, givenname, employee number and the suffix <strong>P</strong> followed by a counter starting with the second persona.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The final configuration task now is to set the fields <strong>Employee number</strong>, <strong>Employee type</strong> and <strong>Company</strong> to read-only in Web Center to prevent the user from changing these values when creating the persona in Web Center. The following section describes this task.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ModifyingdefaultRenderer.properties"><a class="anchor" href="#Tutorials-ModifyingdefaultRenderer.properties"></a>Modifying defaultRenderer.properties</h5>
<div class="paragraph">
<p>A convenient way to create a persona is to create it in Web Center. In this tutorial, we don&#8217;t permit changing the persona&#8217;s employeeType, employeeNumber and company (dxrOrganizationLink). Therefore, the fields for these attributes should be set to read-only in the create persona dialog of Web Center.</p>
</div>
<div class="paragraph">
<p>To set the input fields for these attributes to read-only in the create persona dialog of Web Center, edit the Web Center configuration file <strong>defaultRenderer.Properties</strong> under <em>install_path</em>*\web\webCenter-My-Company\webCenter\WEB-INF\config* and add the following instructions:</p>
</div>
<div class="paragraph">
<p><strong>employeetype@dxrpersona = roText</strong><br>
<strong>employeenumber@dxrpersona = roText</strong><br>
<strong>dxrorganizationlink@dxrpersona = roOrganizationSearch</strong></p>
</div>
<div class="paragraph">
<p>Before you can verify your modifications, you must re-start the IdS-J server and the Apache Tomcat server hosting your Web Center so that the modifications take effect. The following section describes how you can verify your modifications.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-VerifyingtheUpdatedPersonaEnvironment"><a class="anchor" href="#Tutorials-VerifyingtheUpdatedPersonaEnvironment"></a>Verifying the Updated Persona Environment</h5>
<div class="paragraph">
<p>To verify your modifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web center as <strong>Taspatch Nik</strong>.</p>
</li>
<li>
<p>Search for <strong>Smith John</strong>.</p>
</li>
<li>
<p>Select the user entry to display John Smith&#8217;s overview page.</p>
</li>
<li>
<p>Select the <strong>Create new persona</strong> operation from the <strong>Users</strong> menu.</p>
</li>
<li>
<p>Select the workflow <strong>Create a persona stepwise without approval</strong>. The <strong>Enter Attributes</strong> dialog is displayed.</p>
</li>
<li>
<p>Check that the fields <strong>Employee number</strong>, <strong>Employee Type</strong> and <strong>Company</strong> are initialized with the correct values and are read-only.</p>
</li>
<li>
<p>Specify values in the fields <strong>Description</strong>, <strong>Phone</strong> and <strong>E-Mail</strong>. and then click <strong>Save</strong>.</p>
</li>
<li>
<p>Assign the role <strong>Internal Employee</strong> to the persona and then click <strong>Save</strong>. Now the new persona is created.</p>
</li>
<li>
<p>Search again for <strong>Smith John</strong> to display his user and persona entries.</p>
</li>
<li>
<p>Check that the new persona was created with the correct common name <strong>Smith John EN7716 P</strong>[<em>counter</em>] and the correct attribute values for <strong>Employee number</strong>, <strong>Employee Type</strong>, <strong>Company</strong>, <strong>Description</strong>, <strong>Phone</strong> and <strong>E-Mail</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CreatingaNewPersonaforanImportedNon-PrimaryAccount"><a class="anchor" href="#Tutorials-CreatingaNewPersonaforanImportedNon-PrimaryAccount"></a>Creating a New Persona for an Imported Non-Primary Account</h4>
<div class="paragraph">
<p>This tutorial illustrates how to handle the case where a user has more than one account in a target system. This situation can occur, for example, if a user has his personal Active Directory (AD) account and an imported administrative account. The personal AD account is the user&#8217;s primary account. He uses this account for his usual tasks. Sometimes the user must act as the system administrator. He uses the second imported administrative account for this purpose.</p>
</div>
<div class="paragraph">
<p>DirX Identity only manages one account per user in a target system, called the "primary" account.</p>
</div>
<div class="paragraph">
<p>In this tutorial, you create a persona for the non-primary account. Once the persona is created, the account is unassigned from the user and assigned to the persona. As a result of this procedure, the account is then the primary account for the persona and you can manage it with DirX Identity in the usual way.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-PreparingtheTutorial"><a class="anchor" href="#Tutorials-PreparingtheTutorial"></a>Preparing the Tutorial</h5>
<div class="paragraph">
<p>In this tutorial, we use the account that we created for John Smith in the previous sections as the primary account. In this step, we create the account <strong>Administrator</strong> as a second account for John Smith because he must take the place of the system administrator while he is on vacation.</p>
</div>
<div class="paragraph">
<p>To create the data used in this tutorial:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Target Systems</strong> view, select the target system <strong>Windows Domain Europe</strong> &#8594; <strong>Accounts and Groups</strong>.</p>
</li>
<li>
<p>Select <strong>New</strong> &#8594; <strong>Account</strong> to create a new account <strong>Administrator</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab, specify the following data:<br>
Name: <strong>Administrator</strong><br>
Type: Uncheck <strong>Primary account</strong>.<br>
User Data: Select the test user <strong>Smith John</strong> created in the previous sections (in <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Sales</strong> &#8594; <strong>Sales</strong> <strong>Europe</strong>). His data are displayed in the remaining fields.<br>
Leave the remaining data as they are.</p>
</li>
<li>
<p>In the <strong>Active</strong> <strong>Directory</strong> tab, specify the value <strong>admin</strong> for the mandatory field <strong>Account Name</strong>. This value is re-created according to the naming rule when the account is saved.<br>
<br>
Copy the <strong>PrimaryKey (DN in TS)</strong> value <strong>CN=Administrator,cn=Accounts</strong> for later use.</p>
</li>
<li>
<p>Click <strong>OK</strong> to create the new account.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The next steps must be performed in the <strong>Data View</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click on the new account <strong>Administrator</strong> and select <strong>Goto DataView</strong> from the context menu. The <strong>Data View</strong> opens and displays the attributes of the account <strong>Administrator</strong>.</p>
</li>
<li>
<p>Edit the <strong>All Attributes</strong> tab and specify the value <strong>IMPORTED</strong> for the <strong>dxrState</strong> attribute.</p>
</li>
<li>
<p>Select the group <strong>cn=Administrator</strong> under <strong>My-Company cn=My-Company</strong> &#8594; <strong>cn=TargetSystems</strong> &#8594; <strong>cn=Windows Domain Europe</strong> &#8594; <strong>cn=Accounts and Groups</strong> &#8594; <strong>cn=General</strong>.</p>
</li>
<li>
<p>Edit the <strong>All Attributes</strong> tab and then specify the account&#8217;s primary key value <strong>CN=Administrator,cn=Accounts</strong> (which you copied when you created the new account) for the <strong>dxrGroupMemberImported</strong> attribute.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now the user has two accounts in the same target system: the primary account <strong>John Smith</strong> account and the <strong>Administrator</strong> account.</p>
</div>
<div class="paragraph">
<p>The state of the non-primary Administrator account and the group membership of the Administrator group are IMPORTED.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-VerifyingJohnSmithsAccounts"><a class="anchor" href="#Tutorials-VerifyingJohnSmithsAccounts"></a>Verifying John Smith&#8217;s Accounts</h5>
<div class="paragraph">
<p>Verify John Smith&#8217;s data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Sales</strong> &#8594; <strong>Sales</strong> <strong>Europe</strong>, select the user <strong>Smith John</strong>.</p>
</li>
<li>
<p>Click the <strong>Accounts</strong> tab. For the target system <strong>Windows Domain Europe</strong>, two accounts are displayed: <strong>John Smith</strong> <strong>EN-7716</strong> and <strong>Administrator</strong>. The Administrator&#8217;s state is <strong>IMPORTED</strong>.</p>
</li>
<li>
<p>Click the <strong>Assigned Groups</strong> tab. John Smith has the assigned group <strong>Administrator</strong>. Its state is <strong>IMPORTED</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we have prepared and verified the test data for the tutorial.</p>
</div>
<div class="paragraph">
<p>You can create a persona manually for the imported Administrator account as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a new persona for user John Smith. (See "Creating a Persona for John Smith" for details.)</p>
</li>
<li>
<p>In DirX Identity Manager, edit the <strong>Administrator</strong> account and then assign the new created persona to this account in the <strong>General</strong> tab.</p>
</li>
<li>
<p>In Web Center or DirX Identity Manager, perform a direct group assignment of group <strong>Administrator</strong> to the new persona.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead of creating the persona manually, you can use rules and scripts in DirX Identity to create personas automatically. The following sections describe how to create a persona for John Smith&#8217;s non-primary <strong>Administrator</strong> account using rules and scripts.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ModifyingtheConsistencyRuleCreatePersonasForNonPrimaryAccounts"><a class="anchor" href="#Tutorials-ModifyingtheConsistencyRuleCreatePersonasForNonPrimaryAccounts"></a>Modifying the Consistency Rule CreatePersonasForNonPrimaryAccounts</h5>
<div class="paragraph">
<p>We&#8217;ll use the consistency rule <strong>CreatePersonasForNonPrimaryAccounts</strong> to create the persona for John Smith&#8217;s <strong>Administrator</strong> account. This rule is intended to automate persona creation for non-primary accounts. In DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Policies</strong> view, you&#8217;ll find this rule under <strong>Policies</strong> &#8594; <strong>Rules</strong>&#8594; <strong>Default</strong> &#8594; <strong>Consistency</strong> &#8594; <strong>Personas</strong>.</p>
</div>
<div class="paragraph">
<p>Since the rule and the algorithm are widely configurable, we&#8217;ll need to adapt it to our requirements before we run it in a later step:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab &#8594; <strong>nameOfJavaScript</strong>, we check the name of the Java script.<br>
We use the script <strong>AccountToPersona.js</strong> and do need not change the specified name here.</p>
</li>
<li>
<p>In the <strong>Filter</strong> tab, the <strong>Search base</strong> results in processing the accounts of all target systems. We want to limit the processing to the target system containing our test data, so we specify the value <strong>cn=Windows Domain Europe,cn=TargetSystems,cn=My-Company</strong>.</p>
</li>
<li>
<p>In the <strong>Filter</strong> tab, the initialized <strong>Search filter</strong> is <strong>( objectclass="dxrTargetSystemAccount" and dxruserlink=</strong> and ( not ( dxrisprimary=* ) or dxrisprimary="false" ) )*. That is, that the rule is applied only to non-primary accounts that are already assigned to a user. Since this configuration matches our needs, we leave the filter as it is.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next step, we modify the Java script <strong>AccountToPersonas.js</strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ModifyingtheJavaScriptAccountToPersonas.js"><a class="anchor" href="#Tutorials-ModifyingtheJavaScriptAccountToPersonas.js"></a>Modifying the Java Script AccountToPersonas.js</h5>
<div class="paragraph">
<p>The Java script <strong>AccountToPersonas.js</strong> performs the assignment of accounts to personas. A default script is provided under DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Domain Configuration</strong> view <strong>&#8594; My-Company</strong> folder &#8594; <strong>JavaScripts</strong>.</p>
</div>
<div class="paragraph">
<p>When running the script, the application searches this script under the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>JavaScript</strong> folder of the target system (for target system-specific configuration).</p>
</li>
<li>
<p>In the <strong>JavaScript</strong> folder of the customer extensions.</p>
</li>
<li>
<p>In the <strong>JavaScript</strong> folder for system configuration (the location of the default script).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We don&#8217;t want to change the original default script, so we copy it to the target system-specific folder <strong>Target_Systems</strong> &#8594; <strong>Windows Domain Europe</strong> &#8594; <strong>Configuration</strong> &#8594; <strong>JavaScripts</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click the default script and then select <strong>Copy</strong> from the context menu.</p>
</li>
<li>
<p>Browse to the target system-specific folder.</p>
</li>
<li>
<p>Right-click the target system specific folder and select <strong>Paste</strong> from the context menu.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll edit our copied script:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We add the attributes employeeType, employeeNumber and telephoneNumber to the user attributes to copy:<br>
<br>
var userAttributesToCopy = new Array("dxrOrganizationLink", "dxrOULink", "dxrLocationLink"<strong>, "employeeType", "employeeNumber", "telephoneNumber"</strong>);</p>
</li>
<li>
<p>The common name of the persona should consist of the main identity&#8217;s surname and given name, the employee number, the common name of the account, and an appended <strong>P</strong> to indicate the persona entry. So we change the rule for creating the persona to:<br>
<br>
<strong>var cnOfPersona = user.getValue("sn") + " " +user.getValue("givenName") + " " + user.getValue("employeeNumber") + " - " + account.getValue("cn") + " P";</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we are ready to run the consistency rule for creating a persona for a non-primary account.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-RunningtheConsistencyRuleCreatePersonasForNonPrimaryAccounts"><a class="anchor" href="#Tutorials-RunningtheConsistencyRuleCreatePersonasForNonPrimaryAccounts"></a>Running the Consistency Rule CreatePersonasForNonPrimaryAccounts</h5>
<div class="paragraph">
<p>To run the consistency rule <strong>CreatePersonasForNonPrimaryAccounts</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager &#8594; <strong>Connectivity</strong>.</p>
</li>
<li>
<p>In <strong>Global View</strong> &#8594; <strong>Scenarios</strong> &#8594; <strong>Default</strong>&#8594; <strong>Identity Store</strong>, select the workflow line connecting the Identity Store with itself.</p>
</li>
<li>
<p>Right-click the workflow line and then select the <strong>Run&#8230;&#8203;</strong> for the <strong>CreatePersonasForNonPrimaryAccounts</strong> workflow from the workflow list provided in the context menu.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rule starts a persona create workflow for user John Smith. The workflow requires that John Smith approve creating the persona. This task is described in the next section.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-ApprovingthePersonaCreateWorkflow"><a class="anchor" href="#Tutorials-ApprovingthePersonaCreateWorkflow"></a>Approving the Persona Create Workflow</h5>
<div class="paragraph">
<p>To approve the persona create workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>John Smith must approve creating the persona for his own main identity. We first must specify a password for John Smith so that he can log in to Web Center. Log in to DirX Identity Manager &#8594; <strong>Data View</strong>, select the user John Smith (cn=Smith John,ou=Sales Europe,ou=Sales,o=My-Company,cn=Users,cn=My-Company), edit the <strong>All Attributes</strong> tab, and specify a <strong>userPassword</strong>.</p>
</li>
<li>
<p>Now log in to Web Center as <strong>Smith John</strong>.</p>
</li>
<li>
<p>The <strong>My Tasks</strong> column displays the tasks John Smith must approve. Verify that it contains an Approve Creation task for <strong>Smith John EN-7716 - Administrator P.</strong> This is the new persona that the <strong>CreatePersonaForNonPrimaryAccounts</strong> workflow wants to create.</p>
</li>
<li>
<p>Click on this task to display the <strong>Approval</strong> page. The page displays the new persona&#8217;s data and the direct group assignment for the <strong>Administrator</strong> group.</p>
</li>
<li>
<p>Click <strong>Accept</strong> to create the new persona.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Do not log out of Web Center yet: we want to verify the new persona and the main identity as the last step.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-VerifyingtheNewPersonaandtheMainIdentity"><a class="anchor" href="#Tutorials-VerifyingtheNewPersonaandtheMainIdentity"></a>Verifying the New Persona and the Main Identity</h5>
<div class="paragraph">
<p>In Web Center, perform the following steps to verify the new persona and the main identity of John Smith:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the <strong>Self Service</strong> menu, select the <strong>Display Summary</strong> operation.</p>
</li>
<li>
<p>Select the <strong>Accounts</strong> tab to verify that the <strong>Administrator</strong> account is no longer assigned to the main identity.</p>
</li>
<li>
<p>Select the <strong>Groups</strong> tab to verify that the <strong>Administrator</strong> group is no longer assigned to the main identity.</p>
</li>
<li>
<p>Select the <strong>Personas</strong> tab and then select <strong>Smith</strong> <strong>John</strong> <strong>EN-7716</strong> - <strong>Administrator P</strong>. The persona&#8217;s overview page is displayed. If you are not allowed to view your persona, you can enable the access policy <strong>Users can handle their personas</strong> in DirX Identity Manager, or you can log in as <strong>Taspatch</strong> <strong>Nik</strong> in Web Center, search for user <strong>Smith</strong> and access the persona <strong>Smith John EN-7716 - Administrator P</strong>.</p>
</li>
<li>
<p>Select the <strong>Accounts</strong> tab to verify that the <strong>Administrator</strong> account is assigned to the new persona and that its state is <strong>ENABLED</strong>.</p>
</li>
<li>
<p>Select the <strong>Groups</strong> tab to verify that the <strong>Administrator</strong> group is assigned to the new persona and that its state is <strong>ENABLED</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-ManagingFunctionalUsers"><a class="anchor" href="#Tutorials-ManagingFunctionalUsers"></a>Managing Functional Users</h3>
<div class="paragraph">
<p>Functional users are used to model resources like meeting rooms, team mailboxes, or trainee accounts. To understand the concept of functional users, you should be familiar with chapter "Managing Functional Users" in the <em>Provisioning Administration Guide</em>.</p>
</div>
<div class="paragraph">
<p>In the following sections, we show you how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable functional user management.</p>
</li>
<li>
<p>Prepare the functional users environment.</p>
</li>
<li>
<p>Create and view functional users in Web Center.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the Professional Suite (Pro Suite or Pro Upgrade license) is required to use functional user management.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-EnablingFunctionalUserManagement"><a class="anchor" href="#Tutorials-EnablingFunctionalUserManagement"></a>Enabling Functional User Management</h4>
<div class="paragraph">
<p>To enable functional user management:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Domain Configuration</strong> view, select the domain object; for example, <strong>My-Company</strong>.</p>
</li>
<li>
<p>Click <strong>Edit</strong> at the domain object.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, check <strong>Enable Functional User Handling</strong>.</p>
</li>
<li>
<p>Save the update and then re-start the IdS-J service, Apache Tomcat, and DirX Identity Manager so that enabling functional user management takes effect.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-PreparingtheFunctionalUsersEnvironment"><a class="anchor" href="#Tutorials-PreparingtheFunctionalUsersEnvironment"></a>Preparing the Functional Users Environment</h4>
<div class="paragraph">
<p>Handling functional users is similar to handling personas. Both processes require a create workflow that can be adapted to the customer&#8217;s requirements. However, although the same mechanism applies, personas and functional users have separate configuration files: in the sample domain, functional users are created in a common folder <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Resources,</strong> whereas personas are created in the same folder as their main identities.</p>
</div>
<div class="paragraph">
<p>In this tutorial, we assume that the customer requests the creation of department-specific trainee users with the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The common name (cn) of the department-specific trainees must be <strong>Trainee for</strong> <em>department</em>.</p>
</li>
<li>
<p>The trainees' sponsors are the department managers. They create the trainees' functional users.</p>
</li>
<li>
<p>The new trainees must be located in the same folder as their sponsor, in the department folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following sections describe how to create a new workflow and a new object description in DirX Identity Manager that satisfies these requirements.</p>
</div>
<div class="sect4">
<h5 id="Tutorials-CreatingtheWorkflowCreateTraineeforDepartment"><a class="anchor" href="#Tutorials-CreatingtheWorkflowCreateTraineeforDepartment"></a>Creating the Workflow Create Trainee for Department</h5>
<div class="paragraph">
<p>In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Workflows</strong> view, create the new workflow as a copy of the workflow <strong>Create Functional User Without Approval</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to <strong>Workflows</strong> &#8594; <strong>Definitions</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Functional Users</strong>.</p>
</li>
<li>
<p>Right-click <strong>Create Functional User Without Approval</strong> and then select <strong>Copy Object</strong> from the context menu. The <strong>Copy</strong> dialog box opens.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, specify the new name <strong>Create a trainee for the department</strong> and then click <strong>OK</strong>. The copy is created in the <strong>Functional Users</strong> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll adapt the workflow to the requirements described in "Preparing the Functional Users Environment":</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the properties window of the workflow, click <strong>Edit</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, double-click the first activity <strong>Functional User from User</strong> to edit its parameters:</p>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Parameters</strong> tab.</p>
</li>
<li>
<p>Specify <strong>TraineeFromUser</strong> in the <strong>Name of Object Description</strong> field because we use our own object description <strong>TraineeFromUser</strong> to create the data from the template user.</p>
</li>
<li>
<p>Delete the information in the <strong>Parent folder for subject</strong> field. If it is empty, the template user&#8217;s parent folder is used - that is exactly what we need.</p>
</li>
<li>
<p>Click <strong>OK</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select the <strong>Workflow</strong> tab.</p>
</li>
<li>
<p>Specify <strong>Create a trainee for the department</strong> in the <strong>Description</strong> field.</p>
</li>
<li>
<p>Click <strong>Save</strong> to save the changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next step, we create the object description <strong>TraineeFromUser</strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="Tutorials-CreatingtheObjectDescriptionTraineeFromUser"><a class="anchor" href="#Tutorials-CreatingtheObjectDescriptionTraineeFromUser"></a>Creating the Object Description TraineeFromUser</h5>
<div class="paragraph">
<p>In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Domain Configuration</strong> view, create the new object description <strong>TraineeFromUser.xml</strong> as a copy of <strong>FunctionalUserFromUser.xml</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browse to <strong>My-Company</strong> &#8594; <strong>Customer Extensions</strong> &#8594; <strong>Object Descriptions</strong>.</p>
</li>
<li>
<p>Right-click <strong>FunctionalUserFromUser.xml</strong> and then select <strong>Copy Object</strong> from the context menu. The <strong>Copy</strong> dialog box opens.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, specify the new name <strong>TraineeFromUser.xml</strong> and then click <strong>OK</strong>. The copy is created in the <strong>Object Descriptions</strong> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll adapt the object description to the requirements described in "Preparing the Functional Users Environment":</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the properties window of the object description, click <strong>Edit</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, specify <strong>TraineeFromUser</strong> in the <strong>Description</strong> field.</p>
</li>
<li>
<p>Select the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Change the object name to <strong>TraineeFromUser</strong>:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;object name="TraineeFromUser"/&gt;</pre>
</div>
</div>
</li>
<li>
<p>Change the naming rule for the <strong>sn</strong>:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;property name="sn"
    ...
        &lt;namingRule&gt;
            &lt;reference baseObject="SvcUser" address="dxrOULink" attribute="ou" /&gt;
        &lt;/namingRule&gt;
    ...
&lt;/property&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now the trainee gets the department name as its surname.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For the givenName, use the fixed value <strong>Trainee</strong>:<br>
In the naming rule for <strong>&lt;property name="givenName"</strong>, replace the line</p>
<div class="literalblock">
<div class="content">
<pre>&lt;reference baseObject="SvcUser" attribute="givenName" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fixedValue value="Trainee" /&gt;</pre>
</div>
</div>
</li>
<li>
<p>Each department can have just one trainee. The trainee&#8217;s common name must be <strong>Trainee for</strong> <em>department</em> <strong>Department</strong>. So use the following naming rule for cn:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;property name="cn"
        type="java.lang.String" &gt;
    &lt;extension&gt;
        &lt;namingRule&gt;
            &lt;fixedValue value="Trainee for the " /&gt;
            &lt;reference baseObject="SvcUser" address="dxrOULink" attribute="ou" /&gt;
            &lt;fixedValue value=" Department" /&gt;
        &lt;/namingRule&gt;
    &lt;/extension&gt;
&lt;/property&gt;</pre>
</div>
</div>
</li>
<li>
<p>Now the object description is complete. Click <strong>Save</strong> to save the changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The new object description must be referenced to be included at program start. For this purpose, we add an import to the <strong>main.xml</strong> object in the <strong>Configuration</strong> &#8594; <strong>Customer Extensions</strong> &#8594; <strong>Object Descriptions</strong> folder:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>main.xml</strong> object description and then click <strong>Edit</strong> in the properties window.</p>
</li>
<li>
<p>Select the <strong>Content</strong> tab.</p>
</li>
<li>
<p>Insert the following line after <strong>&lt;config&gt;</strong>:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;import file="storage://DirXmetaRole/cn=TraineeFromUser.xml,cn=Object Descriptions,cn=Customer Extensions,cn=Configuration,$(rootDN)?content=dxrObjDesc"/&gt;</pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to save the changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, restart the IdS-J service so that the changes become effective.</p>
</div>
<div class="paragraph">
<p>Now we are ready to create a new trainee for a department. The following section describes this task.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CreatingaNewTraineefortheDepartment"><a class="anchor" href="#Tutorials-CreatingaNewTraineefortheDepartment"></a>Creating a New Trainee for the Department</h4>
<div class="paragraph">
<p>To create a trainee for a department:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Taspatch Nik</strong>.</p>
</li>
<li>
<p>Search user <strong>Berner Hans</strong> from the <strong>Human Resources</strong> department. He is the manager of this department.</p>
</li>
<li>
<p>Select <strong>Berner Hans</strong>. His overview page is displayed.</p>
</li>
<li>
<p>Select the <strong>Functional Users</strong> tab to verify that he does not already have a functional user assigned.</p>
</li>
<li>
<p>Select the <strong>Create new functional user</strong> operation from the <strong>Users</strong> menu. The workflow selection page appears.</p>
</li>
<li>
<p>Select the workflow <strong>Create a trainee for the department</strong>. The <strong>Enter Attributes</strong> page appears. The values for Name, First Name and Last Name are initialized with default values as expected from the edits in the <strong>TraineeFromUser.xml</strong> object description.</p>
</li>
<li>
<p>Click <strong>Save.</strong> The <strong>Request Privileges</strong> page appears.</p>
</li>
<li>
<p>Click on <strong>Groups</strong> and assign the group <strong>dxr Mailbox Users</strong> of the <strong>Windows Domain Europe</strong> target system.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In DirX Identity Manager, verify that the functional user <strong>Trainee for the Human Resources Department</strong> is created in the <strong>Human Resources</strong> folder:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/502005954/501940381.gif" alt="attachments/502005954/501940381" width="329"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Tutorials-UsingRiskManagement"><a class="anchor" href="#Tutorials-UsingRiskManagement"></a>Using Risk Management</h3>
<div class="paragraph">
<p>In this exercise, we show you how to activate and use DirX Identity&#8217;s risk management system. DirX Identity&#8217;s Risk Calculation workflow can calculate a risk value for every user in a domain depending on the privileges assigned to the user. The workflow then assigns this risk value to three different levels: low, medium, and high, which are displayed in the different graphical user interfaces at the user. DirX Identity&#8217;s risk management system also provides a risk approval workflow that simulates a risk level resolution for a requested privilege assignment and enforces an additional approval step if the risk level is computed to be high.</p>
</div>
<div class="sect3">
<h4 id="Tutorials-ActivatingRiskManagement"><a class="anchor" href="#Tutorials-ActivatingRiskManagement"></a>Activating Risk Management</h4>
<div class="paragraph">
<p>First, we&#8217;ll activate risk management at the sample <strong>My</strong>-<strong>Company</strong> domain using DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Domain</strong> Configuration view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DirX Identity Manager &#8594; <strong>Provisioning</strong> &#8594; <strong>Domain Configuration</strong> view, select the <strong>My-Company</strong> domain object.</p>
</li>
<li>
<p>Click <strong>Edit</strong>.</p>
</li>
<li>
<p>In the Compliance tab, check <strong>Risk Check active</strong> if it isn&#8217;t already checked.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll add the <strong>RiskGovernance</strong> resource family to the resource families of the Java-based Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity Manager&#8217;s <strong>Connectivity</strong> view group, and then select the <strong>Expert</strong> <strong>View</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Configuration</strong> &#8594; <strong>DirX Identity Servers</strong> &#8594; <strong>Java Servers</strong> &#8594; <strong>My-Company</strong> &#8594; *My-Company-S1-*<em>servername</em> and click on the last entry.</p>
</li>
<li>
<p>In the Resource Families tab, click <strong>Edit</strong>. Now move <strong>RiskGovernance</strong> from the <strong>Available</strong> table to the <strong>Selected</strong> table. Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll activate the risk policy from the <strong>Provisioning</strong> &#8594; <strong>Policies</strong> view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigate to <strong>Policies</strong> &#8594; <strong>Risk Policies</strong> &#8594; <strong>Risk Policy</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, check <strong>Is</strong> <strong>active</strong> (if it&#8217;s not already activated).</p>
</li>
<li>
<p>The <strong>Risk Limits</strong> fields in the <strong>General</strong> tab define values used for risk classification into low, medium, and high risk levels. We&#8217;ll use these values in this exercise, so leave them as they are.</p>
</li>
<li>
<p>The <strong>Risk</strong> <strong>Factors</strong> section in the <strong>General</strong> tab allows you to define up to nine different risk factors and their corresponding risk weights. We&#8217;ll use the risk factors and weights supplied with this risk policy, so leave this section as it is.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, we&#8217;ll activate the Risk Calculation workflow <strong>RiskGvnController</strong> in the sample domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong>, select the <strong>Expert</strong> <strong>View</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Connectivity Configuration Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>Default</strong> &#8594; <strong>Identity</strong> <strong>Store</strong>, copy the entry <strong>RiskGvnContoller</strong> to Connectivity <strong>Configuration Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong> by pressing and holding down the Strg-key and the left mouse button and then moving the cursor with this workflow to the new location.</p>
</li>
<li>
<p>Click on the new entry <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong> &#8594; <strong>RiskGvnContoller</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> tab, check <strong>Is</strong> <strong>Active</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we need to restart the Java-based Server and Apache Tomcat for Web Center for our changes to take effect.</p>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ConfiguringRiskValuesforTargetSystemsandGroups"><a class="anchor" href="#Tutorials-ConfiguringRiskValuesforTargetSystemsandGroups"></a>Configuring Risk Values for Target Systems and Groups</h4>
<div class="paragraph">
<p>The calculation of the risk values for the users depends on the risk factors and their risk weights defined in the risk policy and the defined risk weights of the target systems and of their individual groups. For the sample domain, the risk weights have already been specified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Target</strong> <strong>Systems</strong>, click <strong>Intranet</strong> <strong>Portal</strong> and then click the <strong>Advanced</strong> tab. At the bottom of the page, you&#8217;ll see the <strong>Risk</strong> <strong>Parameters</strong> with the <strong>Target system risk weight</strong> set to <strong>2</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Intranet Portal</strong> &#8594; <strong>Accounts and Groups</strong> &#8594; <strong>General</strong> &#8594; <strong>Manager Portal</strong> and click the <strong>Operational</strong> tab. At the bottom of the page, you&#8217;ll see the <strong>Risk</strong> <strong>Parameters</strong> with the <strong>Group risk weight</strong> set to <strong>3</strong>.</p>
</li>
<li>
<p>Look at the risk weights of the other target systems and their groups. We&#8217;ll leave these values as they are.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-CheckingUserRiskParameters"><a class="anchor" href="#Tutorials-CheckingUserRiskParameters"></a>Checking User Risk Parameters</h4>
<div class="paragraph">
<p>As of now, risk values have not been calculated and the risk parameters of the user entries are empty. We can see this using DirX Identity Manager&#8217;s Provisioning view in the sample domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Global</strong> <strong>IT</strong> &#8594; and click <strong>Pitton</strong> <strong>Lavina</strong> to select it.</p>
</li>
<li>
<p>Click the <strong>Risk</strong> <strong>Parameters</strong> tab to open it. You can see that all fields in this tab are empty.</p>
</li>
<li>
<p>Look at the <strong>Risk</strong> <strong>Parameters</strong> tabs of other users. All the fields in each tab are empty.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll run the Risk Calculation workflow for the first time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to DirX Identity&#8217;s <strong>Connectivity</strong> view group and then select the <strong>Expert</strong> <strong>View</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong> &#8594; <strong>RiskGvnContoller</strong>. Right-click this entry and then select <strong>Run</strong> <strong>Workflow</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now go back to the <strong>Provisioning</strong> &#8594; <strong>Users</strong> view in the sample domain to look at the user entries again:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Global</strong> <strong>IT</strong> &#8594; and click <strong>Pitton</strong> <strong>Lavina</strong> to select it.</p>
</li>
<li>
<p>Click the <strong>Risk</strong> <strong>Parameters</strong> tab to open it. You can see that the fields are now populated and the <strong>Risk</strong> <strong>Level</strong> is set according to the <strong>Compound</strong> <strong>score</strong>, which is calculated from the <strong>Risk</strong> <strong>Factors</strong> and the defined limits in the risk policy.</p>
</li>
<li>
<p>Look at the risk parameters of other users, especially <strong>Taspatch</strong> <strong>Nik</strong> and <strong>Wagner</strong> <strong>Retha</strong>. All the fields in their <strong>Risk</strong> <strong>Parameters</strong> tabs are now filled.</p>
</li>
<li>
<p>Now switch to the Web Center and log in as <strong>Taspatch</strong> <strong>Nik</strong>:</p>
</li>
<li>
<p>Open <strong>Self Service</strong> &#8594; <strong>Display</strong> <strong>summary</strong>. You see the risk displayed as a circle filled in red. If you move the mouse over the circle, you can see the tool tip High.</p>
</li>
<li>
<p>Now choose <strong>Users</strong> &#8594; <strong>Select</strong> <strong>user</strong> and then click <strong>Search</strong>.</p>
</li>
<li>
<p>Step through the different result pages. You will find that most of the users have a low risk value (indicated with a circle outlined in green) and <strong>Wagner</strong> <strong>Retha</strong> at the last page with a medium risk level (indicated with a yellow half-circle).</p>
</li>
<li>
<p>Log out of Web Center and return to the DirX Identity Manager.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ChangingaTargetSystemWeight"><a class="anchor" href="#Tutorials-ChangingaTargetSystemWeight"></a>Changing a Target System Weight</h4>
<div class="paragraph">
<p>Now we&#8217;ll change the risk weight of the DirXmetaRole target system in the Provisioning view of the sample domain and then recalculate the risk levels in the Connectivity view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Target</strong> <strong>Systems</strong>, click <strong>DirXmetaRole</strong>.</p>
</li>
<li>
<p>In the <strong>Advanced</strong> tab, change <strong>Target</strong> <strong>system</strong> <strong>risk</strong> <strong>weight</strong> from <strong>8</strong> to <strong>1</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now switch to the <strong>Expert</strong> <strong>View</strong> in the <strong>Connectivity</strong> view group and then run the risk calculation workflow again:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity</strong> <strong>Store</strong> &#8594; <strong>RiskGvnController</strong>.</p>
</li>
<li>
<p>Right-click the <strong>RiskGvnController</strong> entry and then select <strong>Run</strong> <strong>Workflow</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now look again at the user entries in the <strong>Provisioning</strong> &#8594; <strong>Users</strong> view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Global</strong> <strong>IT</strong> &#8594; and then click <strong>Taspatch</strong> <strong>Nik</strong> to select it.</p>
</li>
<li>
<p>Click the <strong>Risk</strong> <strong>Parameters</strong> tab to open it. You can see that his <strong>Risk</strong> <strong>Level</strong> has changed to <strong>Low</strong>.</p>
</li>
<li>
<p>Look at the risk parameters of the other users, especially <strong>Pitton</strong> <strong>Lavina</strong> and <strong>Wagner</strong> <strong>Retha</strong>. All <strong>Risk</strong> <strong>Levels</strong> are now set to Low.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Switch to the Web Center and log in as <strong>Taspatch</strong> <strong>Nik</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open <strong>Self</strong> <strong>Service</strong> &#8594; <strong>Display</strong> <strong>summary</strong>. You see the risk displayed as <strong>Low</strong>.</p>
</li>
<li>
<p>Now choose <strong>Users</strong> &#8594; <strong>Select</strong> <strong>user</strong> and then click <strong>Search</strong>.</p>
</li>
<li>
<p>Step through the different result pages. You will find that mostly all of the users have a low risk value.</p>
</li>
<li>
<p>Log out from the Web Center and return to the DirX Identity Manager.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll use the <strong>Provisioning</strong> &#8594; <strong>Target</strong> <strong>Systems</strong> view in the sample domain to return the <strong>DirXmetaRole</strong> target system&#8217;s risk weight to its original value:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Target</strong> <strong>Systems</strong> and then click on <strong>DirXmetarole</strong> to select it.</p>
</li>
<li>
<p>In the <strong>Advanced</strong> tab, change <strong>Target</strong> <strong>system</strong> <strong>risk</strong> <strong>weight</strong> from <strong>1</strong> to <strong>8</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ChangingtheRiskLimitsintheRiskPolicy"><a class="anchor" href="#Tutorials-ChangingtheRiskLimitsintheRiskPolicy"></a>Changing the Risk Limits in the Risk Policy</h4>
<div class="paragraph">
<p>In this step, we&#8217;ll change the risk policy' risk limits and then recalculate risk using the new risk limits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong>, select <strong>Policies</strong> &#8594; <strong>Risk</strong> <strong>Policies</strong> &#8594; <strong>Risk</strong> <strong>Policy</strong>.</p>
</li>
<li>
<p>Change the <strong>Upper</strong> <strong>Risk</strong> <strong>limit</strong> from <strong>3.5</strong> to <strong>1.5</strong> and change the <strong>Lower</strong> <strong>Risk</strong> <strong>limit</strong> from <strong>1.5</strong> to <strong>0</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now let&#8217;s run the Risk Calculation workflow again:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Connectivity</strong> view group, select the <strong>Expert</strong> <strong>View</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity</strong> <strong>Store</strong>.</p>
</li>
<li>
<p>Right-click <strong>RiskGvnController</strong> and then select <strong>Run</strong> <strong>Workflow</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now switch to Web Center and log in as <strong>Taspatch</strong> <strong>Nik</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Choose <strong>Users</strong> &#8594; <strong>Select</strong> <strong>user</strong> and then click <strong>Search</strong>.</p>
</li>
<li>
<p>Step through the different result pages. You will now find a lot of users with medium risk level (for example, <strong>Pitton</strong> <strong>Lavina</strong>) and some of the users with high risk level (for example,. <strong>Wagner</strong> <strong>Retha</strong>).</p>
</li>
<li>
<p>Log out from Web Center and return to DirX Identity Manager.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll return the risk limits of the risk policy&#8217;s risk limits to their original values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Provisioning</strong> view, navigate to <strong>Policies</strong> &#8594; <strong>Risk</strong> <strong>Policies</strong> &#8594; <strong>Risk</strong> <strong>Policy</strong>.</p>
</li>
<li>
<p>Change the <strong>Upper</strong> <strong>Risk</strong> limit from <strong>1.5</strong> back to <strong>3.5</strong> and the <strong>Lower</strong> <strong>Risk</strong> <strong>limit</strong> from <strong>0</strong> back to <strong>1.5</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll run the Risk Calculation workflow again:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> view, navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity</strong> <strong>Store</strong>.</p>
</li>
<li>
<p>Right-click <strong>RiskGvnController</strong> and then select <strong>Run</strong> <strong>Workflow</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-SchedulingtheRiskCalculationWorkflow"><a class="anchor" href="#Tutorials-SchedulingtheRiskCalculationWorkflow"></a>Scheduling the Risk Calculation Workflow</h4>
<div class="paragraph">
<p>It makes sense to set up a schedule for the Risk Calculation workflow on a regular basis, for example, once a day:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DirX Identity Manager&#8217;s <strong>Connectivity</strong> view group, select the <strong>Expert</strong> <strong>View</strong>.</p>
</li>
<li>
<p>Navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Schedules</strong> &#8594; <strong>My-Company</strong>.</p>
</li>
<li>
<p>Right click on the <strong>My</strong>-<strong>Company</strong> entry and then select <strong>New</strong> &#8594; <strong>Schedule</strong>.</p>
</li>
<li>
<p>In <strong>Name</strong>, specify <strong>Risk</strong> <strong>Schedule</strong>.</p>
</li>
<li>
<p>Check <strong>Active</strong>.</p>
</li>
<li>
<p>Choose the workflow <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong> &#8594; <strong>RiskGvnController</strong> by clicking on the icon button with the three dots.</p>
</li>
<li>
<p>Click <strong>OK</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Tutorials-ConfiguringtheRiskApprovalWorkflow"><a class="anchor" href="#Tutorials-ConfiguringtheRiskApprovalWorkflow"></a>Configuring the Risk Approval Workflow</h4>
<div class="paragraph">
<p>DirX Identity provides a template risk approval assignment workflow that enforces an extra approval step from the company head if a requested privilege assignment will result in a high risk level for the user. In this exercise, we&#8217;ll demonstrate how to activate this workflow in the My-Company sample domain.</p>
</div>
<div class="paragraph">
<p>First, we need to copy the example workflow <strong>RiskApproval</strong> to the My-Company domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Workflows</strong>, navigate to <strong>Workflows</strong> &#8594; <strong>Definitions</strong> &#8594; <strong>Default</strong> &#8594; <strong>Assignments.</strong></p>
</li>
<li>
<p>Copy the <strong>RiskApproval</strong> entry to <strong>Workflows</strong> &#8594; <strong>Definitions</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Approval</strong> by pressing and holding down the Strg-key and the left mouse button and moving the cursor with this workflow to the new location.</p>
</li>
<li>
<p>Click on the new entry <strong>Workflows</strong> &#8594; <strong>Definitions</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>RiskApproval</strong>.</p>
</li>
<li>
<p>In the <strong>Workflow</strong> tab, check Active to activate the workflow.</p>
</li>
<li>
<p>Open the <strong>When</strong> <strong>Applicable</strong> tab. You can see that the <strong>Priority</strong> is set to <strong>99</strong>, which is now the highest priority of all activated approval workflows. As a result, this workflow will be started for the next privilege approval.</p>
</li>
<li>
<p>Restart the Java-based Server and Apache Tomcat for the Web Center for the changes to take effect.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We want our risk approval workflow to flag for additional approval a risk level change from medium to high. Let&#8217;s look at a user&#8217;s current risk score:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Provisioning</strong> &#8594; <strong>Users</strong> view, navigate to <strong>Users</strong> &#8594; <strong>My</strong>-<strong>Company</strong> &#8594; <strong>Finances</strong> &#8594; <strong>Dalmar</strong> <strong>Christopher</strong>.</p>
</li>
<li>
<p>In the <strong>Risk</strong> <strong>Parameters</strong> tab, look for the <strong>Compound</strong> <strong>score</strong> value. This value should be at about <strong>2</strong> and the <strong>Risk</strong> <strong>Level</strong> should be <strong>Medium</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll set the risk limit for high risk in our risk policy to a value that is a little bit higher than the Compound score of <strong>Dalmar</strong> <strong>Christopher</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Provisioning</strong> &#8594; <strong>Policy</strong> view, navigate to <strong>Policies</strong> &#8594; <strong>Risk</strong> <strong>Policies</strong> &#8594; <strong>Risk</strong> <strong>Policy</strong>.</p>
</li>
<li>
<p>Change the <strong>Upper</strong> <strong>Risk</strong> <strong>limit</strong> from <strong>3.5</strong> to <strong>2.1</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll run the risk calculation workflow again:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, navigate to <strong>Connectivity</strong> <strong>Configuration</strong> <strong>Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity</strong> <strong>Store</strong>.</p>
</li>
<li>
<p>Right-click <strong>RiskGvnController</strong> and then select <strong>Run</strong> <strong>Workflow</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll use Web Center to assign a new role to <strong>Dalmar</strong> <strong>Christopher</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log in to Web Center as <strong>Taspatch</strong> <strong>Nik</strong>.</p>
</li>
<li>
<p>Open <strong>Users</strong> &#8594; <strong>Select user</strong>.</p>
</li>
<li>
<p>Enter <strong>Dalmar</strong> in the search field and then click <strong>Search</strong>. You see that <strong>Dalmar</strong> <strong>Christopher</strong> is still at a medium risk level.</p>
</li>
<li>
<p>Now click <strong>Dalmar</strong> <strong>Christopher</strong> and then select <strong>Users</strong> &#8594; <strong>Assign</strong> <strong>privileges</strong>.</p>
</li>
<li>
<p>Enter <strong>DXR</strong> in the search field and then click <strong>Search</strong>.</p>
</li>
<li>
<p>Select <strong>DXR</strong> <strong>Domain</strong> <strong>Administrator</strong> and then move it from <strong>Available</strong> <strong>roles</strong> to the <strong>Assigned</strong> <strong>roles</strong>. Click <strong>Save</strong>.</p>
</li>
<li>
<p>Select <strong>Work</strong> <strong>list</strong> &#8594; <strong>Show</strong> <strong>initiated</strong> <strong>workflows</strong>. You&#8217;ll see the assignment workflow for <strong>Dalmar</strong> <strong>Christopher</strong>. Click on this entry.</p>
</li>
<li>
<p>In <strong>Workflow</strong> <strong>Details</strong>, you can see that the Calculate Risk activity is finished, and <strong>Wagner</strong> <strong>Retha</strong> must approve this privilege assignment.</p>
</li>
<li>
<p>Log out from Web Center and return to DirX Identity Manager.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s verify the current workflow status:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Workflows</strong>, navigate to <strong>Workflows</strong> &#8594; <strong>Monitor</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Approval</strong> &#8594; <strong>RiskApproval</strong> &#8594; <em>current date</em>.</p>
</li>
<li>
<p>Click on the running workflow <strong>Dalmar</strong> <strong>Christopher</strong> <strong>&#8594;</strong> <strong>DXR</strong> <strong>Domain</strong> <strong>Aministrator</strong>.</p>
</li>
<li>
<p>Open the <strong>General</strong> tab. You can see that the <strong>Calculate</strong> <strong>Risk</strong> activity is finished, and the activity <strong>approve by Priv Manager</strong> is the current step.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we need to approve the new privilege as the privilege manager <strong>Wagner</strong> <strong>Retha</strong>. We&#8217;ll use Web Center for this task:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log to Web Center as <strong>Wagner</strong> <strong>Retha</strong>.</p>
</li>
<li>
<p>Click the open task <strong>approval by Privilege Managers</strong>. You can see that the risk after approval would be high. Accept this approval and then logout from Web Center.</p>
</li>
<li>
<p>Return to DirX Identity Manager&#8217;s Provisioning &#8594; Workflows view and refresh the General workflow view. Now the activity <strong>approve by Priv Manager</strong> is finished and the activity <strong>Approval by Company Head</strong> is the current step. This additional activity is started because the resulting risk level is high. If it was medium or low, no additional approval activity would be started.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll approve the new privilege as the head of the company:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return to the Web Center and log in as <strong>Hungs</strong> <strong>Olivier</strong>.</p>
</li>
<li>
<p>Click the open task <strong>Approval by Company Head (high risk)</strong> and then accept this request.</p>
</li>
<li>
<p>Log out from the Web Center.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s have a look at the results of this approval workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return to the DirX Identity Manager&#8217;s <strong>Provisioning</strong> &#8594; <strong>Workflows</strong> view and refresh the <strong>General</strong> tab for the risk approval workflow.</p>
</li>
<li>
<p>Now the activities <strong>Approval by Company Head</strong> and <strong>Apply</strong> <strong>Changes</strong> are finished, and the privilege is successfully assigned.</p>
</li>
<li>
<p>In <strong>Provisioning</strong> &#8594; <strong>Users</strong>, navigate to <strong>Users</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Finances</strong> &#8594; <strong>Dalmar</strong> <strong>Christopher</strong>.</p>
</li>
<li>
<p>Open the <strong>Assigned</strong> <strong>Roles</strong> tab. You can see the role <strong>DXR Domain Administrator</strong> in the enabled state.</p>
</li>
<li>
<p>Open the <strong>Risk</strong> <strong>Parameters</strong> tab and look at the <strong>Compound</strong> <strong>score</strong> value. This value has not changed and the risk level is still medium. The reason for this is that the approval workflow does not recalculate the risk levels. The Risk Calculation workflow needs to run to recalculate the risk.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s run the Risk Calculation workflow again and then re-check Dalmar Christopher:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong>, navigate to <strong>Connectivity Configuration Data</strong> &#8594; <strong>Workflows</strong> &#8594; <strong>My-Company</strong> &#8594; <strong>Main</strong> &#8594; <strong>Identity Store</strong>.</p>
</li>
<li>
<p>Right-click <strong>RiskGvnController</strong> and then select <strong>Run</strong> <strong>Workflow</strong>.</p>
</li>
<li>
<p>Return to the user entry <strong>Dalmar</strong> <strong>Christopher</strong> in <strong>Provisioning</strong> &#8594; <strong>Users</strong>. Refresh the <strong>Risk</strong> <strong>Parameters</strong> tab and look at the <strong>Compound</strong> <strong>score</strong> value. This value is now higher than <strong>2.1</strong> and the <strong>Risk</strong> <strong>Level</strong> has been changed to <strong>High</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
